(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)})}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g}),n.d(t,"b",function(){return L}),n.d(t,"c",function(){return D}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return P}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return q}),n.d(t,"i",function(){return F}),n.d(t,"j",function(){return m}),n.d(t,"k",function(){return z}),n.d(t,"l",function(){return W}),n.d(t,"m",function(){return k}),n.d(t,"n",function(){return x}),n.d(t,"o",function(){return _}),n.d(t,"p",function(){return j}),n.d(t,"q",function(){return M}),n.d(t,"r",function(){return E}),n.d(t,"s",function(){return N}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return O}),n.d(t,"v",function(){return I}),n.d(t,"w",function(){return T}),n.d(t,"x",function(){return S}),n.d(t,"y",function(){return V}),n.d(t,"z",function(){return B}),n.d(t,"A",function(){return C});var r=n(12),i=n(10),a=n(7),o=n(9),u=n(18),s=n(30),c=n(1),l=n(2);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},v=function(e){return function(e){var t=d(e);return p.encodeByteArray(t,!0)}(e).replace(/\./g,"")},y=function(e){try{return p.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=m(e[n],t[n]));return e}var g=function(){function e(){var t=this;Object(c.a)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return Object(l.a)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function b(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v(JSON.stringify({alg:"none",type:"JWT"})),v(JSON.stringify(a)),""].join(".")}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function O(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function x(){return"object"===typeof self&&self.self===self}function _(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function I(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function j(){return k().indexOf("Electron/")>=0}function E(){var e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return k().indexOf("MSAppHost/")>=0}function T(){return!O()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){return"object"===typeof indexedDB}function C(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}var A="FirebaseError",D=function(e){function t(e,n,r){var o;return Object(c.a)(this,t),(o=Object(i.a)(this,Object(a.a)(t).call(this,n))).code=e,o.customData=r,o.name=A,Object.setPrototypeOf(Object(u.a)(Object(u.a)(o)),t.prototype),Error.captureStackTrace&&Error.captureStackTrace(Object(u.a)(Object(u.a)(o)),L.prototype.create),o}return Object(o.a)(t,e),t}(Object(s.a)(Error)),L=function(){function e(t,n,r){Object(c.a)(this,e),this.service=t,this.serviceName=n,this.errors=r}return Object(l.a)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(R,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new D(n,a,t)}}]),e}();var R=/\{\$([^}]+)}/g;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(U(u)&&U(s)){if(!F(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function U(e){return null!==e&&"object"===typeof e}function V(e){for(var t=[],n=function(){var e=Object(r.a)(a[i],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)n();return t.length?"&"+t.join("&"):""}function B(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),i=Object(r.a)(n,2),a=i[0],o=i[1];t[decodeURIComponent(a)]=decodeURIComponent(o)}}),t}function z(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){var n=new G(e,t);return n.subscribe.bind(n)}var G=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return Object(l.a)(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=K),void 0===r.error&&(r.error=K),void 0===r.complete&&(r.complete=K);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function K(){}function W(e){return e&&e._delegate?e._delegate:e}}).call(this,n(22))},function(e,t,n){"use strict";e.exports=n(32)},function(e,t,n){"use strict";var r=n(23),i=n(25),a=n(24);var o=n(1),u=n(2),s=n(10),c=n(14),l=n(7),f=n(9),h=n(0),d=n(18),p=n(12),v=n(13),y=n(3),m=n(4),g=n(11);function b(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var k,w=n(16),O=n(15);function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(){I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=k(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(_([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){l.value=e,o(l)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(m),u(m,o,"Generator"),u(m,i,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}var j={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},E={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function S(){return Object(y.a)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var T=function(){var e;return e={},Object(y.a)(e,"admin-restricted-operation","This operation is restricted to administrators only."),Object(y.a)(e,"argument-error",""),Object(y.a)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Object(y.a)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Object(y.a)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Object(y.a)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Object(y.a)(e,"cordova-not-ready","Cordova framework is not ready."),Object(y.a)(e,"cors-unsupported","This browser is not supported."),Object(y.a)(e,"credential-already-in-use","This credential is already associated with a different user account."),Object(y.a)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Object(y.a)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Object(y.a)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Object(y.a)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Object(y.a)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Object(y.a)(e,"email-already-in-use","The email address is already in use by another account."),Object(y.a)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Object(y.a)(e,"expired-action-code","The action code has expired."),Object(y.a)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Object(y.a)(e,"internal-error","An internal AuthError has occurred."),Object(y.a)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Object(y.a)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Object(y.a)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Object(y.a)(e,"invalid-auth-event","An internal AuthError has occurred."),Object(y.a)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Object(y.a)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Object(y.a)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Object(y.a)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Object(y.a)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Object(y.a)(e,"invalid-email","The email address is badly formatted."),Object(y.a)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Object(y.a)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Object(y.a)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Object(y.a)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Object(y.a)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Object(y.a)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Object(y.a)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Object(y.a)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Object(y.a)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Object(y.a)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Object(y.a)(e,"wrong-password","The password is invalid or the user does not have a password."),Object(y.a)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Object(y.a)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Object(y.a)(e,"invalid-provider-id","The specified provider ID is invalid."),Object(y.a)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Object(y.a)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Object(y.a)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Object(y.a)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Object(y.a)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Object(y.a)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Object(y.a)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Object(y.a)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Object(y.a)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Object(y.a)(e,"missing-continue-uri","A continue URL must be provided in the request."),Object(y.a)(e,"missing-iframe-start","An internal AuthError has occurred."),Object(y.a)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Object(y.a)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Object(y.a)(e,"missing-multi-factor-info","No second factor identifier is provided."),Object(y.a)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Object(y.a)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Object(y.a)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Object(y.a)(e,"app-deleted","This instance of FirebaseApp has been deleted."),Object(y.a)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Object(y.a)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Object(y.a)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Object(y.a)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Object(y.a)(e,"no-auth-event","An internal AuthError has occurred."),Object(y.a)(e,"no-such-provider","User was not linked to an account with the given provider."),Object(y.a)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Object(y.a)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Object(y.a)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Object(y.a)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Object(y.a)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Object(y.a)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Object(y.a)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Object(y.a)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Object(y.a)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Object(y.a)(e,"rejected-credential","The request contains malformed or mismatching credentials."),Object(y.a)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Object(y.a)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Object(y.a)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Object(y.a)(e,"timeout","The operation has timed out."),Object(y.a)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Object(y.a)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Object(y.a)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Object(y.a)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Object(y.a)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Object(y.a)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Object(y.a)(e,"unverified-email","The operation requires a verified email."),Object(y.a)(e,"user-cancelled","The user did not grant your application the permissions it requested."),Object(y.a)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Object(y.a)(e,"user-disabled","The user account has been disabled by an administrator."),Object(y.a)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Object(y.a)(e,"user-signed-out",""),Object(y.a)(e,"weak-password","The password must be 6 characters long or more."),Object(y.a)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Object(y.a)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},N=S,C=new m.b("auth","Firebase",S()),A=new w.b("@firebase/auth");function D(e){if(A.logLevel<=w.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];A.error.apply(A,["Auth (".concat(g.SDK_VERSION,"): ").concat(e)].concat(n))}}function L(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw F.apply(void 0,[e].concat(n))}function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return F.apply(void 0,[e].concat(n))}function P(e,t,n){var r=Object.assign(Object.assign({},N()),Object(y.a)({},t,n));return new m.b("auth","Firebase",r).create(t,{appName:e.name})}function M(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&L(e,"argument-error"),P(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function F(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Object(v.a)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Object(v.a)(o)))}return C.create.apply(C,[e].concat(n))}function U(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw F.apply(void 0,[t].concat(r))}}function V(e){var t="INTERNAL ASSERTION FAILED: "+e;throw D(t),new Error(t)}function B(e,t){e||V(t)}var z=new Map;function q(e){B(e instanceof Function,"Expected a class definition");var t=z.get(e);return t?(B(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,z.set(e,t),t)}function G(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function K(){return"http:"===W()||"https:"===W()}function W(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var H=function(){function e(t,n){Object(o.a)(this,e),this.shortDelay=t,this.longDelay=n,B(n>t,"Short delay should be less than long delay!"),this.isMobile=Object(m.t)()||Object(m.v)()}return Object(u.a)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(K()||Object(m.o)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Q(e,t){B(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Y=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void V("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void V("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void V("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),$=(k={},Object(y.a)(k,"CREDENTIAL_MISMATCH","custom-token-mismatch"),Object(y.a)(k,"MISSING_CUSTOM_TOKEN","internal-error"),Object(y.a)(k,"INVALID_IDENTIFIER","invalid-email"),Object(y.a)(k,"MISSING_CONTINUE_URI","internal-error"),Object(y.a)(k,"INVALID_PASSWORD","wrong-password"),Object(y.a)(k,"MISSING_PASSWORD","internal-error"),Object(y.a)(k,"EMAIL_EXISTS","email-already-in-use"),Object(y.a)(k,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Object(y.a)(k,"INVALID_IDP_RESPONSE","invalid-credential"),Object(y.a)(k,"INVALID_PENDING_TOKEN","invalid-credential"),Object(y.a)(k,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Object(y.a)(k,"MISSING_REQ_TYPE","internal-error"),Object(y.a)(k,"EMAIL_NOT_FOUND","user-not-found"),Object(y.a)(k,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Object(y.a)(k,"EXPIRED_OOB_CODE","expired-action-code"),Object(y.a)(k,"INVALID_OOB_CODE","invalid-action-code"),Object(y.a)(k,"MISSING_OOB_CODE","internal-error"),Object(y.a)(k,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Object(y.a)(k,"INVALID_ID_TOKEN","invalid-user-token"),Object(y.a)(k,"TOKEN_EXPIRED","user-token-expired"),Object(y.a)(k,"USER_NOT_FOUND","user-token-expired"),Object(y.a)(k,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Object(y.a)(k,"INVALID_CODE","invalid-verification-code"),Object(y.a)(k,"INVALID_SESSION_INFO","invalid-verification-id"),Object(y.a)(k,"INVALID_TEMPORARY_PROOF","invalid-credential"),Object(y.a)(k,"MISSING_SESSION_INFO","missing-verification-id"),Object(y.a)(k,"SESSION_EXPIRED","code-expired"),Object(y.a)(k,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Object(y.a)(k,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Object(y.a)(k,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Object(y.a)(k,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Object(y.a)(k,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Object(y.a)(k,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Object(y.a)(k,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Object(y.a)(k,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Object(y.a)(k,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Object(y.a)(k,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Object(y.a)(k,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),k),X=new H(3e4,6e4);function J(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Z(e,t,n,r){return ee.apply(this,arguments)}function ee(){return(ee=Object(h.a)(I().mark(function e(t,n,r,i){var a,o=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",te(t,a,Object(h.a)(I().mark(function e(){var a,o,u,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Object(m.y)(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Y.fetch()(ae(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e,t,n){return ne.apply(this,arguments)}function ne(){return(ne=Object(h.a)(I().mark(function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},$),n),e.prev=2,a=new oe(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ue(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Object(p.a)(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw ue(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw ue(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw ue(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw P(t,d,h);case 34:L(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof m.c)){e.next=41;break}throw e.t0;case 41:L(t,"network-request-failed");case 42:case"end":return e.stop()}},e,null,[[2,37]])}))).apply(this,arguments)}function re(e,t,n,r){return ie.apply(this,arguments)}function ie(){return(ie=Object(h.a)(I().mark(function e(t,n,r,i){var a,o,u=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Z(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&L(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Q(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var oe=function(){function e(t){var n=this;Object(o.a)(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(R(n.auth,"network-request-failed"))},X.get())})}return Object(u.a)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ue(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=R(e,t,r);return i.customData._tokenResponse=n,i}function se(e,t){return ce.apply(this,arguments)}function ce(){return(ce=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function he(e,t){return de.apply(this,arguments)}function de(){return(de=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ve(){return(ve=Object(h.a)(I().mark(function e(t){var n,r,i,a,o,u,s=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Object(m.l)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,U((a=me(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:pe(ye(a.auth_time)),issuedAtTime:pe(ye(a.iat)),expirationTime:pe(ye(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(e){return 1e3*Number(e)}function me(e){var t=e.split("."),n=Object(p.a)(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return D("JWT malformed, contained fewer than 3 sections"),null;try{var o=Object(m.d)(i);return o?JSON.parse(o):(D("Failed to decode base64 JWT payload"),null)}catch(u){return D("Caught error parsing JWT payload as JSON",u),null}}function ge(e,t){return be.apply(this,arguments)}function be(){return(be=Object(h.a)(I().mark(function e(t,n){var r=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof m.c&&ke(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function ke(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var we=function(){function e(t){Object(o.a)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Object(u.a)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Object(h.a)(I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}},t)})),n)}}},{key:"iteration",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()}]),e}(),Oe=function(){function e(t,n){Object(o.a)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Object(u.a)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=pe(this.lastLoginAt),this.creationTime=pe(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function xe(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(h.a)(I().mark(function e(t){var n,r,i,a,o,u,s,c,l,f,h;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ge(t,he(r,{idToken:i}));case 6:U(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map(function(e){var t=e.providerId,n=b(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],s=je(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Oe(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ie(){return(Ie=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(m.l)(t),e.next=3,xe(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e,t){var n=e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})});return[].concat(Object(v.a)(n),Object(v.a)(t))}function Ee(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(h.a)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t,{},Object(h.a)(I().mark(function e(){var r,i,a,o,u,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.y)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=ae(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Y.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}},e)})));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Te=function(){function e(){Object(o.a)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object(u.a)(e,[{key:"updateFromServerResponse",value:function(e){U(e.idToken,"internal-error"),U("undefined"!==typeof e.idToken,"internal-error"),U("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=me(e);return U(t,"internal-error"),U("undefined"!==typeof t.exp,"internal-error"),U("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],U(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Object(h.a)(I().mark(function e(t,n){var r,i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return V("not implemented")}},{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(U("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(U("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(U("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ne(e,t){U("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ce=function(){function e(t){Object(o.a)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=b(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new we(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Object(v.a)(a.providerData):[],this.metadata=new Oe(a.createdAt||void 0,a.lastLoginAt||void 0)}return Object(u.a)(e,[{key:"getIdToken",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(U(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ve.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ie.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r,i=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,xe(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ge(this,se(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,O=n.providerData,x=n.stsTokenManager;U(b&&x,t,"internal-error");var _=Te.fromJSON(this.name,x);U("string"===typeof b,t,"internal-error"),Ne(f,t.name),Ne(h,t.name),U("boolean"===typeof k,t,"internal-error"),U("boolean"===typeof w,t,"internal-error"),Ne(d,t.name),Ne(p,t.name),Ne(v,t.name),Ne(y,t.name),Ne(m,t.name),Ne(g,t.name);var I=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return O&&Array.isArray(O)&&(I.providerData=O.map(function(e){return Object.assign({},e)})),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=Object(h.a)(I().mark(function t(n,r){var i,a,o,u=arguments;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Te).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,xe(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ae=function(){function e(){Object(o.a)(this,e),this.type="NONE",this.storage={}}return Object(u.a)(e,[{key:"_isAvailable",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ae.type="NONE";var De=Ae;function Le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Re=function(){function e(t,n,r){Object(o.a)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,u=i.name;this.fullUserKey=Le(this.userKey,a.apiKey,u),this.fullPersistenceKey=Le("persistence",a.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Object(u.a)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ce._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Object(h.a)(I().mark(function t(n,r){var i,a,o,u,s,c,l,f,d,p,v,y=arguments;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(q(De),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter(function(e){return e}),o=a[0]||q(De),u=Le(i,n.config.apiKey,n.name),s=null,c=x(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return p=Ce._fromJSON(n,d),f!==o&&(s=p),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter(function(e){return e._shouldAllowMigration}),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}},t,null,[[10,31,34,37],[14,25]])}));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Pe(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ze(t))return"Blackberry";if(qe(t))return"Webos";if(Fe(t))return"Safari";if((t.includes("chrome/")||Ue(t))&&!t.includes("edge/"))return"Chrome";if(Be(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/firefox\//i.test(e)}function Fe(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/crios\//i.test(e)}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/iemobile/i.test(e)}function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/android/i.test(e)}function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/blackberry/i.test(e)}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/webos/i.test(e)}function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/iphone|ipad|ipod/i.test(e)}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return Ge(e)||Be(e)||qe(e)||ze(e)||/windows phone/i.test(e)||Ve(e)}function We(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pe(Object(m.m)());break;case"Worker":t="".concat(Pe(Object(m.m)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(g.SDK_VERSION,"/").concat(r)}var He=function(){function e(t){Object(o.a)(this,e),this.auth=t,this.queue=[]}return Object(u.a)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise(function(n,r){try{n(e(t))}catch(i){r(i)}})};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r,i,a,o,u,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=x(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=x(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}},e,this,[[3,24],[5,16,19,22]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qe=function(){function e(t,n,r){Object(o.a)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $e(this),this.idTokenSubscription=new $e(this),this.beforeStateQueue=new He(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Object(u.a)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=q(t)),this._initializationPromise=this.queue(Object(h.a)(I().mark(function r(){var i,a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Re.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}},r,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r,i,a,o,u,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||null===s||void 0===s||!s.user||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,function(){return Promise.reject(e.t0)});case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return U(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}},e,this,[[18,23]])}));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Object(m.l)(t):null)&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r=this,i=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&U(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}},e)}))));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Object(h.a)(I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(q(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new m.b("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Object(h.a)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return U(n=t&&q(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Re.create(this,[q(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Object(h.a)(I().mark(function e(t){var n=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return U(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=We(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Object(h.a)(I().mark(function e(){var t,n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(y.a)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_currentUser",get:function(){return this.currentUser}},{key:"assertedPersistence",get:function(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}}]),e}();function Ye(e){return Object(m.l)(e)}var $e=function(){function e(t){var n=this;Object(o.a)(this,e),this.auth=t,this.observer=null,this.addObserver=Object(m.h)(function(e){return n.observer=e})}return Object(u.a)(e,[{key:"next",get:function(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Xe(e,t,n){var r=Ye(e);U(r._canInitEmulator,r,"emulator-config-failed"),U(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Je(t),o=function(e){var t=Je(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ze(r.substr(a.length+1))}}var o=r.split(":"),u=Object(p.a)(o,2),s=u[0],c=u[1];return{host:s,port:Ze(c)}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Je(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var et=function(){function e(t,n){Object(o.a)(this,e),this.providerId=t,this.signInMethod=n}return Object(u.a)(e,[{key:"toJSON",value:function(){return V("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return V("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return V("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return V("not implemented")}}]),e}();function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:resetPassword",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t){return ot.apply(this,arguments)}function ot(){return(ot=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:update",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ut(e,t){return st.apply(this,arguments)}function st(){return(st=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signInWithPassword",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:sendOobCode",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(e,t){return ht.apply(this,arguments)}function ht(){return(ht=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(e,t){return kt.apply(this,arguments)}function kt(){return(kt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signInWithEmailLink",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signInWithEmailLink",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xt=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(o.a)(this,t),(i=Object(s.a)(this,Object(l.a)(t).call(this,"password",r)))._email=e,i._password=n,i._tenantId=a,i}return Object(f.a)(t,e),Object(u.a)(t,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ut(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",bt(t,{email:this._email,oobCode:this._password}));case 5:L(t,"internal-error");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",rt(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wt(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:L(t,"internal-error");case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,n){return new t(e,n,"password")}},{key:"_fromEmailAndCode",value:function(e,n){return new t(e,n,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),t}(et);function _t(e,t){return It.apply(this,arguments)}function It(){return(It=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signInWithIdp",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var jt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).apply(this,arguments))).pendingToken=null,e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _t(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_t(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_t(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(m.y)(t)}return e}}],[{key:"_fromParams",value:function(e){var n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):L("argument-error"),n}},{key:"fromJSON",value:function(e){var n="string"===typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,a=b(n,["providerId","signInMethod"]);if(!r||!i)return null;var o=new t(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),t}(et);function Et(e,t){return St.apply(this,arguments)}function St(){return(St=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:sendVerificationCode",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signInWithPhoneNumber",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nt(){return(Nt=Object(h.a)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t,"POST","/v1/accounts:signInWithPhoneNumber",J(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ue(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ct=Object(y.a)({},"USER_NOT_FOUND","user-not-found");function At(){return(At=Object(h.a)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",re(t,"POST","/v1/accounts:signInWithPhoneNumber",J(t,r),Ct));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Dt=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,"phone","phone"))).params=e,n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Tt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Nt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return At.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,n){return new t({verificationId:e,verificationCode:n})}},{key:"_fromTokenResponse",value:function(e,n){return new t({phoneNumber:e,temporaryProof:n})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var n=e,r=n.verificationId,i=n.verificationCode,a=n.phoneNumber,o=n.temporaryProof;return i||r||a||o?new t({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),t}(et);var Lt=function(){function e(t){var n,r,i,a,u,s;Object(o.a)(this,e);var c=Object(m.z)(Object(m.k)(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);U(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return Object(u.a)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Object(m.z)(Object(m.k)(e)).link,n=t?Object(m.z)(Object(m.k)(t)).deep_link_id:null,r=Object(m.z)(Object(m.k)(e)).deep_link_id;return(r?Object(m.z)(Object(m.k)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Rt=function(){function e(){Object(o.a)(this,e),this.providerId=e.PROVIDER_ID}return Object(u.a)(e,null,[{key:"credential",value:function(e,t){return xt._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Lt.parseLink(t);return U(n,"argument-error"),xt._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Rt.PROVIDER_ID="password",Rt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Pt=function(){function e(t){Object(o.a)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Object(u.a)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Mt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).apply(this,arguments))).scopes=[],e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Object(v.a)(this.scopes)}}]),t}(Pt),Ft=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return U(e.idToken||e.accessToken,"argument-error"),jt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return U("providerId"in t&&"signInMethod"in t,"argument-error"),jt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return t.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken,a=n.oauthTokenSecret,o=n.pendingToken,u=n.nonce,s=n.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new t(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),t}(Mt),Ut=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,"facebook.com"))}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"credential",value:function(e){return jt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(r){return null}}}]),t}(Mt);Ut.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ut.PROVIDER_ID="facebook.com";var Vt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this,"google.com"))).addScope("profile"),e}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"credential",value:function(e,n){return jt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken;if(!r&&!i)return null;try{return t.credential(r,i)}catch(a){return null}}}]),t}(Mt);Vt.GOOGLE_SIGN_IN_METHOD="google.com",Vt.PROVIDER_ID="google.com";var Bt=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,"github.com"))}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"credential",value:function(e){return jt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(r){return null}}}]),t}(Mt);Bt.GITHUB_SIGN_IN_METHOD="github.com",Bt.PROVIDER_ID="github.com";var zt=function(e){function t(e,n){var r;return Object(o.a)(this,t),(r=Object(s.a)(this,Object(l.a)(t).call(this,e,e))).pendingToken=n,r}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_getIdTokenResponse",value:function(e){return _t(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_t(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_t(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var n="string"===typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,a=n.pendingToken;return r&&i&&a&&r===i?new t(r,a):null}},{key:"_create",value:function(e,n){return new t(e,n)}}]),t}(et),qt="saml.",Gt=function(e){function t(e){return Object(o.a)(this,t),U(e.startsWith(qt),"argument-error"),Object(s.a)(this,Object(l.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"credentialFromResult",value:function(e){return t.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=zt.fromJSON(e);return U(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return zt._create(r,n)}catch(i){return null}}}]),t}(Pt),Kt=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,"twitter.com"))}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"credential",value:function(e,n){return jt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthAccessToken,i=n.oauthTokenSecret;if(!r||!i)return null;try{return t.credential(r,i)}catch(a){return null}}}]),t}(Mt);function Wt(e,t){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signUp",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}Kt.TWITTER_SIGN_IN_METHOD="twitter.com",Kt.PROVIDER_ID="twitter.com";var Qt=function(){function e(t){Object(o.a)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Object(u.a)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Object(h.a)(I().mark(function t(n,r,i){var a,o,u,s,c=arguments;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ce._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Yt(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Object(h.a)(I().mark(function t(n,r,i){var a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Yt(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Yt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function $t(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(h.a)(I().mark(function e(t){var n,r,i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ye(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Qt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Wt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Qt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Jt=function(e){function t(e,n,r,i){var a,u;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,n.code,n.message))).operationType=r,a.user=i,Object.setPrototypeOf(Object(d.a)(Object(d.a)(a)),t.prototype),a.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r},a}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"_fromErrorAndOperation",value:function(e,n,r,i){return new t(e,n,r,i)}}]),t}(m.c);function Zt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Jt._fromErrorAndOperation(e,n,t,r);throw n})}function en(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=Object(h.a)(I().mark(function e(t,n){var r,i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.l)(t),e.next=3,on(!0,r,n);case 3:return e.t0=le,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=en(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=Object(h.a)(I().mark(function e(t,n){var r,i,a=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ge,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e,t,n){return un.apply(this,arguments)}function un(){return(un=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(n);case 2:i=en(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",U(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sn(e,t){return cn.apply(this,arguments)}function cn(){return(cn=Object(h.a)(I().mark(function e(t,n){var r,i,a,o,u,s,c=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ge(t,Zt(i,a,n,t),r);case 6:return U((o=e.sent).idToken,i,"internal-error"),U(u=me(o.idToken),i,"internal-error"),s=u.sub,U(t.uid===s,i,"user-mismatch"),e.abrupt("return",Qt._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&L(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}},e,null,[[3,15]])}))).apply(this,arguments)}function ln(e,t){return fn.apply(this,arguments)}function fn(){return(fn=Object(h.a)(I().mark(function e(t,n){var r,i,a,o,u=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Zt(t,i,n);case 4:return a=e.sent,e.next=7,Qt._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hn(e,t){return dn.apply(this,arguments)}function dn(){return(dn=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(Ye(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(e,t){return vn.apply(this,arguments)}function vn(){return(vn=Object(h.a)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.l)(t),e.next=3,on(!1,r,n.providerId);case 3:return e.abrupt("return",rn(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yn(e,t){return mn.apply(this,arguments)}function mn(){return(mn=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(Object(m.l)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re(t,"POST","/v1/accounts:signInWithCustomToken",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(e,t){return wn.apply(this,arguments)}function wn(){return(wn=Object(h.a)(I().mark(function e(t,n){var r,i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ye(t),e.next=3,gn(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Qt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var On=function(){function e(t,n){Object(o.a)(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Object(u.a)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?xn._fromServerResponse(e,t):L(e,"internal-error")}}]),e}(),xn=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,"phone",e))).phoneNumber=e.phoneInfo,n}return Object(f.a)(t,e),Object(u.a)(t,null,[{key:"_fromServerResponse",value:function(e,n){return new t(n)}}]),t}(On);function _n(e,t,n){var r;U((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),U("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(U(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(U(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function In(e,t,n){return jn.apply(this,arguments)}function jn(){return(jn=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.l)(t),a={requestType:"PASSWORD_RESET",email:n},r&&_n(i,a,r),e.next=5,dt(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function En(e,t,n){return Sn.apply(this,arguments)}function Sn(){return(Sn=Object(h.a)(I().mark(function e(t,n,r){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Object(m.l)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tn(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(Object(m.l)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cn(e,t){return An.apply(this,arguments)}function An(){return(An=Object(h.a)(I().mark(function e(t,n){var r,i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.l)(t),e.next=3,tt(r,{oobCode:n});case 3:i=e.sent,U(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return U(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:U(i.mfaInfo,r,"internal-error");case 13:U(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=On._fromServerResponse(Ye(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dn(e,t){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(h.a)(I().mark(function e(t,n){var r,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(Object(m.l)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rn(e,t,n){return Pn.apply(this,arguments)}function Pn(){return(Pn=Object(h.a)(I().mark(function e(t,n,r){var i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ye(t),e.next=3,Wt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Qt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mn(e,t,n){return hn(Object(m.l)(e),Rt.credential(t,n))}function Fn(e,t,n){return Un.apply(this,arguments)}function Un(){return(Un=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.l)(t),a={requestType:"EMAIL_SIGNIN",email:n},U(r.handleCodeInApp,i,"argument-error"),r&&_n(i,a,r),e.next=6,vt(i,a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vn(e,t){var n=Lt.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}function Bn(e,t,n){return zn.apply(this,arguments)}function zn(){return(zn=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.l)(t),U((a=Rt.credentialWithLink(n,r||G()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",hn(i,a));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qn(e,t){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:createAuthUri",J(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kn(e,t){return Wn.apply(this,arguments)}function Wn(){return(Wn=Object(h.a)(I().mark(function e(t,n){var r,i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=K()?G():"http://localhost",i={identifier:n,continueUri:r},e.next=4,qn(Object(m.l)(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hn(e,t){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(h.a)(I().mark(function e(t,n){var r,i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.l)(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&_n(r.auth,a,n),e.next=8,ft(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yn(e,t,n){return $n.apply(this,arguments)}function $n(){return($n=Object(h.a)(I().mark(function e(t,n,r){var i,a,o,u;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.l)(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&_n(i.auth,o,r),e.next=8,mt(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xn(e,t){return Jn.apply(this,arguments)}function Jn(){return(Jn=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return(er=Object(h.a)(I().mark(function e(t,n){var r,i,a,o,u,s,c;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Object(m.l)(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ge(a,Xn(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find(function(e){return"password"===e.providerId}))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tr(e,t){return rr(Object(m.l)(e),t,null)}function nr(e,t){return rr(Object(m.l)(e),null,t)}function rr(e,t,n){return ir.apply(this,arguments)}function ir(){return(ir=Object(h.a)(I().mark(function e(t,n,r){var i,a,o,u;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ge(t,rt(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ar=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},or=function(e){function t(e,n,r,i){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e,n,r))).username=i,a}return Object(f.a)(t,e),t}(ar),ur=function(e){function t(e,n){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,e,"facebook.com",n))}return Object(f.a)(t,e),t}(ar),sr=function(e){function t(e,n){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,e,"github.com",n,"string"===typeof(null===n||void 0===n?void 0:n.login)?null===n||void 0===n?void 0:n.login:null))}return Object(f.a)(t,e),t}(or),cr=function(e){function t(e,n){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,e,"google.com",n))}return Object(f.a)(t,e),t}(ar),lr=function(e){function t(e,n,r){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,e,"twitter.com",n,r))}return Object(f.a)(t,e),t}(or);function fr(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=me(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ar(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ur(a,i);case"github.com":return new sr(a,i);case"google.com":return new cr(a,i);case"twitter.com":return new lr(a,i,e.screenName||null);case"custom":case"anonymous":return new ar(a,null);default:return new ar(a,r,i)}}(n)}var hr=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.credential=n}return Object(u.a)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:Object(y.a)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),dr=function(){function e(t,n,r){Object(o.a)(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Object(u.a)(e,[{key:"resolveSignIn",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ye(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(function(e){return On._fromServerResponse(r,e)});U(i.mfaPendingCredential,r,"internal-error");var o=hr._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Object(h.a)(I().mark(function e(t){var a,u,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Qt._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return U(n.user,r,"internal-error"),e.abrupt("return",Qt._forOperation(n.user,n.operationType,u));case 17:L(r,"internal-error");case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}]),e}();function pr(e,t){var n,r=Object(m.l)(e),i=t;return U(t.customData.operationType,r,"argument-error"),U(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),dr._fromError(r,i)}function vr(e,t){return Z(e,"POST","/v2/accounts/mfaEnrollment:start",J(e,t))}var yr=function(){function e(t){var n=this;Object(o.a)(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return On._fromServerResponse(t.auth,e)}))})}return Object(u.a)(e,[{key:"getSession",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hr,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Object(h.a)(I().mark(function e(t,n){var r,i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ge(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ge(this.user,Z(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",J(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter(function(e){return e.uid!==n}),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a},e,this,[[10,15]])}));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),mr=new WeakMap;function gr(e){var t=Object(m.l)(e);return mr.has(t)||mr.set(t,yr._fromUser(t)),mr.get(t)}var br=function(){function e(t,n){Object(o.a)(this,e),this.storageRetriever=t,this.type=n}return Object(u.a)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var kr=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this,function(){return window.localStorage},"LOCAL"))).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Object(m.m)();return Fe(e)||Ge(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ke(),e._shouldAllowMigration=!0,e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Object(m.r)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Object(h.a)(I().mark(function e(n,r){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(Object(l.a)(t.prototype),"_set",this).call(this,n,r);case 2:this.localCache[n]=JSON.stringify(r);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(h.a)(I().mark(function e(n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(Object(l.a)(t.prototype),"_get",this).call(this,n);case 2:return r=e.sent,this.localCache[n]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(h.a)(I().mark(function e(n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(Object(l.a)(t.prototype),"_remove",this).call(this,n);case 2:delete this.localCache[n];case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(br);kr.type="LOCAL";var wr=kr,Or=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,function(){return window.sessionStorage},"SESSION"))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}(br);Or.type="SESSION";var xr=Or;function _r(e){return Promise.all(e.map(function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()))}var Ir=function(){function e(t){Object(o.a)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Object(u.a)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r,i,a,o,u,s,c;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,_r(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function jr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ir.receivers=[];var Er=function(){function e(t){Object(o.a)(this,e),this.target=t,this.handlers=new Set}return Object(u.a)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Object(h.a)(I().mark(function e(t,n){var r,i,a,o,u=this,s=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise(function(e,s){var c=jr("",20);i.port1.start();var l=setTimeout(function(){s(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout(function(){s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(function(){o&&u.removeMessageHandler(o)}));case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Sr(){return window}function Tr(){return"undefined"!==typeof Sr().WorkerGlobalScope&&"function"===typeof Sr().importScripts}function Nr(){return Cr.apply(this,arguments)}function Cr(){return(Cr=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))).apply(this,arguments)}function Ar(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Dr="firebaseLocalStorageDb",Lr=1,Rr="firebaseLocalStorage",Pr="fbase_key",Mr=function(){function e(t){Object(o.a)(this,e),this.request=t}return Object(u.a)(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function Fr(e,t){return e.transaction([Rr],t?"readwrite":"readonly").objectStore(Rr)}function Ur(){var e=indexedDB.deleteDatabase(Dr);return new Mr(e).toPromise()}function Vr(){var e=indexedDB.open(Dr,Lr);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore(Rr,{keyPath:Pr})}catch(r){n(r)}}),e.addEventListener("success",Object(h.a)(I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Rr)){n.next=12;break}return r.close(),n.next=5,Ur();case 5:return n.t0=t,n.next=8,Vr();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}},n)})))})}function Br(e,t,n){return zr.apply(this,arguments)}function zr(){return(zr=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fr(t,!0).put((i={},Object(y.a)(i,Pr,n),Object(y.a)(i,"value",r),i)),e.abrupt("return",new Mr(a).toPromise());case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qr(e,t){return Gr.apply(this,arguments)}function Gr(){return(Gr=Object(h.a)(I().mark(function e(t,n){var r,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fr(t,!1).get(n),e.next=3,new Mr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kr(e,t){var n=Fr(e,!0).delete(t);return new Mr(n).toPromise()}var Wr=function(){function e(){Object(o.a)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return Object(u.a)(e,[{key:"_openDb",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Vr();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tr()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Object(h.a)(I().mark(function e(){var t=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ir._getInstance(Tr()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Object(h.a)(I().mark(function e(n,r){var i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Object(h.a)(I().mark(function e(){var t,n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nr();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Er(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ar()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}},e,this,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Vr();case 5:return t=e.sent,e.next=8,Br(t,"__sak","1");case 8:return e.next=10,Kr(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}},e,this,[[1,,4,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Object(h.a)(I().mark(function e(t,n){var r=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries(function(e){return Br(e,t,n)});case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries(function(e){return qr(e,t)});case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(h.a)(I().mark(function e(t){var n=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries(function(e){return Kr(e,t)});case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Object(h.a)(I().mark(function e(){var t,n,r,i,a,o,u,s,c,l,f;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries(function(e){var t=Fr(e,!1).getAll();return new Mr(t).toPromise()});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=x(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Object(h.a)(I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Wr.type="LOCAL";var Hr=Wr;function Qr(e,t){return Z(e,"POST","/v2/accounts/mfaSignIn:start",J(e,t))}function Yr(e){return $r.apply(this,arguments)}function $r(){return($r=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xr(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=R("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Jr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Zr=1e12,ei=function(){function e(t){Object(o.a)(this,e),this.auth=t,this.counter=Zr,this._widgets=new Map}return Object(u.a)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ti(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Zr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Zr;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Zr,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ti=function(){function e(t,n,r){var i=this;Object(o.a)(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;U(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Object(u.a)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ni=Jr("rcb"),ri=new H(3e4,6e4),ii=function(){function e(){Object(o.a)(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Sr().grecaptcha}return Object(u.a)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return U(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Sr().grecaptcha):new Promise(function(r,i){var a=Sr().setTimeout(function(){i(R(e,"network-request-failed"))},ri.get());Sr()[ni]=function(){Sr().clearTimeout(a),delete Sr()[ni];var o=Sr().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(R(e,"internal-error"))},Xr("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Object(m.y)({onload:ni,render:"explicit",hl:n}))).catch(function(){clearTimeout(a),i(R(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Sr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var ai=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,[{key:"load",value:function(){var e=Object(h.a)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ei(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),oi="recaptcha",ui={theme:"light",type:"image"},si=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ui),r=arguments.length>2?arguments[2]:void 0;Object(o.a)(this,e),this.parameters=n,this.type=oi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(r),this.isInvisible="invisible"===this.parameters.size,U("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;U(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ai:new ii,this.validateStartingState()}return Object(u.a)(e,[{key:"verify",value:function(){var e=Object(h.a)(I().mark(function e(){var t,n,r,i=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise(function(e){i.tokenChangeListeners.add(function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))}),i.isInvisible&&n.execute(t)}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t}),this.renderPromise)}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"===typeof e)e(n);else if("string"===typeof e){var r=Sr()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){U(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Object(h.a)(I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U(K()&&!Tr(),this.auth,"internal-error"),e.next=3,ci();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Yr(this.auth);case 8:U(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ci(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}var li=function(){function e(t,n){Object(o.a)(this,e),this.verificationId=t,this.onConfirmation=n}return Object(u.a)(e,[{key:"confirm",value:function(e){var t=Dt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function fi(e,t,n){return hi.apply(this,arguments)}function hi(){return(hi=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ye(t),e.next=3,mi(i,n,Object(m.l)(r));case 3:return a=e.sent,e.abrupt("return",new li(a,function(e){return hn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function di(e,t,n){return pi.apply(this,arguments)}function pi(){return(pi=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.l)(t),e.next=3,on(!1,i,"phone");case 3:return e.next=5,mi(i.auth,n,Object(m.l)(r));case 5:return a=e.sent,e.abrupt("return",new li(a,function(e){return pn(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vi(e,t,n){return yi.apply(this,arguments)}function yi(){return(yi=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.l)(t),e.next=3,mi(i.auth,n,Object(m.l)(r));case 3:return a=e.sent,e.abrupt("return",new li(a,function(e){return yn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mi(e,t,n){return gi.apply(this,arguments)}function gi(){return(gi=Object(h.a)(I().mark(function e(t,n,r){var i,a,o,u,s,c,l,f,h;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,U("string"===typeof a,t,"argument-error"),U(r.type===oi,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return U("enroll"===u.type,t,"internal-error"),e.next=13,vr(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return U("signin"===u.type,t,"internal-error"),U(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qr(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Et(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}},e,null,[[3,,31,34]])}))).apply(this,arguments)}function bi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(Object(m.l)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var wi=function(){function e(t){Object(o.a)(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ye(t)}return Object(u.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return mi(this.auth,e,Object(m.l)(t))}}],[{key:"credential",value:function(e,t){return Dt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Dt._fromTokenResponse(n,r):null}}]),e}();function Oi(e,t){return t?q(t):(U(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wi.PROVIDER_ID="phone",wi.PHONE_SIGN_IN_METHOD="phone";var xi=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,"custom","custom"))).params=e,n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_getIdTokenResponse",value:function(e){return _t(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _t(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _t(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),t}(et);function _i(e){return ln(e.auth,new xi(e),e.bypassAuthState)}function Ii(e){var t=e.auth,n=e.user;return U(n,t,"internal-error"),sn(n,new xi(e),e.bypassAuthState)}function ji(e){return Ei.apply(this,arguments)}function Ei(){return(Ei=Object(h.a)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,U(r=t.user,n,"internal-error"),e.abrupt("return",rn(r,new xi(t),t.bypassAuthState));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Si=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(o.a)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Object(u.a)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Object(h.a)(I().mark(function t(n,r){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r,i,a,o,u,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _i;case"linkViaPopup":case"linkViaRedirect":return ji;case"reauthViaPopup":case"reauthViaRedirect":return Ii;default:L(this.auth,"internal-error")}}},{key:"resolve",value:function(e){B(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){B(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ti=new H(2e3,1e4);function Ni(e,t,n){return Ci.apply(this,arguments)}function Ci(){return(Ci=Object(h.a)(I().mark(function e(t,n,r){var i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ye(t),M(t,n,Pt),a=Oi(i,r),o=new Pi(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ai(e,t,n){return Di.apply(this,arguments)}function Di(){return(Di=Object(h.a)(I().mark(function e(t,n,r){var i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M((i=Object(m.l)(t)).auth,n,Pt),a=Oi(i.auth,r),o=new Pi(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Li(e,t,n){return Ri.apply(this,arguments)}function Ri(){return(Ri=Object(h.a)(I().mark(function e(t,n,r){var i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M((i=Object(m.l)(t)).auth,n,Pt),a=Oi(i.auth,r),o=new Pi(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Pi=function(e){function t(e,n,r,i,a){var u;return Object(o.a)(this,t),(u=Object(s.a)(this,Object(l.a)(t).call(this,e,n,i,a))).provider=r,u.authWindow=null,u.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=Object(d.a)(Object(d.a)(u)),u}return Object(f.a)(t,e),Object(u.a)(t,[{key:"executeNotNull",value:function(){var e=Object(h.a)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return U(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Object(h.a)(I().mark(function e(){var t,n=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B(1===this.filter.length,"Popup operations only handle one event"),t=jr(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(function(e){n.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,function(e){e||n.reject(R(n.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){this.reject(R(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;null!==(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)&&void 0!==r&&r.closed?e.pollId=window.setTimeout(function(){e.pollId=null,e.reject(R(e.auth,"popup-closed-by-user"))},2e3):e.pollId=window.setTimeout(t,Ti.get())}()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}}]),t}(Si);Pi.currentPopupAction=null;var Mi="pendingRedirect",Fi=new Map,Ui=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(o.a)(this,t),(r=Object(s.a)(this,Object(l.a)(t).call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i))).eventId=null,r}return Object(f.a)(t,e),Object(u.a)(t,[{key:"execute",value:function(){var e=Object(h.a)(I().mark(function e(){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Fi.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vi(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Object(c.a)(Object(l.a)(t.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,n=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n=function(){return Promise.reject(e.t1)};case 20:Fi.set(this.auth._key(),n);case 21:return this.bypassAuthState||Fi.set(this.auth._key(),function(){return Promise.resolve(null)}),e.abrupt("return",n());case 23:case"end":return e.stop()}},e,this,[[2,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Object(h.a)(I().mark(function e(n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==n.type){e.next=4;break}return e.abrupt("return",Object(c.a)(Object(l.a)(t.prototype),"onAuthEvent",this).call(this,n));case 4:if("unknown"!==n.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!n.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(n.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Object(c.a)(Object(l.a)(t.prototype),"onAuthEvent",this).call(this,n));case 16:this.resolve(null);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Object(h.a)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),t}(Si);function Vi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=Object(h.a)(I().mark(function e(t,n){var r,i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wi(n),i=Ki(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ki(t)._set(Wi(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gi(e,t){Fi.set(e._key(),t)}function Ki(e){return q(e._redirectPersistence)}function Wi(e){return Le(Mi,e.config.apiKey,e.name)}function Hi(e,t,n){return function(e,t,n){return Qi.apply(this,arguments)}(e,t,n)}function Qi(){return(Qi=Object(h.a)(I().mark(function e(t,n,r){var i,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ye(t),M(t,n,Pt),a=Oi(i,r),e.next=5,zi(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yi(e,t,n){return function(e,t,n){return $i.apply(this,arguments)}(e,t,n)}function $i(){return($i=Object(h.a)(I().mark(function e(t,n,r){var i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M((i=Object(m.l)(t)).auth,n,Pt),a=Oi(i.auth,r),e.next=5,zi(a,i.auth);case 5:return e.next=7,ra(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xi(e,t,n){return function(e,t,n){return Ji.apply(this,arguments)}(e,t,n)}function Ji(){return(Ji=Object(h.a)(I().mark(function e(t,n,r){var i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M((i=Object(m.l)(t)).auth,n,Pt),a=Oi(i.auth,r),e.next=5,on(!1,i,n.providerId);case 5:return e.next=7,zi(a,i.auth);case 7:return e.next=9,ra(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return(ea=Object(h.a)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(t)._initializationPromise;case 2:return e.abrupt("return",ta(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return(na=Object(h.a)(I().mark(function e(t,n){var r,i,a,o,u,s=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ye(t),a=Oi(i,n),o=new Ui(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ra(e){return ia.apply(this,arguments)}function ia(){return(ia=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=jr("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var aa=function(){function e(t){Object(o.a)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Object(u.a)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ua(e);default:return!1}}(e)?n:(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0),n)}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ua(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(R(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oa(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(oa(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function oa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function ua(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function sa(e){return ca.apply(this,arguments)}function ca(){return(ca=Object(h.a)(I().mark(function e(t){var n,r=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Z(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var la=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fa=/^https?/;function ha(){return(ha=Object(h.a)(I().mark(function e(t){var n,r,i,a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,sa(t);case 4:n=e.sent,r=n.authorizedDomains,i=x(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!da(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:L(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function da(e){var t=G(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!fa.test(r))return!1;if(la.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var pa=new H(3e4,6e4);function va(){var e=Sr().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Object(v.a)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ya=null;function ma(e){return ya=ya||function(e){return new Promise(function(t,n){var r,i,a;function o(){va(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){va(),n(R(e,"network-request-failed"))},timeout:pa.get()})}if(null===(i=null===(r=Sr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(null===(a=Sr().gapi)||void 0===a||!a.load){var u=Jr("iframefcb");return Sr()[u]=function(){gapi.load?o():n(R(e,"network-request-failed"))},Xr("https://apis.google.com/js/api.js?onload=".concat(u)).catch(function(e){return n(e)})}o()}}).catch(function(e){throw ya=null,e})}(e)}var ga=new H(5e3,15e3),ba="__/auth/iframe",ka="emulator/auth/iframe",wa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xa(e){var t=e.config;U(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Q(t,ka):"https://".concat(e.config.authDomain,"/").concat(ba),r={apiKey:t.apiKey,appName:e.name,v:g.SDK_VERSION},i=Oa.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Object(m.y)(r).slice(1))}function _a(e){return Ia.apply(this,arguments)}function Ia(){return(Ia=Object(h.a)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(t);case 2:return n=e.sent,U(r=Sr().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:xa(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wa,dontclear:!0},function(e){return new Promise(function(){var n=Object(h.a)(I().mark(function n(r,i){var a,o,u;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Sr().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=R(t,"network-request-failed"),o=Sr().setTimeout(function(){i(a)},ga.get()),e.ping(u).then(u,function(){i(a)});case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ja={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ea=500,Sa=600,Ta="_blank",Na="http://localhost",Ca=function(){function e(t){Object(o.a)(this,e),this.window=t,this.associatedEvent=null}return Object(u.a)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Aa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ea,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sa,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ja),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Object(m.m)().toLowerCase();n&&(u=Ue(c)?Ta:n),Me(c)&&(t=t||Na,s.scrollbars="yes");var l=Object.entries(s).reduce(function(e,t){var n=Object(p.a)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")},"");if(function(){var e;return Ge(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Ca(null);var f=window.open(t||"",u,l);U(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Ca(f)}var Da="__/auth/handler",La="emulator/auth/handler";function Ra(e,t,n,r,i,a){U(e.config.authDomain,e,"auth-domain-config-required"),U(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:g.SDK_VERSION,eventId:i};if(t instanceof Pt){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Object(m.q)(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=Object(p.a)(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Mt){var h=t.getScopes().filter(function(e){return""!==e});h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,v=0,y=Object.keys(d);v<y.length;v++){var b=y[v];void 0===d[b]&&delete d[b]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Da);return Q(t,La)}(e),"?").concat(Object(m.y)(d).slice(1))}var Pa=function(){function e(){Object(o.a)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xr,this._completeRedirectFn=ta,this._overrideRedirectResult=Gi}return Object(u.a)(e,[{key:"_openPopup",value:function(){var e=Object(h.a)(I().mark(function e(t,n,r,i){var a,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ra(t,n,r,G(),i),e.abrupt("return",Aa(t,o,jr()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Object(h.a)(I().mark(function e(t,n,r,i){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ra(t,n,r,G(),i),Sr().location.href=a,e.abrupt("return",new Promise(function(){}));case 4:case"end":return e.stop()}var a},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(B(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(function(){delete t.eventManagers[n]}),o}},{key:"initAndGetManager",value:function(){var e=Object(h.a)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t);case 2:return n=e.sent,r=new aa(t),n.register("authEvent",function(e){return U(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),L(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ha.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ke()||Fe()||Ge()}}]),e}(),Ma=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,"phone"))).credential=e,n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Z(e,"POST","/v2/accounts/mfaEnrollment:finalize",J(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Z(e,"POST","/v2/accounts/mfaSignIn:finalize",J(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new t(e)}}]),t}(function(){function e(t){Object(o.a)(this,e),this.factorId=t}return Object(u.a)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return V("unexpected MultiFactorSessionType")}}}]),e}()),Fa=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"assertion",value:function(e){return Ma._fromCredential(e)}}]),e}();Fa.FACTOR_ID="phone";var Ua,Va="@firebase/auth",Ba="0.20.2",za=function(){function e(t){Object(o.a)(this,e),this.auth=t,this.internalListeners=new Map}return Object(u.a)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Object(h.a)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function qa(){qa=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=k(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(_([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){l.value=e,o(l)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(m),u(m,o,"Generator"),u(m,i,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Ga(){return window}Ua="Browser",Object(g._registerComponent)(new O.a("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){U(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),U(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Ua,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:We(Ua)},i=new Qe(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(q);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),Object(g._registerComponent)(new O.a("auth-internal",function(e){return function(e){return new za(e)}(Ye(e.getProvider("auth").getImmediate()))},"PRIVATE").setInstantiationMode("EXPLICIT")),Object(g.registerVersion)(Va,Ba,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ua)),Object(g.registerVersion)(Va,Ba,"esm2017"),n.d(t,"x",function(){return yo}),n.d(t,"F",function(){return po}),n.d(t,"a",function(){return E}),n.d(t,"b",function(){return et}),n.d(t,"c",function(){return Rt}),n.d(t,"d",function(){return Ut}),n.d(t,"e",function(){return Bt}),n.d(t,"f",function(){return Vt}),n.d(t,"g",function(){return jt}),n.d(t,"h",function(){return Ft}),n.d(t,"i",function(){return wi}),n.d(t,"j",function(){return Fa}),n.d(t,"k",function(){return j}),n.d(t,"l",function(){return si}),n.d(t,"m",function(){return zt}),n.d(t,"n",function(){return Gt}),n.d(t,"o",function(){return Kt}),n.d(t,"p",function(){return U}),n.d(t,"q",function(){return Ye}),n.d(t,"r",function(){return L}),n.d(t,"s",function(){return jr}),n.d(t,"t",function(){return q}),n.d(t,"u",function(){return ta}),n.d(t,"v",function(){return Gi}),n.d(t,"w",function(){return Le}),n.d(t,"y",function(){return Tn}),n.d(t,"z",function(){return wr}),n.d(t,"A",function(){return Pa}),n.d(t,"B",function(){return xr}),n.d(t,"C",function(){return Cn}),n.d(t,"D",function(){return En}),n.d(t,"E",function(){return Xe}),n.d(t,"G",function(){return Rn}),n.d(t,"H",function(){return T}),n.d(t,"I",function(){return Kn}),n.d(t,"J",function(){return fr}),n.d(t,"K",function(){return pr}),n.d(t,"L",function(){return Zi}),n.d(t,"M",function(){return De}),n.d(t,"N",function(){return Hr}),n.d(t,"O",function(){return Vn}),n.d(t,"P",function(){return pn}),n.d(t,"Q",function(){return di}),n.d(t,"R",function(){return Li}),n.d(t,"S",function(){return Xi}),n.d(t,"T",function(){return gr}),n.d(t,"U",function(){return yn}),n.d(t,"V",function(){return vi}),n.d(t,"W",function(){return Ai}),n.d(t,"X",function(){return Yi}),n.d(t,"Y",function(){return Hn}),n.d(t,"Z",function(){return In}),n.d(t,"ab",function(){return Fn}),n.d(t,"bb",function(){return $t}),n.d(t,"cb",function(){return hn}),n.d(t,"db",function(){return kn}),n.d(t,"eb",function(){return Mn}),n.d(t,"fb",function(){return Bn}),n.d(t,"gb",function(){return fi}),n.d(t,"hb",function(){return Ni}),n.d(t,"ib",function(){return Hi}),n.d(t,"jb",function(){return tn}),n.d(t,"kb",function(){return tr}),n.d(t,"lb",function(){return nr}),n.d(t,"mb",function(){return bi}),n.d(t,"nb",function(){return Zn}),n.d(t,"ob",function(){return Yn}),n.d(t,"pb",function(){return Dn});var Ka=2e3;function Wa(e,t,n){return Ha.apply(this,arguments)}function Ha(){return(Ha=Object(h.a)(qa().mark(function e(t,n,r){var i,a,o,u,s;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ga(),o=a.BuildInfo,B(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Za(n.sessionId);case 4:return u=e.sent,s={},Ge()?s.ibi=o.packageName:Be()?s.apn=o.packageName:L(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ra(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qa(){return(Qa=Object(h.a)(qa().mark(function e(t){var n,r,i;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ga(),r=n.BuildInfo,i={},Ge()?i.iosBundleId=r.packageName:Be()?i.androidPackageName=r.packageName:L(t,"operation-not-supported-in-this-environment"),e.next=5,sa(t,i);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ya(e){var t=Ga().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.m)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}function $a(e,t,n){return Xa.apply(this,arguments)}function Xa(){return(Xa=Object(h.a)(qa().mark(function e(t,n,r){var i,a,o;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ga(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout(function(){i(R(t,"redirect-cancelled-by-user"))},Ka))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Be()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function Ja(e){var t,n,r,i,a,o,u,s,c,l,f=Ga();U("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Za(e){return eo.apply(this,arguments)}function eo(){return(eo=Object(h.a)(qa().mark(function e(t){var n,r,i;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=to(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function to(e){if(B(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var no=20,ro=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).apply(this,arguments))).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),Object(c.a)(Object(l.a)(t.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Object(h.a)(qa().mark(function e(){return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(aa);function io(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:co(),postBody:null,tenantId:e.tenantId,error:R(e,"no-auth-event")}}function ao(e,t){return lo()._set(fo(e),t)}function oo(e){return uo.apply(this,arguments)}function uo(){return(uo=Object(h.a)(qa().mark(function e(t){var n;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lo()._get(fo(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,lo()._remove(fo(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function so(e,t){var n,r,i=function(e){var t=ho(e),n=t.link?decodeURIComponent(t.link):void 0,r=ho(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ho(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ho(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?R(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function co(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<no;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function lo(){return q(wr)}function fo(e){return Le("authEvent",e.config.apiKey,e.name)}function ho(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),o=(t=n,Object(r.a)(t)||Object(i.a)(t)||Object(a.a)()),u=(o[0],o.slice(1));return Object(m.z)(u.join("?"))}var po=function(){function e(){Object(o.a)(this,e),this._redirectPersistence=xr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ta,this._overrideRedirectResult=Gi}return Object(u.a)(e,[{key:"_initialize",value:function(){var e=Object(h.a)(qa().mark(function e(t){var n,r;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ro(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){L(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Object(h.a)(qa().mark(function e(t,n,r,i){var a,o,u,s;return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ja(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Fi.clear(),e.next=10,this._originValidation(t);case 10:return o=io(t,r,i),e.next=13,ao(t,o);case 13:return e.next=15,Wa(t,o,n);case 15:return u=e.sent,e.next=18,Ya(u);case 18:return s=e.sent,e.abrupt("return",$a(t,a,s));case 20:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Qa.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ga(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Object(h.a)(qa().mark(function n(){return qa().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oo(e);case 2:t.onEvent(vo());case 3:case"end":return n.stop()}},n)})),500),u=function(){var n=Object(h.a)(qa().mark(function n(r){var i,a;return qa().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,oo(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=so(i,r.url)),t.onEvent(a||vo());case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Ga().handleOpenURL=function(){var e=Object(h.a)(qa().mark(function e(t){return qa().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}]),e}();function vo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:R("no-auth-event")}}function yo(e,t){Ye(e)._logFramework(t)}},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return nf}),n.d(t,"b",function(){return Xc}),n.d(t,"c",function(){return Rc}),n.d(t,"d",function(){return _c}),n.d(t,"e",function(){return Nl}),n.d(t,"f",function(){return $c}),n.d(t,"g",function(){return P}),n.d(t,"h",function(){return Zc}),n.d(t,"i",function(){return Cl}),n.d(t,"j",function(){return Al}),n.d(t,"k",function(){return J}),n.d(t,"l",function(){return of}),n.d(t,"m",function(){return me}),n.d(t,"n",function(){return we}),n.d(t,"o",function(){return oe}),n.d(t,"p",function(){return bc}),n.d(t,"q",function(){return D}),n.d(t,"r",function(){return se}),n.d(t,"s",function(){return T}),n.d(t,"t",function(){return vc}),n.d(t,"u",function(){return gf}),n.d(t,"v",function(){return Sf}),n.d(t,"w",function(){return Ef}),n.d(t,"x",function(){return qc}),n.d(t,"y",function(){return Ec}),n.d(t,"z",function(){return Sc}),n.d(t,"A",function(){return xc}),n.d(t,"B",function(){return mf}),n.d(t,"C",function(){return If}),n.d(t,"D",function(){return Wc}),n.d(t,"E",function(){return Tc}),n.d(t,"F",function(){return Vc}),n.d(t,"G",function(){return Bc}),n.d(t,"H",function(){return Kc}),n.d(t,"I",function(){return $l}),n.d(t,"J",function(){return Yl}),n.d(t,"K",function(){return Fc}),n.d(t,"L",function(){return wf}),n.d(t,"M",function(){return sf}),n.d(t,"N",function(){return lf}),n.d(t,"O",function(){return ff}),n.d(t,"P",function(){return hf}),n.d(t,"Q",function(){return df}),n.d(t,"R",function(){return pf}),n.d(t,"S",function(){return Mc}),n.d(t,"T",function(){return Tf}),n.d(t,"U",function(){return ql}),n.d(t,"V",function(){return Gl}),n.d(t,"W",function(){return Hc}),n.d(t,"X",function(){return Qc}),n.d(t,"Y",function(){return bf}),n.d(t,"Z",function(){return kf}),n.d(t,"ab",function(){return Bl}),n.d(t,"bb",function(){return Ml}),n.d(t,"cb",function(){return Cc}),n.d(t,"db",function(){return Nc}),n.d(t,"eb",function(){return _f}),n.d(t,"fb",function(){return jf}),n.d(t,"gb",function(){return vf}),n.d(t,"hb",function(){return j}),n.d(t,"ib",function(){return Ll}),n.d(t,"jb",function(){return Hl}),n.d(t,"kb",function(){return Wl}),n.d(t,"lb",function(){return yf}),n.d(t,"mb",function(){return Gc}),n.d(t,"nb",function(){return Ul});var r=n(21),i=n(14),a=n(12),o=n(0),u=n(10),s=n(7),c=n(9),l=n(13),f=n(1),h=n(2),d=n(11),p=n(15),v=n(16),y=n(4),m=n(17);function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){l.value=e,o(l)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(m),u(m,o,"Generator"),u(m,i,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}var w="@firebase/firestore",O=function(){function e(t){Object(f.a)(this,e),this.uid=t}return Object(h.a)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();O.UNAUTHENTICATED=new O(null),O.GOOGLE_CREDENTIALS=new O("google-credentials-uid"),O.FIRST_PARTY=new O("first-party-uid"),O.MOCK_USER=new O("mock-user");var x="9.8.0",_=new v.b("@firebase/firestore");function I(){return _.logLevel}function j(e){_.setLogLevel(e)}function E(e){if(_.logLevel<=v.a.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(N);_.debug.apply(_,["Firestore (".concat(x,"): ").concat(e)].concat(Object(l.a)(i)))}}function S(e){if(_.logLevel<=v.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(N);_.error.apply(_,["Firestore (".concat(x,"): ").concat(e)].concat(Object(l.a)(i)))}}function T(e){if(_.logLevel<=v.a.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(N);_.warn.apply(_,["Firestore (".concat(x,"): ").concat(e)].concat(Object(l.a)(i)))}}function N(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(x,") INTERNAL ASSERTION FAILED: ")+e;throw S(t),new Error(t)}function A(e,t){e||C()}function D(e,t){e||C()}function L(e,t){return e}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,n))).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return Object(c.a)(t,e),t}(y.c),M=function e(){var t=this;Object(f.a)(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},F=function e(t,n){Object(f.a)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},U=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(O.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),V=function(){function e(t){Object(f.a)(this,e),this.token=t,this.changeListener=null}return Object(h.a)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),B=function(){function e(t){Object(f.a)(this,e),this.t=t,this.currentUser=O.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Object(h.a)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new M;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new M,e.enqueueRetryable(function(){return i(n.currentUser)})};var u=function(){var t=a;e.enqueueRetryable(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}},e)})))},s=function(e){E("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit(function(e){return s(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new M)}},0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(A("string"==typeof n.accessToken),new F(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return A(null===e||"string"==typeof e),new O(e)}}]),e}(),z=function e(t,n,r){Object(f.a)(this,e),this.type="FirstParty",this.user=O.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)},q=function(){function e(t,n,r){Object(f.a)(this,e),this.h=t,this.l=n,this.m=r}return Object(h.a)(e,[{key:"getToken",value:function(){return Promise.resolve(new z(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(O.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),G=function e(t){Object(f.a)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},K=function(){function e(t){Object(f.a)(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Object(h.a)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&E("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,E("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){E("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(A("string"==typeof t.token),e.p=t.token,new G(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),W=function(){function e(t,n){var r=this;Object(f.a)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Object(h.a)(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function H(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}W.A=-1;var Q=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=H(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Y(e,t){return e<t?-1:e>t?1:0}function $(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function X(e){return e+"\0"}var J=function(){function e(t,n){if(Object(f.a)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Object(h.a)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Z=function(){function e(t){Object(f.a)(this,e),this.timestamp=t}return Object(h.a)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new J(0,0))}},{key:"max",value:function(){return new e(new J(253402300799,999999999))}}]),e}();function ee(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function te(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ne(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var re=function(){function e(t,n,r){Object(f.a)(this,e),void 0===n?n=0:n>t.length&&C(),void 0===r?r=t.length-n:r>t.length-n&&C(),this.segments=t,this.offset=n,this.len=r}return Object(h.a)(e,[{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}},{key:"length",get:function(){return this.len}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ie=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Object(l.a)(u.split("/").filter(function(e){return e.length>0})))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}]),t}(re),ae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oe=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ae.test(e)}},{key:"keyField",value:function(){return new t(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new P(R.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}]),t}(re),ue=function(){function e(t){Object(f.a)(this,e),this.fields=t,t.sort(oe.comparator)}return Object(h.a)(e,[{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return $(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}();function se(){return"undefined"!=typeof atob}var ce=function(){function e(t){Object(f.a)(this,e),this.binaryString=t}return Object(h.a)(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Y(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();ce.EMPTY_BYTE_STRING=new ce("");var le=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fe(e){if(A(!!e),"string"==typeof e){var t=0,n=le.exec(e);if(A(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:he(e.seconds),nanos:he(e.nanos)}}function he(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function de(e){return"string"==typeof e?ce.fromBase64String(e):ce.fromUint8Array(e)}function pe(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ve(e){var t=fe(e.mapValue.fields.__local_write_time__.timestampValue);return new J(t.seconds,t.nanos)}var ye=function e(t,n,r,i,a,o,u,s){Object(f.a)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},me=function(){function e(t,n){Object(f.a)(this,e),this.projectId=t,this.database=n||"(default)"}return Object(h.a)(e,[{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ge(e){return null==e}function be(e){return 0===e&&1/e==-1/0}function ke(e){return"number"==typeof e&&Number.isInteger(e)&&!be(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var we=function(){function e(t){Object(f.a)(this,e),this.path=t}return Object(h.a)(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ie.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}},{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}}],[{key:"fromPath",value:function(t){return new e(ie.fromString(t))}},{key:"fromName",value:function(t){return new e(ie.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ie.emptyPath())}},{key:"comparator",value:function(e,t){return ie.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ie(t.slice()))}}]),e}(),Oe={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xe={nullValue:"NULL_VALUE"};function _e(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pe(e)?4:Me(e)?9007199254740991:10:C()}function Ie(e,t){if(e===t)return!0;var n=_e(e);if(n!==_e(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ve(e).isEqual(ve(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=fe(e.timestampValue),r=fe(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return de(e.bytesValue).isEqual(de(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return he(e.geoPointValue.latitude)===he(t.geoPointValue.latitude)&&he(e.geoPointValue.longitude)===he(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return he(e.integerValue)===he(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=he(e.doubleValue),r=he(t.doubleValue);return n===r?be(n)===be(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $(e.arrayValue.values||[],t.arrayValue.values||[],Ie);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ee(n)!==ee(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ie(n[i],r[i])))return!1;return!0}(e,t);default:return C()}}function je(e,t){return void 0!==(e.values||[]).find(function(e){return Ie(e,t)})}function Ee(e,t){if(e===t)return 0;var n=_e(e),r=_e(t);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=he(e.integerValue||e.doubleValue),r=he(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Se(e.timestampValue,t.timestampValue);case 4:return Se(ve(e),ve(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){var n=de(e),r=de(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Y(n[i],r[i]);if(0!==a)return a}return Y(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Y(he(e.latitude),he(t.latitude));return 0!==n?n:Y(he(e.longitude),he(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ee(n[i],r[i]);if(a)return a}return Y(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Oe.mapValue&&t===Oe.mapValue)return 0;if(e===Oe.mapValue)return 1;if(t===Oe.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Y(r[o],a[o]);if(0!==u)return u;var s=Ee(n[r[o]],i[a[o]]);if(0!==s)return s}return Y(r.length,a.length)}(e.mapValue,t.mapValue);default:throw C()}}function Se(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Y(e,t);var n=fe(e),r=fe(t),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function Te(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=fe(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?de(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,we.fromName(r).toString()):"geoPointValue"in t?"geo(".concat((n=t.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in t?function(t){var n,r="[",i=!0,a=g(t.values||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;i?i=!1:r+=",",r+=e(o)}}catch(u){a.e(u)}finally{a.f()}return r+"]"}(t.arrayValue):"mapValue"in t?function(t){var n,r=Object.keys(t.fields||{}).sort(),i="{",a=!0,o=g(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;a?a=!1:i+=",",i+="".concat(u,":").concat(e(t.fields[u]))}}catch(s){o.e(s)}finally{o.f()}return i+"}"}(t.mapValue):C();var n,r}(e)}function Ne(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ce(e){return!!e&&"integerValue"in e}function Ae(e){return!!e&&"arrayValue"in e}function De(e){return!!e&&"nullValue"in e}function Le(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Re(e){return!!e&&"mapValue"in e}function Pe(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return te(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=Pe(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pe(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Me(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fe(e){return"nullValue"in e?xe:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ne(me.empty(),we.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:C()}function Ue(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ne(me.empty(),we.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Oe:C()}function Ve(e,t){var n=Ee(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Be(e,t){var n=Ee(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ze=function(){function e(t){Object(f.a)(this,e),this.value=t}return Object(h.a)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Re(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pe(t)}},{key:"setAll",value:function(e){var t=this,n=oe.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Pe(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Re(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ie(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Re(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){te(t,function(t,n){return e[t]=n});var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Pe(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function qe(e){var t=[];return te(e.fields,function(e,n){var r=new oe([e]);if(Re(n)){var i=qe(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)}),new ue(t)}var Ge=function(){function e(t,n,r,i,a,o){Object(f.a)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Object(h.a)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ze.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ze.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Z.min(),Z.min(),ze.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Z.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Z.min(),ze.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Z.min(),ze.empty(),2)}}]),e}(),Ke=function e(t,n,r,i){Object(f.a)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i};function We(e){return e.fields.find(function(e){return 2===e.kind})}function He(e){return e.fields.filter(function(e){return 2!==e.kind})}Ke.UNKNOWN_ID=-1;var Qe=function e(t,n){Object(f.a)(this,e),this.fieldPath=t,this.kind=n},Ye=function(){function e(t,n){Object(f.a)(this,e),this.sequenceNumber=t,this.offset=n}return Object(h.a)(e,null,[{key:"empty",value:function(){return new e(0,Je.min())}}]),e}();function $e(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(1e9===r?new J(n+1,0):new J(n,r));return new Je(i,we.empty(),t)}function Xe(e){return new Je(e.readTime,e.key,-1)}var Je=function(){function e(t,n,r){Object(f.a)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Object(h.a)(e,null,[{key:"min",value:function(){return new e(Z.min(),we.empty(),-1)}},{key:"max",value:function(){return new e(Z.max(),we.empty(),-1)}}]),e}();function Ze(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=we.comparator(e.documentKey,t.documentKey))?n:Y(e.largestBatchId,t.largestBatchId)}var et=function(){function e(t,n){Object(f.a)(this,e),this.comparator=t,this.root=n||nt.EMPTY}return Object(h.a)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,nt.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nt.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new tt(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new tt(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new tt(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new tt(this.root,e,this.comparator,!0)}},{key:"size",get:function(){return this.root.size}}]),e}(),tt=function(){function e(t,n,r,i){Object(f.a)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Object(h.a)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),nt=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Object(h.a)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw C();if(this.right.isRed())throw C();var e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}}]),e}();nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1,nt.EMPTY=new(function(){function e(){Object(f.a)(this,e),this.size=0}return Object(h.a)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new nt(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}},{key:"key",get:function(){throw C()}},{key:"value",get:function(){throw C()}},{key:"color",get:function(){throw C()}},{key:"left",get:function(){throw C()}},{key:"right",get:function(){throw C()}}]),e}());var rt=function(){function e(t){Object(f.a)(this,e),this.comparator=t,this.data=new et(this.comparator)}return Object(h.a)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new it(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new it(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}},{key:"size",get:function(){return this.data.size}}]),e}(),it=function(){function e(t){Object(f.a)(this,e),this.iter=t}return Object(h.a)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function at(e){return e.hasNext()?e.getNext():void 0}var ot=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(f.a)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null};function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ot(e,t,n,r,i,a,o)}function st(e){var t=L(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return(t=e).field.canonicalString()+t.op.toString()+Te(t.value);var t}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),ge(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return Te(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return Te(e)}).join(",")),t.P=n}return t.P}function ct(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!It(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ie(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Et(e.startAt,t.startAt)&&Et(e.endAt,t.endAt)}function lt(e){return we.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ft(e,t){return e.filters.filter(function(e){return e instanceof pt&&e.field.isEqual(t)})}function ht(e,t,n){var r,i=xe,a=!0,o=g(ft(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=xe,c=!0;switch(u.op){case"<":case"<=":s=Fe(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=xe}Ve({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ve({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function dt(e,t,n){var r,i=Oe,a=!0,o=g(ft(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Oe,c=!0;switch(u.op){case">=":case">":s=Ue(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Oe}Be({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Be({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var pt=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).field=e,i.op=n,i.value=r,i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ee(t,this.value)):null!==t&&_e(this.value)===_e(t)&&this.v(Ee(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return C()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.V(e,n,r):new vt(e,n,r):"array-contains"===n?new bt(e,r):"in"===n?new kt(e,r):"not-in"===n?new wt(e,r):"array-contains-any"===n?new Ot(e,r):new t(e,n,r)}},{key:"V",value:function(e,t,n){return"in"===t?new yt(e,n):new mt(e,n)}}]),t}(function(){return function e(){Object(f.a)(this,e)}}()),vt=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this,e,n,r))).key=we.fromName(r.referenceValue),i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){var t=we.comparator(e.key,this.key);return this.v(t)}}]),t}(pt),yt=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,"in",n))).keys=gt("in",n),r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(pt),mt=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,"not-in",n))).keys=gt("not-in",n),r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(pt);function gt(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return we.fromName(e.referenceValue)})}var bt=function(e){function t(e,n){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"array-contains",n))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ae(t)&&je(t.arrayValue,this.value)}}]),t}(pt),kt=function(e){function t(e,n){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"in",n))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&je(this.value.arrayValue,t)}}]),t}(pt),wt=function(e){function t(e,n){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"not-in",n))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){if(je(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!je(this.value.arrayValue,t)}}]),t}(pt),Ot=function(e){function t(e,n){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"array-contains-any",n))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ae(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return je(t.value.arrayValue,e)})}}]),t}(pt),xt=function e(t,n){Object(f.a)(this,e),this.position=t,this.inclusive=n},_t=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Object(f.a)(this,e),this.field=t,this.dir=n};function It(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function jt(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?we.comparator(we.fromName(o.referenceValue),n.key):Ee(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Et(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ie(e.position[n],t.position[n]))return!1;return!0}var St=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(f.a)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt};function Tt(e,t,n,r,i,a,o,u){return new St(e,t,n,r,i,a,o,u)}function Nt(e){return new St(e)}function Ct(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function At(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Dt(e){return null!==e.collectionGroup}function Lt(e){var t=L(e);if(null===t.D){t.D=[];var n=At(t),r=Ct(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new _t(n)),t.D.push(new _t(oe.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new _t(oe.keyField(),s))}}}return t.D}function Rt(e){var t=L(e);if(!t.C)if("F"===t.limitType)t.C=ut(t.path,t.collectionGroup,Lt(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(Lt(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new _t(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new xt(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new xt(t.startAt.position,t.startAt.inclusive):null;t.C=ut(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Pt(e,t,n){return new St(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mt(e,t){return ct(Rt(e),Rt(t))&&e.limitType===t.limitType}function Ft(e){return"".concat(st(Rt(e)),"|lt:").concat(e.limitType)}function Ut(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Te(t.value));var t}).join(", "),"]")),ge(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return Te(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return Te(e)}).join(",")),"Target(".concat(t,")")}(Rt(e)),"; limitType=").concat(e.limitType,")")}function Vt(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):we.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=jt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Lt(e),t))&&!(e.endAt&&!function(e,t,n){var r=jt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Lt(e),t))}(e,t)}function Bt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zt(e){return function(t,n){var r,i=!1,a=g(Lt(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=qt(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function qt(e,t,n){var r=e.field.isKeyField()?we.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ee(r,i):C()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return C()}}function Gt(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:be(t)?"-0":t}}function Kt(e){return{integerValue:""+e}}function Wt(e,t){return ke(t)?Kt(t):Gt(e,t)}var Ht=function e(){Object(f.a)(this,e),this._=void 0};function Qt(e,t,n){return e instanceof Xt?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Jt?Zt(e,t):e instanceof en?tn(e,t):function(e,t){var n=$t(e,t),r=rn(n)+rn(e.k);return Ce(n)&&Ce(e.k)?Kt(r):Gt(e.M,r)}(e,t)}function Yt(e,t,n){return e instanceof Jt?Zt(e,t):e instanceof en?tn(e,t):n}function $t(e,t){return e instanceof nn?Ce(n=t)||n&&"doubleValue"in n?t:{integerValue:0}:null;var n}var Xt=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(Ht),Jt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).elements=e,n}return Object(c.a)(t,e),t}(Ht);function Zt(e,t){var n,r=an(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return Ie(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var en=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).elements=e,n}return Object(c.a)(t,e),t}(Ht);function tn(e,t){var n,r=an(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!Ie(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var nn=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).M=e,r.k=n,r}return Object(c.a)(t,e),t}(Ht);function rn(e){return he(e.integerValue||e.doubleValue)}function an(e){return Ae(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var on=function e(t,n){Object(f.a)(this,e),this.field=t,this.transform=n};var un=function e(t,n){Object(f.a)(this,e),this.version=t,this.transformResults=n},sn=function(){function e(t,n){Object(f.a)(this,e),this.updateTime=t,this.exists=n}return Object(h.a)(e,[{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function cn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ln=function e(){Object(f.a)(this,e)};function fn(e,t,n){e instanceof yn?function(e,t,n){var r=e.value.clone(),i=bn(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof mn?function(e,t,n){if(cn(e.precondition,t)){var r=bn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(gn(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function hn(e,t,n){e instanceof yn?function(e,t,n){if(cn(e.precondition,t)){var r=e.value.clone(),i=kn(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vn(t),r).setHasLocalMutations()}}(e,t,n):e instanceof mn?function(e,t,n){if(cn(e.precondition,t)){var r=kn(e.fieldTransforms,n,t),i=t.data;i.setAll(gn(e)),i.setAll(r),t.convertToFoundDocument(vn(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){cn(e.precondition,t)&&t.convertToNoDocument(Z.min())}(e,t)}function dn(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=$t(a.transform,o||null);null!=u&&(null==r&&(r=ze.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function pn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Jt&&t instanceof Jt||e instanceof en&&t instanceof en?$(e.elements,t.elements,Ie):e instanceof nn&&t instanceof nn?Ie(e.k,t.k):e instanceof Xt&&t instanceof Xt}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vn(e){return e.isFoundDocument()?e.version:Z.min()}var yn=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return Object(c.a)(t,e),t}(ln),mn=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(f.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(c.a)(t,e),t}(ln);function gn(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function bn(e,t,n){var r=new Map;A(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Yt(o,u,n[i]))}return r}function kn(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Qt(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var wn,On,xn=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(c.a)(t,e),t}(ln),_n=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(c.a)(t,e),t}(ln),In=function e(t){Object(f.a)(this,e),this.count=t};function jn(e){switch(e){default:return C();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function En(e){if(void 0===e)return S("GRPC error has no .code"),R.UNKNOWN;switch(e){case wn.OK:return R.OK;case wn.CANCELLED:return R.CANCELLED;case wn.UNKNOWN:return R.UNKNOWN;case wn.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case wn.INTERNAL:return R.INTERNAL;case wn.UNAVAILABLE:return R.UNAVAILABLE;case wn.UNAUTHENTICATED:return R.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case wn.NOT_FOUND:return R.NOT_FOUND;case wn.ALREADY_EXISTS:return R.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return R.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case wn.ABORTED:return R.ABORTED;case wn.OUT_OF_RANGE:return R.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return R.UNIMPLEMENTED;case wn.DATA_LOSS:return R.DATA_LOSS;default:return C()}}(On=wn||(wn={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";var Sn=function(){function e(t,n){Object(f.a)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Object(h.a)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],s=o[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){te(this.inner,function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],s=o[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}})}},{key:"isEmpty",value:function(){return ne(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Tn=new et(we.comparator);function Nn(){return Tn}var Cn=new et(we.comparator);function An(){for(var e=Cn,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Dn(){return new Sn(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var Ln=new et(we.comparator),Rn=new rt(we.comparator);function Pn(){for(var e=Rn,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Mn=new rt(Y);function Fn(){return Mn}var Un=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Object(h.a)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Vn.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Z.min(),r,Fn(),Nn(),Pn())}}]),e}(),Vn=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Object(h.a)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(ce.EMPTY_BYTE_STRING,n,Pn(),Pn(),Pn())}}]),e}(),Bn=function e(t,n,r,i){Object(f.a)(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i},zn=function e(t,n){Object(f.a)(this,e),this.targetId=t,this.$=n},qn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(f.a)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},Gn=function(){function e(){Object(f.a)(this,e),this.B=0,this.L=Hn(),this.U=ce.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return Object(h.a)(e,[{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Pn(),t=Pn(),n=Pn();return this.L.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:C()}}),new Vn(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Hn()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}},{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}}]),e}(),Kn=function(){function e(t){Object(f.a)(this,e),this.nt=t,this.st=new Map,this.it=Nn(),this.rt=Wn(),this.ot=new rt(Y)}return Object(h.a)(e,[{key:"ut",value:function(e){var t,n=g(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:C()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(function(e,r){n.ft(r)&&t(r)})}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(lt(i))if(0===n){var a=new we(i.path);this.ct(t,a,Ge.newNoDocument(a,Z.min()))}else A(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach(function(r,i){var a=t.wt(i);if(a){if(r.current&&lt(a.target)){var o=new we(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Ge.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}});var r=Pn();this.rt.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.it.forEach(function(t,n){return n.setReadTime(e)});var i=new Un(e,n,this.ot,this.it,r);return this.it=Nn(),this.rt=Wn(),this.ot=new rt(Y),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Gn,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new rt(Y),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||E("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Gn),this.nt.getRemoteKeysForTarget(e).forEach(function(n){t.ct(e,n,null)})}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Wn(){return new et(we.comparator)}function Hn(){return new et(we.comparator)}var Qn={asc:"ASCENDING",desc:"DESCENDING"},Yn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$n=function e(t,n){Object(f.a)(this,e),this.databaseId=t,this.N=n};function Xn(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jn(e,t){return e.N?t.toBase64():t.toUint8Array()}function Zn(e,t){return Xn(e,t.toTimestamp())}function er(e){return A(!!e),Z.fromTimestamp(function(e){var t=fe(e);return new J(t.seconds,t.nanos)}(e))}function tr(e,t){return function(e){return new ie(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function nr(e){var t=ie.fromString(e);return A(_r(t)),t}function rr(e,t){return tr(e.databaseId,t.path)}function ir(e,t){var n=nr(t);if(n.get(1)!==e.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new we(sr(n))}function ar(e,t){return tr(e.databaseId,t)}function or(e){var t=nr(e);return 4===t.length?ie.emptyPath():sr(t)}function ur(e){return new ie(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sr(e){return A(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function cr(e,t,n){return{name:rr(e,t),fields:n.value.mapValue.fields}}function lr(e,t,n){var r=ir(e,t.name),i=er(t.updateTime),a=new ze({mapValue:{fields:t.fields}}),o=Ge.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function fr(e,t){return"found"in t?function(e,t){A(!!t.found),t.found.name,t.found.updateTime;var n=ir(e,t.found.name),r=er(t.found.updateTime),i=new ze({mapValue:{fields:t.found.fields}});return Ge.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){A(!!t.missing),A(!!t.readTime);var n=ir(e,t.missing),r=er(t.readTime);return Ge.newNoDocument(n,r)}(e,t):C()}function hr(e,t){var n;if(t instanceof yn)n={update:cr(e,t.key,t.value)};else if(t instanceof xn)n={delete:rr(e,t.key)};else if(t instanceof mn)n={update:cr(e,t.key,t.data),updateMask:xr(t.fieldMask)};else{if(!(t instanceof _n))return C();n={verify:rr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Xt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof en)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof nn)return{fieldPath:t.field.canonicalString(),increment:n.k};throw C()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:C()}(e,t.precondition)),n}function dr(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?sn.updateTime(er(e.updateTime)):void 0!==e.exists?sn.exists(e.exists):sn.none()}(t.currentDocument):sn.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;if("setToServerValue"in t)A("REQUEST_TIME"===t.setToServerValue),n=new Xt;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Jt(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new en(i)}else"increment"in t?n=new nn(e,t.increment):C();var a=oe.fromServerFormat(t.fieldPath);return new on(a,n)}(e,t)}):[];if(t.update){t.update.name;var i=ir(e,t.update.name),a=new ze({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ue(t.map(function(e){return oe.fromServerFormat(e)}))}(t.updateMask);return new mn(i,a,o,n,r)}return new yn(i,a,n,r)}if(t.delete){var u=ir(e,t.delete);return new xn(u,n)}if(t.verify){var s=ir(e,t.verify);return new _n(s,n)}return C()}function pr(e,t){return{documents:[ar(e,t.path)]}}function vr(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ar(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ar(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(Le(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NAN"}};if(De(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Le(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NOT_NAN"}};if(De(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:br(e.field),op:gr(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:br(e.field),direction:mr(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||ge(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function yr(e){var t=or(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){A(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[Or(t)]:void 0!==t.fieldFilter?[wr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)}):C():[]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return function(e){return new _t(kr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var s=null;n.limit&&(s=function(e){var t;return ge(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new xt(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new xt(n,t)}(n.endAt)),Tt(t,i,u,o,s,"F",c,l)}function mr(e){return Qn[e]}function gr(e){return Yn[e]}function br(e){return{fieldPath:e.canonicalString()}}function kr(e){return oe.fromServerFormat(e.fieldPath)}function wr(e){return pt.create(kr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(e.fieldFilter.op),e.fieldFilter.value)}function Or(e){switch(e.unaryFilter.op){case"IS_NAN":var t=kr(e.unaryFilter.field);return pt.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=kr(e.unaryFilter.field);return pt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=kr(e.unaryFilter.field);return pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=kr(e.unaryFilter.field);return pt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return C()}}function xr(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function _r(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ir(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Er(t)),t=jr(e.get(n),t);return Er(t)}function jr(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Er(e){return e+"\x01\x01"}function Sr(e){var t=e.length;if(A(t>=2),2===t)return A("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ie.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&C(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:C()}a=o+2}return new ie(r)}var Tr=["userId","batchId"];function Nr(e,t){return[e,Ir(t)]}function Cr(e,t,n){return[e,Ir(t),n]}var Ar={},Dr=["prefixPath","collectionGroup","readTime","documentId"],Lr=["prefixPath","collectionGroup","documentId"],Rr=["collectionGroup","readTime","prefixPath","documentId"],Pr=["canonicalId","targetId"],Mr=["targetId","path"],Fr=["path","targetId"],Ur=["collectionId","parent"],Vr=["indexId","uid"],Br=["uid","sequenceNumber"],zr=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qr=["indexId","uid","orderedDocumentKey"],Gr=["userId","collectionPath","documentId"],Kr=["userId","collectionPath","largestBatchId"],Wr=["userId","collectionGroup","largestBatchId"],Hr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Qr=[].concat(Object(l.a)(Hr),["documentOverlays"]),Yr=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$r=[].concat(Yr,["indexConfiguration","indexState","indexEntries"]),Xr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jr=function(){function e(){Object(f.a)(this,e),this.onCommittedListeners=[]}return Object(h.a)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),Zr=function(){function e(t){var n=this;Object(f.a)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return Object(h.a)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),ei=function(){function e(t,n){var r=this;Object(f.a)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new M,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new ri(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=si(e.target.error);r.At.reject(new ri(t,n))}}return Object(h.a)(e,[{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ai(t)}},{key:"Rt",get:function(){return this.At.promise}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ri(n,t)}}}]),e}(),ti=function(){function t(e,n,r){Object(f.a)(this,t),this.name=e,this.version=n,this.Pt=r,12.2===t.Vt(Object(y.m)())&&S("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Object(h.a)(t,[{key:"Nt",value:function(){var e=Object(o.a)(k().mark(function e(t){var n=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return E("SimpleDb","Opening database:",this.name),e.next=5,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ri(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ri(t,n))},i.onupgradeneeded=function(e){E("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next(function(){E("SimpleDb","Database upgrade to version "+n.version+" complete")})}});case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Object(o.a)(k().mark(function e(t,n,r,i){var a,o,u,s,c=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(k().mark(function e(){var n,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=ei.open(c.db,t,a?"readonly":"readwrite",r),(o=i(n).next(function(e){return n.bt(),e}).catch(function(e){return n.abort(e),Zr.reject(e)}).toPromise()).catch(function(){}),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}},e)})(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,E("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return E("SimpleDb","Removing database:",e),oi(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Object(y.s)())return!1;if(t.St())return!0;var e=Object(y.m)(),n=t.Vt(e),r=0<n&&n<10,i=t.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/sukart"}))||void 0===t?void 0:t.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),t}(),ni=function(){function e(t){Object(f.a)(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return Object(h.a)(e,[{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return oi(this.Ft.delete())}},{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}}]),e}(),ri=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,R.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)))).name="IndexedDbTransactionError",r}return Object(c.a)(t,e),t}(P);function ii(e){return"IndexedDbTransactionError"===e.name}var ai=function(){function e(t){Object(f.a)(this,e),this.store=t}return Object(h.a)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(E("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oi(n)}},{key:"add",value:function(e){return E("SimpleDb","ADD",this.store.name,e,e),oi(this.store.add(e))}},{key:"get",value:function(e){var t=this;return oi(this.store.get(e)).next(function(n){return void 0===n&&(n=null),E("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return E("SimpleDb","DELETE",this.store.name,e),oi(this.store.delete(e))}},{key:"count",value:function(){return E("SimpleDb","COUNT",this.store.name),oi(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,function(e,t){i.push(t)}).next(function(){return i})}var a=this.store.getAll(n.range);return new Zr(function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}})}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Zr(function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}})}},{key:"Qt",value:function(e,t){E("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,function(e,t,n){return n.delete()})}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Zr(function(n,r){t.onerror=function(e){var t=si(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Kt",value:function(e,t){var n=[];return new Zr(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ni(i),o=t(i.primaryKey,i.value,a);if(o instanceof Zr){var u=o.catch(function(e){return a.done(),Zr.reject(e)});n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}}).next(function(){return Zr.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function oi(e){return new Zr(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=si(e.target.error);n(t)}})}var ui=!1;function si(e){var t=ti.Vt(Object(y.m)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new P("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ui||(ui=!0,setTimeout(function(){throw r},0)),r}}return e}var ci=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).Ht=e,r.currentSequenceNumber=n,r}return Object(c.a)(t,e),t}(Jr);function li(e,t){var n=L(e);return ti.xt(n.Ht,t)}var fi=function(){function e(t,n,r,i){Object(f.a)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Object(h.a)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&fn(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=g(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&hn(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&hn(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Z.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Pn())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations,function(e,t){return pn(e,t)})&&$(this.baseMutations,e.baseMutations,function(e,t){return pn(e,t)})}}]),e}(),hi=function(){function e(t,n,r,i){Object(f.a)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Object(h.a)(e,null,[{key:"from",value:function(t,n,r){A(t.mutations.length===r.length);for(var i=Ln,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),di=function(){function e(t,n){Object(f.a)(this,e),this.largestBatchId=t,this.mutation=n}return Object(h.a)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),pi=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Z.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ce.EMPTY_BYTE_STRING;Object(f.a)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Object(h.a)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),vi=function e(t){Object(f.a)(this,e),this.Jt=t};function yi(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mi(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rr(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Xn(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:gi(t.version)};else{if(!t.isUnknownDocument())return C();r.unknownDocument={path:n.path.toArray(),version:gi(t.version)}}return r}function mi(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function gi(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bi(e){var t=new J(e.seconds,e.nanoseconds);return Z.fromTimestamp(t)}function ki(e,t){for(var n=(t.baseMutations||[]).map(function(t){return dr(e.Jt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map(function(t){return dr(e.Jt,t)}),u=J.fromMillis(t.localWriteTimeMs);return new fi(t.batchId,u,n,o)}function wi(e){var t,n,r=bi(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?bi(e.lastLimboFreeSnapshotVersion):Z.min();return void 0!==e.query.documents?(A(1===(n=e.query).documents.length),t=Rt(Nt(or(n.documents[0])))):t=function(e){return Rt(yr(e))}(e.query),new pi(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ce.fromBase64String(e.resumeToken))}function Oi(e,t){var n,r=gi(t.snapshotVersion),i=gi(t.lastLimboFreeSnapshotVersion);n=lt(t.target)?pr(e.Jt,t.target):vr(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:st(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function xi(e){var t=yr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Pt(t,t.limit,"L"):t}function _i(e,t){return new di(t.largestBatchId,dr(e.Jt,t.overlayMutation))}function Ii(e,t){var n=t.path.lastSegment();return[e,Ir(t.path.popLast()),n]}var ji=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"getBundleMetadata",value:function(e,t){return Ei(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:bi(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return Ei(e).put({bundleId:(n=t).id,createTime:gi(er(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Si(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:xi(t.bundledQuery),readTime:bi(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Si(e).put(function(e){return{name:e.name,readTime:gi(er(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ei(e){return li(e,"bundles")}function Si(e){return li(e,"namedQueries")}var Ti=function(){function e(t,n){Object(f.a)(this,e),this.M=t,this.userId=n}return Object(h.a)(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ni(e).get(Ii(this.userId,t)).next(function(e){return e?_i(n.M,e):null})}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach(function(n,a){var o=new di(t,a);i.push(r.Xt(e,o))}),Zr.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach(function(e){return i.add(Ir(e.getCollectionPath()))});var a=[];return i.forEach(function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ni(e).Qt("collectionPathOverlayIndex",i))}),Zr.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Dn(),a=Ir(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ni(e).qt("collectionPathOverlayIndex",o).next(function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=_i(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i})}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Dn(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ni(e).Wt({index:"collectionGroupOverlayIndex",range:u},function(e,t,n){var u=_i(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()}).next(function(){return o})}},{key:"Xt",value:function(e,t){return Ni(e).put(function(e,t,n){var r=Ii(t,n.mutation.key),i=Object(a.a)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:hr(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ni(e){return li(e,"documentOverlays")}var Ci=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(he(e.integerValue));else if("doubleValue"in e){var n=he(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),be(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(de(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Me(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):C()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),we.fromName(e).path.forEach(function(e){n.ne(t,60),n.le(e,t)})}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Ai(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Di(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ai(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ci.fe=new Ci;var Li=function(){function e(){Object(f.a)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Object(h.a)(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Di(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Di(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ri=function(){function e(t){Object(f.a)(this,e),this.De=t}return Object(h.a)(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),Pi=function(){function e(t){Object(f.a)(this,e),this.De=t}return Object(h.a)(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Mi=function(){function e(){Object(f.a)(this,e),this.De=new Li,this.Ce=new Ri(this.De),this.xe=new Pi(this.De)}return Object(h.a)(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Fi=function(){function e(t,n,r,i){Object(f.a)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Object(h.a)(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ui(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Vi(e.arrayValue,t.arrayValue))?n:0!==(n=Vi(e.directionalValue,t.directionalValue))?n:we.comparator(e.documentKey,t.documentKey)}function Vi(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Bi=function(){function e(t){Object(f.a)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=g(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Object(h.a)(e,[{key:"$e",value:function(e){var t=We(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=He(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=g(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),zi=function(){function e(){Object(f.a)(this,e),this.qe=new qi}return Object(h.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Zr.resolve()}},{key:"getCollectionParents",value:function(e,t){return Zr.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Zr.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Zr.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Zr.resolve(null)}},{key:"getIndexType",value:function(e,t){return Zr.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Zr.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Zr.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Zr.resolve(Je.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Zr.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Zr.resolve()}}]),e}(),qi=function(){function e(){Object(f.a)(this,e),this.index={}}return Object(h.a)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rt(ie.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new rt(ie.comparator)).toArray()}}]),e}(),Gi=new Uint8Array(0),Ki=function(){function e(t,n){Object(f.a)(this,e),this.user=t,this.databaseId=n,this.Ke=new qi,this.Ge=new Sn(function(e){return st(e)},function(e,t){return ct(e,t)}),this.uid=t.uid||""}return Object(h.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.Ke.add(t)});var a={collectionId:r,parent:Ir(i)};return Wi(e).put(a)}return Zr.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[X(t),""],!1,!0);return Wi(e).qt(r).next(function(e){var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Sr(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n})}},{key:"addFieldIndex",value:function(e,t){var n=Qi(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(function(e){return[e.fieldPath.canonicalString(),e.kind]})}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Qi(e),r=Yi(e),i=Hi(e);return n.delete(t.indexId).next(function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}).next(function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Hi(e),i=!0,a=new Map;return Zr.forEach(this.Qe(t),function(t){return n.je(e,t).next(function(e){i&&(i=!!e),a.set(t,e)})}).next(function(){if(i){var e=Pn(),o=[];return Zr.forEach(a,function(i,a){var u;E("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map(function(e){return"".concat(e.fieldPath,":").concat(e.kind)}).join(",")))," to execute ").concat(st(t)));var s=function(e,t){var n=We(i);if(void 0===n)return null;var r,a=g(ft(e,n.fieldPath));try{for(a.s();!(r=a.n()).done;){var o=r.value;switch(o.op){case"array-contains-any":return o.value.arrayValue.values||[];case"array-contains":return[o.value]}}}catch(u){a.e(u)}finally{a.f()}return null}(a),c=function(e,t){var n,r=new Map,i=g(He(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=g(ft(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],a=!0,o=g(He(i));try{for(o.s();!(n=o.n()).done;){var u=n.value,s=0===u.kind?ht(e,u.fieldPath,e.startAt):dt(e,u.fieldPath,e.startAt);r.push(s.value),a&&(a=s.inclusive)}}catch(c){o.e(c)}finally{o.f()}return new xt(r,a)}(a),f=function(e,t){var n,r=[],a=!0,o=g(He(i));try{for(o.s();!(n=o.n()).done;){var u=n.value,s=0===u.kind?dt(e,u.fieldPath,e.endAt):ht(e,u.fieldPath,e.endAt);r.push(s.value),a&&(a=s.inclusive)}}catch(c){o.e(c)}finally{o.f()}return new xt(r,a)}(a),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Zr.forEach(v,function(n){return r.Gt(n,t.limit).next(function(t){t.forEach(function(t){var n=we.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))})})})}).next(function(){return o})}return Zr.resolve(null)})}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),f=[],h=function(s){var h=t?u.Je(t[s/c]):Gi,d=u.Ye(e,h,n[s%c],r),p=u.Xe(e,h,i[s%c],a),v=o.map(function(t){return u.Ye(e,h,t,!0)});f.push.apply(f,Object(l.a)(u.createRange(d,p,v)))},d=0;d<s;++d)h(d);return f}},{key:"Ye",value:function(e,t,n,r){var i=new Fi(e,we.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Fi(e,we.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Bi(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(function(e){var t,r=null,i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r})}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Zr.forEach(this.Qe(t),function(t){return n.je(e,t).next(function(e){e?0!==r&&e.fields.length<function(e){var t,n=new rt(oe.comparator),r=!1,i=g(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=g(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0})}).next(function(){return r})}},{key:"Ze",value:function(e,t){var n,r=new Mi,i=g(He(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Ci.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new Mi;return Ci.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Mi;return Ci.fe.Zt(Ne(this.databaseId,t),n.Ne(function(e){var t=He(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Mi);var i,a=0,o=g(He(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=g(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&Ae(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);Ci.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Object(l.a)(e),a=[],o=g(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=g(i);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=new Mi;h.seed(f.Se()),Ci.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find(function(e){return e instanceof pt&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)})}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Qi(e),i=Yi(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(function(e){var t=[];return Zr.forEach(e,function(e){return i.get([e.indexId,n.uid]).next(function(n){t.push(function(e,t){var n=t?new Ye(t.sequenceNumber,new Je(bi(t.readTime),new we(Sr(t.documentKey)),t.largestBatchId)):Ye.empty(),r=e.fields.map(function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return new Qe(oe.fromServerFormat(n),r)});return new Ke(e.indexId,e.collectionGroup,r,n)}(e,n))})}).next(function(){return t})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(e){return 0===e.length?null:(e.sort(function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Y(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Qi(e),a=Yi(e);return this.rn(e).next(function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(function(t){return Zr.forEach(t,function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:gi(r.readTime),documentKey:Ir(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))})})})}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Zr.forEach(t,function(t,i){var a=r.get(t.collectionGroup);return(a?Zr.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next(function(a){return r.set(t.collectionGroup,a),Zr.forEach(a,function(r){return n.on(e,t,r).next(function(t){var a=n.un(i,r);return t.isEqual(a)?Zr.resolve():n.an(e,i,r,t,a)})})})})}},{key:"cn",value:function(e,t,n,r){return Hi(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Hi(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Hi(e),i=new rt(Ui);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},function(e,r){i=i.add(new Fi(n.indexId,t,r.arrayValue,r.directionalValue))}).next(function(){return i})}},{key:"un",value:function(e,t){var n=new rt(Ui),r=this.Ze(t,e);if(null==r)return n;var i=We(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ae(a)){var o,u=g(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Fi(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Fi(t.indexId,e.key,Gi,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;E("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=at(a),s=at(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=at(o)):l?(i(u),u=at(a)):(u=at(a),s=at(o))}}(r,i,Ui,function(r){o.push(a.cn(e,t,n,r))},function(r){o.push(a.hn(e,t,n,r))}),Zr.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Yi(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(e,n,r){r.done(),t=n.sequenceNumber+1}).next(function(){return t})}},{key:"createRange",value:function(e,t,n){n=n.sort(function(e,t){return Ui(e,t)}).filter(function(e,t,n){return!t||0!==Ui(e,n[t-1])});var r=[];r.push(e);var i,a=g(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ui(o,e),s=Ui(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Gi,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Gi,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Zr.forEach(this.Qe(t),function(t){return r.je(e,t).next(function(e){e?(!n||Ze(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Je.min()})}).next(function(){return n})}}]),e}();function Wi(e){return li(e,"collectionParents")}function Hi(e){return li(e,"indexEntries")}function Qi(e){return li(e,"indexConfiguration")}function Yi(e){return li(e,"indexState")}var $i={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xi=function(){function e(t,n,r){Object(f.a)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Object(h.a)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ji(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},function(e,t,n){return u++,n.delete()});a.push(s.next(function(){A(1===u)}));var c,l=[],f=g(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Cr(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Zr.waitFor(a).next(function(){return l})}function Zi(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw C();t=e.noDocument}return JSON.stringify(t).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);var ea=function(){function e(t,n,r,i){Object(f.a)(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return Object(h.a)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return na(e).Wt({index:"userMutationsIndex",range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ra(e),o=na(e);return o.add({}).next(function(u){A("number"==typeof u);var s,c=new fi(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map(function(t){return hr(e.Jt,t)}),i=n.mutations.map(function(t){return hr(e.Jt,t)});return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new rt(function(e,t){return Y(e.canonicalString(),t.canonicalString())}),d=g(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Cr(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Ar))}}catch(y){d.e(y)}finally{d.f()}return h.forEach(function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.ln[u]=c.keys()}),Zr.waitFor(f).next(function(){return c})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return na(e).get(t).next(function(e){return e?(A(e.userId===n.userId),ki(n.M,e)):null})}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Zr.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return na(e).Wt({index:"userMutationsIndex",range:i},function(e,t,i){t.userId===n.userId&&(A(t.batchId>=r),a=ki(n.M,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return na(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return na(e).qt("userMutationsIndex",n).next(function(e){return e.map(function(e){return ki(t.M,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Nr(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ra(e).Wt({range:i},function(r,i,u){var s=Object(a.a)(r,3),c=s[0],l=s[1],f=s[2],h=Sr(l);if(c===n.userId&&t.path.isEqual(h))return na(e).get(f).next(function(e){if(!e)throw C();A(e.userId===n.userId),o.push(ki(n.M,e))});u.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new rt(Y),i=[];return t.forEach(function(t){var o=Nr(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=ra(e).Wt({range:u},function(e,i,o){var u=Object(a.a)(e,3),s=u[0],c=u[1],l=u[2],f=Sr(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):o.done()});i.push(s)}),Zr.waitFor(i).next(function(){return n.dn(e,r)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=Nr(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new rt(Y);return ra(e).Wt({range:u},function(e,t,o){var u=Object(a.a)(e,3),c=u[0],l=u[1],f=u[2],h=Sr(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):o.done()}).next(function(){return n.dn(e,s)})}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(na(e).get(t).next(function(e){if(null===e)throw C();A(e.userId===n.userId),r.push(ki(n.M,e))}))}),Zr.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ji(e.Ht,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n._n(t.batchId)}),Zr.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Zr.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ra(e).Wt({range:r},function(e,n,r){if(e[0]===t.userId){var a=Sr(e[1]);i.push(a)}else r.done()}).next(function(){A(0===i.length)})})}},{key:"containsKey",value:function(e,t){return ta(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return ia(e).get(this.userId).next(function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"Yt",value:function(t,n,r,i){return A(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ta(e,t,n){var r=Nr(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return ra(e).Wt({range:o,jt:!0},function(e,n,r){var o=Object(a.a)(e,3),s=o[0],c=o[1];o[2];s===t&&c===i&&(u=!0),r.done()}).next(function(){return u})}function na(e){return li(e,"mutations")}function ra(e){return li(e,"documentMutations")}function ia(e){return li(e,"mutationQueues")}var aa=function(){function e(t){Object(f.a)(this,e),this.mn=t}return Object(h.a)(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),oa=function(){function e(t,n){Object(f.a)(this,e),this.referenceDelegate=t,this.M=n}return Object(h.a)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next(function(n){var r=new aa(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next(function(e){return Z.fromTimestamp(new J(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next(function(){return n.pn(e).next(function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ua(e).delete(t.targetId)}).next(function(){return n.pn(e)}).next(function(t){return A(t.targetCount>0),t.targetCount-=1,n.In(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ua(e).Wt(function(o,u){var s=wi(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))}).next(function(){return Zr.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return ua(e).Wt(function(e,n){var r=wi(n);t(r)})}},{key:"pn",value:function(e){return sa(e).get("targetGlobalKey").next(function(e){return A(null!==e),e})}},{key:"In",value:function(e,t){return sa(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return ua(e).put(Oi(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=st(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ua(e).Wt({range:r,index:"queryTargetsIndex"},function(e,n,r){var a=wi(n);ct(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ca(e);return t.forEach(function(t){var o=Ir(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))}),Zr.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ca(e);return Zr.forEach(t,function(t){var a=Ir(t.path);return Zr.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ca(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ca(e),i=Pn();return r.Wt({range:n,jt:!0},function(e,t,n){var r=Sr(e[1]),a=new we(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=Ir(t.path),r=IDBKeyRange.bound([n],[X(n)],!1,!0),i=0;return ca(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},function(e,t,n){var r=Object(a.a)(e,2),o=r[0];r[1];0!==o&&(i++,n.done())}).next(function(){return i>0})}},{key:"Et",value:function(e,t){return ua(e).get(t).next(function(e){return e?wi(e):null})}}]),e}();function ua(e){return li(e,"targets")}function sa(e){return li(e,"targetGlobal")}function ca(e){return li(e,"targetDocuments")}function la(e){return fa.apply(this,arguments)}function fa(){return(fa=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===R.FAILED_PRECONDITION&&t.message===Xr){e.next=2;break}throw t;case 2:E("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ha(e,t){var n=Object(a.a)(e,2),r=n[0],i=n[1],o=Object(a.a)(t,2),u=o[0],s=o[1],c=Y(r,u);return 0===c?Y(i,s):c}var da=function(){function e(t){Object(f.a)(this,e),this.An=t,this.buffer=new rt(ha),this.Rn=0}return Object(h.a)(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ha(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),pa=function(){function e(t,n){Object(f.a)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return Object(h.a)(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;E("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Object(o.a)(k().mark(function n(){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ii(n.t0)){n.next=12;break}E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,la(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}},{key:"started",get:function(){return null!==this.vn}}]),e}(),va=function(){function e(t,n){Object(f.a)(this,e),this.Dn=t,this.params=n}return Object(h.a)(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Zr.resolve(W.A);var r=new da(t);return this.Dn.forEachTarget(e,function(e){return r.Pn(e.sequenceNumber)}).next(function(){return n.Dn.xn(e,function(e){return r.Pn(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector","Garbage collection skipped; disabled"),Zr.resolve($i)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),$i):n.Nn(e,t)})}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),I()<=v.a.DEBUG&&E("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Zr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),ya=function(){function e(t,n){Object(f.a)(this,e),this.db=t,this.garbageCollector=function(e,t){return new va(e,t)}(this,n)}return Object(h.a)(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"kn",value:function(e){var t=0;return this.xn(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return ma(e,n)}},{key:"removeReference",value:function(e,t,n){return ma(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ma(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return ia(e).zt(function(r){return ta(e,r,t).next(function(e){return e&&(n=!0),Zr.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,function(o,u){if(u<=t){var s=n.On(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o,Z.min()),ca(e).delete([0,Ir(o.path)])})});i.push(s)}}).next(function(){return Zr.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ma(e,t)}},{key:"Mn",value:function(e,t){var n,r=ca(e),i=W.A;return r.Wt({index:"documentTargetsIndex"},function(e,r){var o=Object(a.a)(e,2),u=o[0],s=(o[1],r.path),c=r.sequenceNumber;0===u?(i!==W.A&&t(new we(Sr(n)),i),i=c,n=s):i=W.A}).next(function(){i!==W.A&&t(new we(Sr(n)),i)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ma(e,t){return ca(e).put(function(e,t){return{targetId:0,path:Ir(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ga=function(){function e(){Object(f.a)(this,e),this.changes=new Sn(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return Object(h.a)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Zr.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ba=function(){function e(t){Object(f.a)(this,e),this.M=t}return Object(h.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Oa(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Oa(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],mi(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Fn(e,r)})}},{key:"getEntry",value:function(e,t){var n=this,r=Ge.newInvalidDocument(t);return Oa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xa(t))},function(e,i){r=n.$n(t,i)}).next(function(){return r})}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Ge.newInvalidDocument(t)};return Oa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xa(t))},function(e,i){r={document:n.$n(t,i),size:Zi(i)}}).next(function(){return r})}},{key:"getEntries",value:function(e,t){var n=this,r=Nn();return this.Ln(e,t,function(e,t){var i=n.$n(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"Un",value:function(e,t){var n=this,r=Nn(),i=new et(we.comparator);return this.Ln(e,t,function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Zi(t))}).next(function(){return{documents:r,qn:i}})}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Zr.resolve();var r=new rt(Ia);t.forEach(function(e){return r=r.add(e)});var i=IDBKeyRange.bound(xa(r.first()),xa(r.last())),a=r.getIterator(),o=a.getNext();return Oa(e).Wt({index:"documentKeyIndex",range:i},function(e,t,r){for(var i=we.fromSegments([].concat(Object(l.a)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Ia(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(xa(o)):r.done()}).next(function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),mi(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oa(e).qt(IDBKeyRange.bound(i,a,!0)).next(function(e){var t,n=Nn(),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(we.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n})}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Nn(),o=_a(t,n),u=_a(t,Je.max());return Oa(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},function(e,t,n){var o=i.$n(we.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()}).next(function(){return a})}},{key:"newChangeBuffer",value:function(e){return new ka(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return wa(e).get("remoteDocumentGlobalKey").next(function(e){return A(!!e),e})}},{key:"Fn",value:function(e,t){return wa(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=lr(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=we.fromSegments(t.noDocument.path),i=bi(t.noDocument.readTime);n=Ge.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return C();var a=we.fromSegments(t.unknownDocument.path),o=bi(t.unknownDocument.version);n=Ge.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new J(e[0],e[1]);return Z.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Z.min()))return n}return Ge.newInvalidDocument(e)}}]),e}(),ka=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).Kn=e,r.trackRemovals=n,r.Gn=new Sn(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new rt(function(e,t){return Y(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=yi(t.Kn.M,o);i=i.add(a.path.popLast());var c=Zi(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=yi(t.Kn.M,o.convertToNoDocument(Z.min()));n.push(t.Kn.addEntry(e,a,l))}}),i.forEach(function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.Kn.updateMetadata(e,r)),Zr.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next(function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next(function(e){var t=e.documents;return e.qn.forEach(function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})}),t})}}]),t}(ga);function wa(e){return li(e,"remoteDocumentGlobal")}function Oa(e){return li(e,"remoteDocumentsV14")}function xa(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _a(e,t){var n=t.documentKey.path.toArray();return[e,mi(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ia(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Y(n[a],r[a]))return i;return(i=Y(n.length,r.length))||((i=Y(n[n.length-2],r[r.length-2]))||Y(n[n.length-1],r[r.length-1]))}var ja=function(){function e(t){Object(f.a)(this,e),this.M=t}return Object(h.a)(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new ei("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tr,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ea(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Zr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ea(e)),o=o.next(function(){return function(e){var t=a.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}()})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store("mutations").qt().next(function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tr,{unique:!0});var r=t.store("mutations"),i=n.map(function(e){return r.put(e)});return Zr.waitFor(i)})}(e,a)})),o=o.next(function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.Qn(a)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)})),n<7&&r>=7&&(o=o.next(function(){return i.Wn(a)})),n<8&&r>=8&&(o=o.next(function(){return i.zn(e,a)})),n<9&&r>=9&&(o=o.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Hn(a)})),n<11&&r>=11&&(o=o.next(function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Gr});t.createIndex("collectionPathOverlayIndex",Kr,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Wr,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Dr});t.createIndex("documentKeyIndex",Lr),t.createIndex("collectionGroupIndex",Rr)}(e)}).next(function(){return i.Jn(e,a)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),n<14&&r>=14&&(o=o.next(function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Vr}).createIndex("sequenceNumberIndex",Br,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:zr}).createIndex("documentKeyIndex",qr,{unique:!1})}(e)})),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt(function(e,n){t+=Zi(n)}).next(function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next(function(n){return Zr.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next(function(r){return Zr.forEach(r,function(r){A(r.userId===n.userId);var i=ki(t.M,r);return Ji(e,n.userId,i).next(function(){})})})})})}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(e){var r=[];return n.Wt(function(n,i){var a=new ie(n),o=[0,Ir(a)];r.push(t.get(o).next(function(n){return n?Zr.resolve():function(n){return t.put({targetId:0,path:Ir(n),sequenceNumber:e.highestListenSequenceNumber})}(a)}))}).next(function(){return Zr.waitFor(r)})})}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Ur});var n=t.store("collectionParents"),r=new qi,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ir(i)})}};return t.store("remoteDocuments").Wt({jt:!0},function(e,t){var n=new ie(e);return i(n.popLast())}).next(function(){return t.store("documentMutations").Wt({jt:!0},function(e,t){var n=Object(a.a)(e,3),r=(n[0],n[1]),o=(n[2],Sr(r));return i(o.popLast())})})}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt(function(e,r){var i=wi(r),a=Oi(t.M,i);return n.put(a)})}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt(function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new we(ie.fromString(i.document.name).popFirst(5)):i.noDocument?we.fromSegments(i.noDocument.path):i.unknownDocument?we.fromSegments(i.unknownDocument.path):C()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))}).next(function(){return Zr.waitFor(r)})}}]),e}();function Ea(e){e.createObjectStore("targetDocuments",{keyPath:Mr}).createIndex("documentTargetsIndex",Fr,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pr,{unique:!0}),e.createObjectStore("targetGlobal")}var Sa="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ta=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(Object(f.a)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ya(this,i),this.hs=n+"main",this.M=new vi(s),this.ls=new ti(this.hs,this.ts,new ja(this.M)),this.fs=new oa(this.referenceDelegate,this.M),this.ds=function(e){return new ba(e)}(this.M),this._s=new ji,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&S("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Object(h.a)(e,[{key:"start",value:function(){var e=this;return this.gs().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Sa);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.fs.getHighestSequenceNumber(t)})}).then(function(t){e.es=new W(t,e.Xn)}).then(function(){e.ns=!0}).catch(function(t){return e.ls&&e.ls.close(),Promise.reject(t)})}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Object(o.a)(k().mark(function n(r){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Object(o.a)(k().mark(function t(n){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}},e)}))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return Ca(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.Es(t).next(function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable(function(){return e.cs(!1)}))})}).next(function(){return e.As(t)}).next(function(n){return e.isPrimary&&!n?e.Rs(t).next(function(){return!1}):!!n&&e.bs(t).next(function(){return!0})})}).catch(function(t){if(ii(t))return E("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable(function(){return e.cs(t)}),e.isPrimary=t})}},{key:"Es",value:function(e){var t=this;return Na(e).get("owner").next(function(e){return Zr.resolve(t.Ps(e))})}},{key:"Vs",value:function(e){return Ca(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n,r,i,a=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=li(e,"clientMetadata");return t.qt().next(function(e){var n=a.Ds(e,18e5),r=e.filter(function(e){return-1===n.indexOf(e)});return Zr.forEach(r,function(e){return t.delete(e.clientId)}).next(function(){return r})})}).catch(function(){return[]});case 4:if(t=e.sent,this.ws){n=g(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.gs().then(function(){return e.vs()}).then(function(){return e.Is()})})}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Zr.resolve(!0):Na(e).get("owner").next(function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Sa);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ca(e).qt().next(function(e){return void 0===t.Ds(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&E("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=Object(o.a)(k().mark(function e(){var t=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(e){var n=new ci(e,W.A);return t.Rs(n).next(function(){return t.Vs(n)})});case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter(function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)})}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return Ca(t).qt().next(function(t){return e.Ds(t,18e5).map(function(e){return e.clientId})})})}},{key:"getMutationQueue",value:function(e,t){return ea.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Ki(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ti.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;E("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?$r:13===i?Yr:12===i?Qr:11===i?Hr:void C();return this.ls.runTransaction(e,o,u,function(i){return a=new ci(i,r.es?r.es.next():W.A),"readwrite-primary"===t?r.Es(a).next(function(e){return!!e||r.As(a)}).next(function(t){if(!t)throw S("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable(function(){return r.cs(!1)}),new P(R.FAILED_PRECONDITION,Xr);return n(a)}).next(function(e){return r.bs(a).next(function(){return e})}):r.$s(a).next(function(){return n(a)})}).then(function(e){return a.raiseOnCommittedEvent(),e})}},{key:"$s",value:function(e){var t=this;return Na(e).get("owner").next(function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,Sa)})}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Na(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=Na(e);return n.get("owner").next(function(e){return t.Ps(e)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Zr.resolve()})}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(S("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()})},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),Object(y.w)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return E("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return S("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){S("Failed to set zombie client id.",e)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}},{key:"started",get:function(){return this.ns}}],[{key:"vt",value:function(){return ti.vt()}}]),e}();function Na(e){return li(e,"owner")}function Ca(e){return li(e,"clientMetadata")}function Aa(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Da=function(){function e(t,n,r){Object(f.a)(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return Object(h.a)(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Us(e,t,r)})}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next(function(e){var t,r=g(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"qs",value:function(e,t){e.forEach(function(e,n){var r,i=g(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next(function(t){return n.Gs(e,t).next(function(){return t})})}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.qs(t,e)})}},{key:"Qs",value:function(e,t,n){return function(e){return we.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Dt(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new we(t)).next(function(e){var t=An();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=An();return this.indexManager.getCollectionParents(e,i).next(function(o){return Zr.forEach(o,function(o){var u=function(e,t){return new St(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next(function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=g(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Ge.newInvalidDocument(s),r=r.insert(s,c)),hn(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}}).next(function(){return r.forEach(function(e,n){Vt(t,n)||(r=r.remove(e))}),r})}}]),e}(),La=function(){function e(t,n,r,i){Object(f.a)(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return Object(h.a)(e,null,[{key:"Ys",value:function(t,n){var r,i=Pn(),a=Pn(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ra=function(){function e(){Object(f.a)(this,e),this.Xs=!1}return Object(h.a)(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next(function(a){return a||i.ei(e,t,r,n)}).next(function(n){return n||i.ni(e,t)})}},{key:"ti",value:function(e,t){return Zr.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Z.min())?this.ni(e,t):this.Zs.Ks(e,n).next(function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(I()<=v.a.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ut(t)),i.ri(e,o,t,$e(r,-1)))})}},{key:"si",value:function(e,t){var n=new rt(zt(e));return t.forEach(function(t,r){Vt(e,r)&&(n=n.add(r))}),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return I()<=v.a.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",Ut(t)),this.Zs.Qs(e,t,Je.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next(function(e){return t.forEach(function(t){e=e.insert(t.key,t)}),e})}}]),e}(),Pa=function(){function e(t,n,r,i){Object(f.a)(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new et(Y),this.ai=new Sn(function(e){return st(e)},ct),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return Object(h.a)(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Da(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.ui)})}}]),e}();function Ma(e,t,n,r){return new Pa(e,t,n,r)}function Fa(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=Object(o.a)(k().mark(function e(t,n){var r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.Bs.getAllMutationBatches(e).next(function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)}).next(function(n){var i,a=[],o=[],u=Pn(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=g(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=g(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=g(v.mutations);try{for(m.s();!(y=m.n()).done;){var b=y.value;u=u.add(b.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next(function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Va(e,t){var n=L(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Zr.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);A(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(function(){return e.Bs.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.Bs.performConsistencyCheck(e)}).next(function(){return n.fi.Ks(e,r)})})}function Ba(e){var t=L(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.fs.getLastRemoteSnapshotVersion(e)})}function za(e,t){var n=L(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach(function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next(function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)}));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(ce.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}});var u=Nn();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(qa(e,a,t.documentUpdates).next(function(e){u=e})),!r.isEqual(Z.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next(function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(s)}return Zr.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.fi.Gs(e,u)}).next(function(){return u})}).then(function(e){return n.ui=i,e})}function qa(e,t,n){var r=Pn();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=Nn();return n.forEach(function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Z.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):E("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),r})}function Ga(e,t){var n=L(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)})}function Ka(e,t){var n=L(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.fs.getTargetData(e,t).next(function(i){return i?(r=i,Zr.resolve(r)):n.fs.allocateTargetId(e).next(function(i){return r=new pi(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e})}function Wa(e,t,n){return Ha.apply(this,arguments)}function Ha(){return(Ha=Object(o.a)(k().mark(function e(t,n,r){var i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=L(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ii(e.t1)){e.next=12;break}throw e.t1;case 12:E("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Qa(e,t,n){var r=L(e),i=Z.min(),a=Pn();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=L(e),i=r.ai.get(n);return void 0!==i?Zr.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Rt(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.oi.Qs(e,t,n?i:Z.min(),n?a:Pn())}).next(function(e){return Xa(r,Bt(t),e),{documents:e,_i:a}})})}function Ya(e,t){var n=L(e),r=L(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Et(e,t).next(function(e){return e?e.target:null})})}function $a(e,t){var n=L(e),r=n.ci.get(t)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",function(e){return n.hi.getAllFromCollectionGroup(e,t,$e(r,-1),Number.MAX_SAFE_INTEGER)}).then(function(e){return Xa(n,t,e),e})}function Xa(e,t,n){var r=Z.min();n.forEach(function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ci.set(t,r)}function Ja(e,t,n,r){return Za.apply(this,arguments)}function Za(){return(Za=Object(o.a)(k().mark(function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=L(t),o=Pn(),u=Nn(),s=g(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ka(a,function(e){return Rt(Nt(ie.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return qa(e,d,u).next(function(t){return d.apply(e),t}).next(function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next(function(){return a.fs.addMatchingKeys(e,o,p.targetId)}).next(function(){return a.fi.Gs(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eo(e,t){return to.apply(this,arguments)}function to(){return(to=Object(o.a)(k().mark(function e(t,n){var r,i,a,o=arguments;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Pn(),e.next=3,Ka(t,Rt(xi(n.bundledQuery)));case 3:return i=e.sent,a=L(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=er(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(ce.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next(function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.fs.addMatchingKeys(e,r,i.targetId)}).next(function(){return a._s.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var no=function(){function e(t){Object(f.a)(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return Object(h.a)(e,[{key:"getBundleMetadata",value:function(e,t){return Zr.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:er(n.createTime)}),Zr.resolve()}},{key:"getNamedQuery",value:function(e,t){return Zr.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:xi(e.bundledQuery),readTime:er(e.readTime)}}(t)),Zr.resolve()}}]),e}(),ro=function(){function e(){Object(f.a)(this,e),this.overlays=new et(we.comparator),this.Ii=new Map}return Object(h.a)(e,[{key:"getOverlay",value:function(e,t){return Zr.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.Xt(e,t,i)}),Zr.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.Ii.delete(n)),Zr.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Dn(),i=t.length+1,a=new we(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Zr.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new et(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Dn(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Dn(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return s.set(e,t)}),!(s.size()>=r)););return Zr.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new di(t,n));var a=this.Ii.get(t);void 0===a&&(a=Pn(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),io=function(){function e(){Object(f.a)(this,e),this.Ti=new rt(ao.Ei),this.Ai=new rt(ao.Ri)}return Object(h.a)(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ao(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.Pi(new ao(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"vi",value:function(e){var t=this,n=new we(new ie([])),r=new ao(n,e),i=new ao(n,e+1),a=[];return this.Ai.forEachInRange([r,i],function(e){t.Pi(e),a.push(e.key)}),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach(function(t){return e.Pi(t)})}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new we(new ie([])),n=new ao(t,e),r=new ao(t,e+1),i=Pn();return this.Ai.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new ao(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ao=function(){function e(t,n){Object(f.a)(this,e),this.key=t,this.Ci=n}return Object(h.a)(e,null,[{key:"Ei",value:function(e,t){return we.comparator(e.key,t.key)||Y(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Y(e.Ci,t.Ci)||we.comparator(e.key,t.key)}}]),e}(),oo=function(){function e(t,n){Object(f.a)(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new rt(ao.Ei)}return Object(h.a)(e,[{key:"checkEmpty",value:function(e){return Zr.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new fi(i,t,n,r);this.Bs.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new ao(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Zr.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Zr.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Zr.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Zr.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Zr.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ao(t,0),i=new ao(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],function(e){var t=n.ki(e.Ci);a.push(t)}),Zr.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new rt(Y);return t.forEach(function(e){var t=new ao(e,0),i=new ao(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],function(e){r=r.add(e.Ci)})}),Zr.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;we.isDocumentKey(i)||(i=i.child(""));var a=new ao(new we(i),0),o=new rt(Y);return this.Ni.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)},a),Zr.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ki(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;A(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Zr.forEach(t.mutations,function(i){var a=new ao(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.Ni=r})}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ao(t,0),r=this.Ni.firstAfterOrEqual(n);return Zr.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Zr.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),uo=function(){function e(t){Object(f.a)(this,e),this.$i=t,this.docs=new et(we.comparator),this.size=0}return Object(h.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Zr.resolve(n?n.document.mutableCopy():Ge.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Nn();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ge.newInvalidDocument(e))}),Zr.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Nn(),i=new we(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Ze(Xe(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Zr.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){C()}},{key:"Bi",value:function(e,t){return Zr.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new so(this)}},{key:"getSize",value:function(e){return Zr.resolve(this.size)}}]),e}(),so=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).Kn=e,n}return Object(c.a)(t,e),Object(h.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)}),Zr.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),t}(ga),co=function(){function e(t){Object(f.a)(this,e),this.persistence=t,this.Li=new Sn(function(e){return st(e)},ct),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Ui=0,this.qi=new io,this.targetCount=0,this.Ki=aa.gn()}return Object(h.a)(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach(function(e,n){return t(n)}),Zr.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Zr.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Zr.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Zr.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Zr.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Zr.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Zr.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Zr.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach(function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Zr.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return Zr.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Zr.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Zr.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),Zr.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Zr.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Zr.resolve(n)}},{key:"containsKey",value:function(e,t){return Zr.resolve(this.qi.containsKey(t))}}]),e}(),lo=function(){function e(t,n){var r=this;Object(f.a)(this,e),this.Gi={},this.overlays={},this.es=new W(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new co(this),this.indexManager=new zi,this.ds=new uo(function(e){return r.referenceDelegate.Qi(e)}),this.M=new vi(n),this._s=new no(this.M)}return Object(h.a)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ro,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new oo(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;E("MemoryPersistence","Starting transaction:",e);var i=new fo(this.es.next());return this.referenceDelegate.ji(),n(i).next(function(e){return r.referenceDelegate.Wi(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"zi",value:function(e,t){return Zr.or(Object.values(this.Gi).map(function(n){return function(){return n.containsKey(e,t)}}))}},{key:"started",get:function(){return this.ns}}]),e}(),fo=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).currentSequenceNumber=e,n}return Object(c.a)(t,e),t}(Jr),ho=function(){function e(t){Object(f.a)(this,e),this.persistence=t,this.Hi=new io,this.Ji=null}return Object(h.a)(e,[{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Zr.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Zr.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Zr.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach(function(e){return n.Xi.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.Xi.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zr.forEach(this.Xi,function(r){var i=we.fromPath(r);return t.Zi(e,i).next(function(e){e||n.removeEntry(i,Z.min())})}).next(function(){return t.Ji=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next(function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())})}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Zr.or([function(){return Zr.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}},{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw C()}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function po(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vo(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function yo(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var mo=function(){function e(t,n,r,i){Object(f.a)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Object(h.a)(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new P(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(S("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),go=function(){function e(t,n,r){Object(f.a)(this,e),this.targetId=t,this.state=n,this.error=r}return Object(h.a)(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new P(i.error.code,i.error.message))),a?new e(t,i.state,r):(S("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),bo=function(){function e(t,n){Object(f.a)(this,e),this.clientId=t,this.activeTargetIds=n}return Object(h.a)(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Fn(),o=0;i&&o<r.activeTargetIds.length;++o)i=ke(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(S("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ko=function(){function e(t,n){Object(f.a)(this,e),this.clientId=t,this.onlineState=n}return Object(h.a)(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(S("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wo=function(){function e(){Object(f.a)(this,e),this.activeTargetIds=Fn()}return Object(h.a)(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Oo=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new et(Y),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=po(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new wo),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return Object(h.a)(e,[{key:"start",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=g(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(po(this.persistenceKey,i)))&&(o=bo.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=g(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0;case 28:case"end":return e.stop()}},e,this,[[4,16,19,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(yo(this.persistenceKey,e));if(n){var r=go.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(yo(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.Ar(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return E("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){E("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void S("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Object(o.a)(k().mark(function e(){var r,i,a,o,u,s,c;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}(s=function(e){var t=W.A;if(null!=e)try{var n=JSON.parse(e);A("number"==typeof n),t=n}catch(e){S("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==W.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map(function(e){return t.syncEngine.Fr(e)}));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}},e)})))}}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new mo(this.currentUser,e,t,n),i=vo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=vo(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=yo(this.persistenceKey,e),i=new go(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return bo.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mo.tr(new O(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return go.tr(r,t)}},{key:"pr",value:function(e){return ko.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:E("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||u.push(e)}),this.syncEngine.Lr(o,u).then(function(){n.ar=r})}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Fn();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}},{key:"Rr",get:function(){return this.ar.get(this.ir)}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),xo=function(){function e(){Object(f.a)(this,e),this.Ur=new wo,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Object(h.a)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new wo,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),_o=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Io=function(){function e(){var t=this;Object(f.a)(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return Object(h.a)(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),jo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Eo=function(){function e(t){Object(f.a)(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return Object(h.a)(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),So=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(c.a)(t,e),Object(h.a)(t,[{key:"fo",value:function(e,t,n,r){return new Promise(function(i,a){var o=new m.g;o.listenOnce(m.c.COMPLETE,function(){try{switch(o.getLastErrorCode()){case m.a.NO_ERROR:var t=o.getResponseJson();E("Connection","XHR received:",JSON.stringify(t)),i(t);break;case m.a.TIMEOUT:E("Connection",'RPC "'+e+'" timed out'),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case m.a.HTTP_ERROR:var n=o.getStatus();if(E("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=r.status.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(t)>=0?t:R.UNKNOWN}();a(new P(u,r.message))}else a(new P(R.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{E("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);o.send(t,"POST",u,n,15)})}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(m.h)(),a=Object(m.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new m.d({})),this.lo(o.initMessageHeaders,t,n),Object(y.t)()||Object(y.v)()||Object(y.p)()||Object(y.r)()||Object(y.x)()||Object(y.o)()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");E("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Eo({Jr:function(e){l?E("Connection","Not sending because WebChannel is closed:",e):(c||(E("Connection","Opening WebChannel transport."),s.open(),c=!0),E("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(s,m.f.EventType.OPEN,function(){l||E("Connection","WebChannel transport opened.")}),h(s,m.f.EventType.CLOSE,function(){l||(l=!0,E("Connection","WebChannel transport closed"),f.ro())}),h(s,m.f.EventType.ERROR,function(e){l||(l=!0,T("Connection","WebChannel transport errored:",e),f.ro(new P(R.UNAVAILABLE,"The operation could not be completed")))}),h(s,m.f.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];A(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){E("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=wn[a];if(void 0!==t)return En(t)}(),u=i.message;void 0===o&&(o=R.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new P(o,u)),s.close()}else E("Connection","WebChannel received:",n),f.oo(n)}}),h(a,m.b.STAT_EVENT,function(e){e.stat===m.e.PROXY?E("Connection","Detected buffering proxy"):e.stat===m.e.NOPROXY&&E("Connection","Detected no buffering proxy")}),setTimeout(function(){f.io()},0),f}}]),t}(function(){function e(t){Object(f.a)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Object(h.a)(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);E("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then(function(e){return E("RestConnection","Received: ",e),e},function(t){throw T("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t})}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+x,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"ho",value:function(e,t){var n=jo[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function To(){return"undefined"!=typeof window?window:null}function No(){return"undefined"!=typeof document?document:null}function Co(e){return new $n(e,!0)}var Ao=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Object(f.a)(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Object(h.a)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,function(){return t.Eo=Date.now(),e()}),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Do=function(){function e(t,n,r,i,a,o,u,s){Object(f.a)(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Ao(t,n)}return Object(h.a)(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,function(){return e.Bo()}))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=Object(o.a)(k().mark(function e(t,n){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(S(n.toString()),S("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===R.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var r=Object(a.a)(t,2),i=r[0],o=r[1];e.Do===n&&e.Qo(i,o)},function(n){t(function(){var t=new P(R.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)})})}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(function(){r(function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,function(){return n.Mo()&&(n.state=3),Promise.resolve()}),n.listener.Xr()})}),this.stream.eo(function(e){r(function(){return n.jo(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"jo",value:function(e){return E("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget(function(){return t.Do===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),Lo=function(e){function t(e,n,r,i,a,o){var c;return Object(f.a)(this,t),(c=Object(u.a)(this,Object(s.a)(t).call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o))).M=a,c}return Object(c.a)(t,e),Object(h.a)(t,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:C()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(A(void 0===t||"string"==typeof t),ce.fromBase64String(t||"")):(A(void 0===t||t instanceof Uint8Array),ce.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?R.UNKNOWN:En(e.code);return new P(t,e.message||"")}(o);n=new qn(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ir(e,s.document.name),l=er(s.document.updateTime),f=new ze({mapValue:{fields:s.document.fields}}),h=Ge.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Bn(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=ir(e,v.document),m=v.readTime?er(v.readTime):Z.min(),g=Ge.newNoDocument(y,m),b=v.removedTargetIds||[];n=new Bn([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=ir(e,k.document),O=k.removedTargetIds||[];n=new Bn([],O,w,null)}else{if(!("filter"in t))return C();t.filter;var x=t.filter;x.targetId;var _=x.count||0,I=new In(_),j=x.targetId;n=new zn(j,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Z.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Z.min():t.readTime?er(t.readTime):Z.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=ur(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=lt(r)?{documents:pr(e,r)}:{query:vr(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Jn(e,t.resumeToken):t.snapshotVersion.compareTo(Z.min())>0&&(n.readTime=Xn(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return C()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=ur(this.M),t.removeTarget=e,this.Lo(t)}}]),t}(Do),Ro=function(e){function t(e,n,r,i,a,o){var c;return Object(f.a)(this,t),(c=Object(u.a)(this,Object(s.a)(t).call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o))).M=a,c.Yo=!1,c}return Object(c.a)(t,e),Object(h.a)(t,[{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Object(i.a)(Object(s.a)(t.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(A(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(A(void 0!==t),e.map(function(e){return function(e,t){var n=e.updateTime?er(e.updateTime):er(t);return n.isEqual(Z.min())&&(n=er(t)),new un(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=er(e.commitTime);return this.listener.tu(n,t)}return A(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=ur(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return hr(t.M,e)})};this.Lo(n)}},{key:"Xo",get:function(){return this.Yo}}]),t}(Do),Po=function(e){function t(e,n,r,i){var a;return Object(f.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this))).authCredentials=e,a.appCheckCredentials=n,a.So=r,a.M=i,a.su=!1,a}return Object(c.a)(t,e),Object(h.a)(t,[{key:"iu",value:function(){if(this.su)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var o=Object(a.a)(i,2),u=o[0],s=o[1];return r.So.co(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new P(R.UNKNOWN,e.toString())})}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var o=Object(a.a)(i,2),u=o[0],s=o[1];return r.So._o(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new P(R.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.su=!0}}]),t}(function(){return function e(){Object(f.a)(this,e)}}()),Mo=function(){function e(t,n){Object(f.a)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return Object(h.a)(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()}))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(S(t),this.uu=!1):E("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Fo=function e(t,n,r,i,a){var u=this;Object(f.a)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(function(e){r.enqueueAndForget(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Yo(u),!e.t0){e.next=5;break}return E("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=L(t)).wu.add(4),e.next=4,Bo(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,Uo(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}},e)})))}),this.yu=new Mo(r,i)};function Uo(e){return Vo.apply(this,arguments)}function Vo(){return(Vo=Object(o.a)(k().mark(function e(t){var n,r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Yo(t)){e.next=18;break}n=g(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Bo(e){return zo.apply(this,arguments)}function zo(){return(zo=Object(o.a)(k().mark(function e(t){var n,r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function qo(e,t){var n=L(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Qo(n)?Ho(n):_u(n).Mo()&&Ko(n,t))}function Go(e,t){var n=L(e),r=_u(n);n._u.delete(t),r.Mo()&&Wo(n,t),0===n._u.size&&(r.Mo()?r.$o():Yo(n)&&n.yu.set("Unknown"))}function Ko(e,t){e.pu.Z(t.targetId),_u(e).Ho(t)}function Wo(e,t){e.pu.Z(t),_u(e).Jo(t)}function Ho(e){e.pu=new Kn({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),_u(e).start(),e.yu.au()}function Qo(e){return Yo(e)&&!_u(e).ko()&&e._u.size>0}function Yo(e){return 0===L(e).wu.size}function $o(e){e.pu=void 0}function Xo(e){return Jo.apply(this,arguments)}function Jo(){return(Jo=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach(function(e,n){Ko(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return(eu=Object(o.a)(k().mark(function e(t,n){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$o(t),Qo(t)?(t.yu.lu(n),Ho(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tu(e,t,n){return nu.apply(this,arguments)}function nu(){return(nu=Object(o.a)(k().mark(function e(t,n,r){var i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof qn&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),E("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ru(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Bn?t.pu.ut(n):n instanceof zn?t.pu._t(n):t.pu.ht(n),r.isEqual(Z.min())){e.next=29;break}return e.prev=14,e.next=17,Ba(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(ce.EMPTY_BYTE_STRING,n.snapshotVersion)),Wo(e,t);var r=new pi(n.target,t,1,n.sequenceNumber);Ko(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),E("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ru(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function ru(e,t,n){return iu.apply(this,arguments)}function iu(){return(iu=Object(o.a)(k().mark(function e(t,n,r){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ii(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Bo(t);case 5:t.yu.set("Offline"),r||(r=function(){return Ba(t.localStore)}),t.asyncQueue.enqueueRetryable(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,Uo(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function au(e,t){return t().catch(function(n){return ru(e,n,t)})}function ou(e){return uu.apply(this,arguments)}function uu(){return(uu=Object(o.a)(k().mark(function e(t){var n,r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=L(t),r=Iu(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!su(n)){e.next=19;break}return e.prev=3,e.next=6,Ga(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,cu(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ru(n,e.t0);case 17:e.next=2;break;case 19:lu(n)&&fu(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function su(e){return Yo(e)&&e.du.length<10}function cu(e,t){e.du.push(t);var n=Iu(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function lu(e){return Yo(e)&&!Iu(e).ko()&&e.du.length>0}function fu(e){Iu(e).start()}function hu(e){return du.apply(this,arguments)}function du(){return(du=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Iu(t).nu();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pu(e){return vu.apply(this,arguments)}function vu(){return(vu=Object(o.a)(k().mark(function e(t){var n,r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Iu(t),r=g(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yu(e,t,n){return mu.apply(this,arguments)}function mu(){return(mu=Object(o.a)(k().mark(function e(t,n,r){var i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=hi.from(i,n,r),e.next=3,au(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,ou(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gu(e,t){return bu.apply(this,arguments)}function bu(){return(bu=Object(o.a)(k().mark(function e(t,n){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Iu(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!jn(i=n.code)||i===R.ABORTED){e.next=7;break}return r=t.du.shift(),Iu(t).Fo(),e.next=5,au(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,ou(t);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:lu(t)&&fu(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ku(e,t){return wu.apply(this,arguments)}function wu(){return(wu=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=L(t)).asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials"),i=Yo(r),r.wu.add(3),e.next=6,Bo(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,Uo(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ou(e,t){return xu.apply(this,arguments)}function xu(){return(xu=Object(o.a)(k().mark(function e(t,n){var r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,Uo(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Bo(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _u(e){return e.Iu||(e.Iu=function(e,t,n){var r=L(e);return r.iu(),new Lo(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Xo.bind(null,e),eo:Zo.bind(null,e),zo:tu.bind(null,e)}),e.mu.push(function(){var t=Object(o.a)(k().mark(function t(n){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Qo(e)?Ho(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:$o(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Iu}function Iu(e){return e.Tu||(e.Tu=function(e,t,n){var r=L(e);return r.iu(),new Ro(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:hu.bind(null,e),eo:gu.bind(null,e),eu:pu.bind(null,e),tu:yu.bind(null,e)}),e.mu.push(function(){var t=Object(o.a)(k().mark(function t(n){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,ou(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(E("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Tu}var ju=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return Object(h.a)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Eu(e,t){if(S("AsyncQueue","".concat(t,": ").concat(e)),ii(e))return new P(R.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Su=function(){function e(t){Object(f.a)(this,e),this.comparator=t?function(e,n){return t(e,n)||we.comparator(e.key,n.key)}:function(e,t){return we.comparator(e.key,t.key)},this.keyedMap=An(),this.sortedSet=new et(this.comparator)}return Object(h.a)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},{key:"size",get:function(){return this.sortedSet.size}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Tu=function(){function e(){Object(f.a)(this,e),this.Eu=new et(we.comparator)}return Object(h.a)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):C():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),Nu=function(){function e(t,n,r,i,a,o,u,s){Object(f.a)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Object(h.a)(e,[{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}},{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,Su.emptySet(n),a,r,i,!0,!1)}}]),e}(),Cu=function e(){Object(f.a)(this,e),this.Ru=void 0,this.listeners=[]},Au=function e(){Object(f.a)(this,e),this.queries=new Sn(function(e){return Ft(e)},Mt),this.onlineState="Unknown",this.bu=new Set};function Du(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Cu),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Eu(e.t0,"Initialization of query '".concat(Ut(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&Mu(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function Ru(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mu(e){e.bu.forEach(function(e){e.next()})}var Fu=function(){function e(t,n,r){Object(f.a)(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return Object(h.a)(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Nu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=Nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),Uu=function(){function e(t,n){Object(f.a)(this,e),this.payload=t,this.byteLength=n}return Object(h.a)(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),Vu=function(){function e(t){Object(f.a)(this,e),this.M=t}return Object(h.a)(e,[{key:"wi",value:function(e){return ir(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?lr(this.M,e.document,!1):Ge.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return er(e)}}]),e}(),Bu=function(){function e(t,n,r){Object(f.a)(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zu(t)}return Object(h.a)(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=ie.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Vu(this.M),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=g(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Pn()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n,r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja(this.localStore,new Vu(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=g(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,eo(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}},e,this,[[5,15,18,21]])}));return function(){return e.apply(this,arguments)}}()}]),e}();function zu(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var qu=function e(t){Object(f.a)(this,e),this.key=t},Gu=function e(t){Object(f.a)(this,e),this.key=t},Ku=function(){function e(t,n){Object(f.a)(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=Pn(),this.mutatedKeys=Pn(),this.Gu=zt(t),this.Qu=new Su(this.Gu)}return Object(h.a)(e,[{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new Tu,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),f=Vt(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)}),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Nu(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tu,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.Uu=t.Uu.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.Uu=t.Uu.delete(e)}),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Pn(),this.Qu.forEach(function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))});var n=[];return t.forEach(function(t){e.Ku.has(t)||n.push(new Gu(t))}),this.Ku.forEach(function(e){t.has(e)||n.push(new qu(e))}),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=Pn();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return Nu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}},{key:"ju",get:function(){return this.Uu}}]),e}(),Wu=function e(t,n,r){Object(f.a)(this,e),this.query=t,this.targetId=n,this.view=r},Hu=function e(t){Object(f.a)(this,e),this.key=t,this.na=!1},Qu=function(){function e(t,n,r,i,a,o){Object(f.a)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new Sn(function(e){return Ft(e)},Mt),this.ra=new Map,this.oa=new Set,this.ua=new et(we.comparator),this.aa=new Map,this.ca=new io,this.ha={},this.la=new Map,this.fa=aa.yn(),this.onlineState="Unknown",this.da=void 0}return Object(h.a)(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Yu(e,t){return $u.apply(this,arguments)}function $u(){return($u=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fs(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Ka(r.localStore,Rt(n));case 8:return u=e.sent,r.isPrimaryClient&&qo(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Xu(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xu(e,t,n,r){return Ju.apply(this,arguments)}function Ju(){return(Ju=Object(o.a)(k().mark(function e(t,n,r,i){var a,u,s,c,l,f;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=Object(o.a)(k().mark(function e(t,n,r,i){var a,o,u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Qa(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Wu(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(vs(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Qa(t.localStore,n,!0);case 3:return a=e.sent,u=new Ku(n,a._i),s=u.Wu(a.documents),c=Vn.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=u.applyChanges(s,t.isPrimaryClient,c),vs(t,r,l.Xu),f=new Wu(n,r,u),e.abrupt("return",(t.ia.set(n,f),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zu(e,t){return es.apply(this,arguments)}function es(){return(es=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter(function(e){return!Mt(e,n)})),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Wa(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Go(r.remoteStore,i.targetId),ds(r,i.targetId)}).catch(la);case 9:e.next=14;break;case 11:return ds(r,i.targetId),e.next=14,Wa(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ts(e,t,n){return ns.apply(this,arguments)}function ns(){return(ns=Object(o.a)(k().mark(function e(t,n,r){var i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Us(t),e.prev=1,e.next=4,function(e,t){var n,r=L(e),i=J.now(),a=t.reduce(function(e,t){return e.add(t.key)},Pn());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.fi.Ks(e,a).next(function(a){n=a;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=dn(c,n.get(c.key));null!=l&&u.push(new mn(c.key,l,qe(l.value.mapValue),sn.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new et(Y)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,gs(i,a.changes);case 9:return e.next=11,ou(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Eu(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return(is=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),e.prev=1,e.next=4,za(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.aa.get(t);n&&(A(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?A(n.na):e.removedDocuments.size>0&&(A(n.na),n.na=!1))}),e.next=8,gs(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,la(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function as(e,t,n){var r=L(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach(function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=L(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&Mu(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function os(){return(os=Object(o.a)(k().mark(function e(t,n,r){var i,a,o,u,s,c;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=L(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new et(we.comparator)).insert(o,Ge.newNoDocument(o,Z.min())),s=Pn().add(o),c=new Un(Z.min(),new Map,new rt(Y),u,s),e.next=9,rs(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),ms(i),e.next=16;break;case 14:return e.next=16,Wa(i.localStore,n,!1).then(function(){return ds(i,n,r)}).catch(la);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function us(){return(us=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),i=n.batch.batchId,e.prev=1,e.next=4,Va(r.localStore,n);case 4:return a=e.sent,hs(r,i,null),fs(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,gs(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,la(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function ss(){return(ss=Object(o.a)(k().mark(function e(t,n,r){var i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=L(t),e.prev=1,e.next=4,function(e,t){var n=L(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.Bs.lookupMutationBatch(e,t).next(function(t){return A(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)}).next(function(){return n.Bs.performConsistencyCheck(e)}).next(function(){return n.fi.Ks(e,r)})})}(i.localStore,n);case 4:return a=e.sent,hs(i,n,r),fs(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,gs(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,la(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return(ls=Object(o.a)(k().mark(function e(t,n){var r,i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Yo((r=L(t)).remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=L(r.localStore);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)})}();case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Eu(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function fs(e,t){(e.la.get(t)||[]).forEach(function(e){e.resolve()}),e.la.delete(t)}function hs(e,t,n){var r=L(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function ds(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach(function(t){e.ca.containsKey(t)||ps(e,t)})}function ps(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Go(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),ms(e))}function vs(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof qu?(e.ca.addReference(a.key,t),ys(e,a)):a instanceof Gu?(E("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||ps(e,a.key)):C()}}catch(o){i.e(o)}finally{i.f()}}function ys(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(E("SyncEngine","New document in limbo: "+n),e.oa.add(r),ms(e))}function ms(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new we(ie.fromString(t)),r=e.fa.next();e.aa.set(r,new Hu(n)),e.ua=e.ua.insert(n,r),qo(e.remoteStore,new pi(Rt(Nt(n.path)),r,2,W.A))}}function gs(e,t,n){return bs.apply(this,arguments)}function bs(){return(bs=Object(o.a)(k().mark(function e(t,n,r){var i,a,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=L(t),a=[],u=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach(function(e,t){s.push(i._a(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=La.Ys(t.targetId,e);u.push(n)}}))}),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s,c,l;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return Zr.forEach(n,function(t){return Zr.forEach(t.Hs,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return Zr.forEach(t.Js,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ii(e.t0)){e.next=10;break}throw e.t0;case 10:E("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ks(e,t){return ws.apply(this,arguments)}function ws(){return(ws=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=L(t)).currentUser.isEqual(n)){e.next=11;break}return E("SyncEngine","User change. New user:",n.toKey()),e.next=5,Fa(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach(function(e){e.forEach(function(e){e.reject(new P(R.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,gs(r,i.di);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Os(e,t){return xs.apply(this,arguments)}function xs(){return(xs=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),e.next=3,Qa(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&vs(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _s(e,t){return Is.apply(this,arguments)}function Is(){return(Is=Object(o.a)(k().mark(function e(t,n){var r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),e.abrupt("return",$a(r.localStore,n).then(function(e){return gs(r,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function js(e,t,n,r){return Es.apply(this,arguments)}function Es(){return(Es=Object(o.a)(k().mark(function e(t,n,r,i){var a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=L(t),e.next=3,function(e,t){var n=L(e),r=L(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.fn(e,t).next(function(t){return t?n.fi.Ks(e,t):Zr.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ou(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(hs(a,n,i||null),fs(a,n),function(e,t){L(L(e).Bs)._n(t)}(a.localStore,n)):C();case 11:return e.next=13,gs(a,o);case 13:e.next=16;break;case 15:E("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ss(e,t){return Ts.apply(this,arguments)}function Ts(){return(Ts=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s,c,l;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fs(r=L(t)),Us(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Ns(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,Ou(r.remoteStore,!0);case 9:o=g(a);try{for(o.s();!(u=o.n()).done;)s=u.value,qo(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then(function(){return ds(r,t),Wa(r.localStore,t,!0)}),Go(r.remoteStore,t)}),e.next=19,l;case 19:return e.next=21,Ns(r,c);case 21:return function(e){var t=L(r);t.aa.forEach(function(e,n){Go(t.remoteStore,n)}),t.ca.Si(),t.aa=new Map,t.ua=new et(we.comparator)}(),r.da=!1,e.next=25,Ou(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ns(e,t,n){return Cs.apply(this,arguments)}function Cs(){return(Cs=Object(o.a)(k().mark(function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=L(t),a=[],o=[],u=g(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Ka(i.localStore,Rt(f[0]));case 11:l=e.sent,h=g(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,Os(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ya(i.localStore,c);case 36:return m=e.sent,e.next=39,Ka(i.localStore,m);case 39:return l=e.sent,e.next=42,Xu(i,As(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function As(e){return Tt(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ds(e){var t=L(e);return L(L(t.localStore).persistence).Fs()}function Ls(e,t,n,r){return Rs.apply(this,arguments)}function Rs(){return(Rs=Object(o.a)(k().mark(function e(t,n,r,i){var a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=L(t)).da){e.next=3;break}return e.abrupt("return",void E("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0?8:"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,$a(a.localStore,Bt(o[0]));case 10:return u=e.sent,s=Un.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,gs(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Wa(a.localStore,n,!0);case 17:return ds(a,n,i),e.abrupt("break",20);case 19:C();case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ps(e,t,n){return Ms.apply(this,arguments)}function Ms(){return(Ms=Object(o.a)(k().mark(function e(t,n,r){var i,a,o,u,s,c,l,f,h;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Fs(t)).da){e.next=45;break}a=g(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return E("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ya(i.localStore,u);case 12:return s=e.sent,e.next=15,Ka(i.localStore,s);case 15:return c=e.sent,e.next=18,Xu(i,As(s),c.targetId,!1);case 18:qo(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=g(r),e.prev=30,h=k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Wa(i.localStore,t,!1).then(function(){Go(i.remoteStore,t),ds(i,t)}).catch(la);case 5:case"end":return e.stop()}},e)}),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function Fs(e){var t=L(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rs.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(e,t){var n=L(e),r=n.aa.get(t);if(r&&r.na)return Pn().add(r.key);var i=Pn(),a=n.ra.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(e,t,n){return os.apply(this,arguments)}.bind(null,t),t.sa.zo=function(e,t){var n,r=L(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.listeners);try{for(l.s();!(c=l.n()).done;)c.value.Vu(o)&&(i=!0)}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&Mu(r)}.bind(null,t.eventManager),t.sa.wa=function(e,t,n){var r=L(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;)a.value.onError(n)}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}.bind(null,t.eventManager),t}function Us(e){var t=L(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(e,t){return us.apply(this,arguments)}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=function(e,t,n){return ss.apply(this,arguments)}.bind(null,t),t}function Vs(e,t,n){var r=L(e);(function(){var e=Object(o.a)(k().mark(function e(t,n,r){var i,a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=L(e),r=er(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n._s.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(zu(i)),a=new Bu(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,gs(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=L(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n._s.saveBundleMetadata(e,t)})}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(T("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}},e,null,[[0,37]])}));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then(function(e){r.sharedClientState.notifyBundleLoaded(e)})}var Bs=function(){function e(){Object(f.a)(this,e),this.synchronizeTabs=!1}return Object(h.a)(e,[{key:"initialize",value:function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Co(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return Ma(this.persistence,new Ra,e.initialUser,this.M)}},{key:"ya",value:function(e){return new lo(ho.Yi,this.M)}},{key:"ga",value:function(e){return new xo}},{key:"terminate",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),zs=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).Ta=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"initialize",value:function(){var e=Object(o.a)(k().mark(function e(n){var r=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(s.a)(t.prototype),"initialize",this).call(this,n);case 2:return e.next=4,this.Ta.initialize(this,n);case 4:return e.next=6,Us(this.Ta.syncEngine);case 6:return e.next=8,ou(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return Ma(this.persistence,new Ra,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new pa(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=Aa(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new Ta(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,To(),No(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new xo}}]),t}(Bs),qs=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,n,!1))).Ta=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"initialize",value:function(){var e=Object(o.a)(k().mark(function e(n){var r,a=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(s.a)(t.prototype),"initialize",this).call(this,n);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof Oo,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:js.bind(null,r),Br:Ls.bind(null,r),Lr:Ps.bind(null,r),Fs:Ds.bind(null,r),Fr:_s.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ss(a.Ta.syncEngine,t);case 2:a.gcScheduler&&(t&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):t||a.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=To();if(!Oo.vt(t))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Aa(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oo(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),t}(zs),Gs=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"initialize",value:function(){var e=Object(o.a)(k().mark(function e(t,n){var r=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return as(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ks.bind(null,this.syncEngine),e.next=12,Ou(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Au}},{key:"createDatastore",value:function(e){var t,n=Co(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new So(t));return function(e,t,n,r){return new Po(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return as(o.syncEngine,e,0)},a=Io.vt()?new Io:new _o,new Fo(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Qu(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L(t),E("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Bo(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Ks(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){var r=Object(o.a)(k().mark(function r(){var i;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}));return function(){return r.apply(this,arguments)}}(),cancel:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ws=function(){function e(t){Object(f.a)(this,e),this.observer=t,this.muted=!1}return Object(h.a)(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Hs=function(){function e(t,n){var r=this;Object(f.a)(this,e),this.Ra=t,this.M=n,this.metadata=new M,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return Object(h.a)(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n,r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new Uu(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Va",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Qs=function(){function e(t){Object(f.a)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Object(h.a)(e,[{key:"lookup",value:function(){var e=Object(o.a)(k().mark(function e(t){var n,r=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),i=ur(r.M)+"/documents",a={documents:n.map(function(e){return rr(r.M,e)})},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach(function(e){var t=fr(r.M,e);u.set(t.key.toString(),t)}),s=[],e.abrupt("return",(n.forEach(function(e){var t=u.get(e.toString());A(!!t),s.push(t)}),s));case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach(function(e){return r.recordVersion(e)}),n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new xn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(e,t){var r=we.fromPath(t);n.mutations.push(new _n(r,n.precondition(r)))}),e.next=7,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(t),i=ur(r.M)+"/documents",a={writes:n.map(function(e){return hr(r.M,e)})},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw C();t=Z.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sn.updateTime(t):sn.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(t)}return sn.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ys=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new Ao(this.asyncQueue,"transaction_retry")}return Object(h.a)(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(Object(o.a)(k().mark(function t(){var n,r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Qs(e.datastore),(r=e.ka(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.Ma(t)})})}).catch(function(t){e.Ma(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!ge(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(function(){return t.Na(),Promise.resolve()})):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!jn(t)}return!1}}]),e}(),$s=function(){function e(t,n,r,i){var a=this;Object(f.a)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=O.UNAUTHENTICATED,this.clientId=Q.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,function(e){return E("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return Object(h.a)(e,[{key:"getConfiguration",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Object(o.a)(k().mark(function n(){var r;return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Eu(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function Xs(e,t){return Js.apply(this,arguments)}function Js(){return(Js=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Fa(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zs(e,t){return ec.apply(this,arguments)}function ec(){return(ec=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tc(t);case 3:return r=e.sent,E("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return ku(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return ku(n.remoteStore,t)}),t.onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tc(e){return nc.apply(this,arguments)}function nc(){return(nc=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return E("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Xs(t,new Bs);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rc(e){return ic.apply(this,arguments)}function ic(){return(ic=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return E("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Zs(t,new Gs);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ac(e){return tc(e).then(function(e){return e.persistence})}function oc(e){return tc(e).then(function(e){return e.localStore})}function uc(e){return rc(e).then(function(e){return e.remoteStore})}function sc(e){return rc(e).then(function(e){return e.syncEngine})}function cc(e){return lc.apply(this,arguments)}function lc(){return(lc=Object(o.a)(k().mark(function e(t){var n,r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rc(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Yu.bind(null,n.syncEngine),r.onUnlisten=Zu.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function i(){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ws({next:function(a){t.enqueueAndForget(function(){return Ru(e,o)});var u=a.docs.has(n);!u&&a.fromCache?i.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Fu(Nt(n.path),a,{includeMetadataChanges:!0,ku:!0});return Du(e,o)},i.next=3,cc(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function hc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function i(){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ws({next:function(n){t.enqueueAndForget(function(){return Ru(e,o)}),n.fromCache&&"server"===r.source?i.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Fu(n,a,{includeMetadataChanges:!0,ku:!0});return Du(e,o)},i.next=3,cc(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var dc=new Map;function pc(e,t,n){if(!n)throw new P(R.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vc(e,t,n,r){if(!0===t&&!0===r)throw new P(R.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function yc(e){if(!we.isDocumentKey(e))throw new P(R.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mc(e){if(we.isDocumentKey(e))throw new P(R.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":C()}function bc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gc(e);throw new P(R.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function kc(e,t){if(t<=0)throw new P(R.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var wc=function(){function e(t){var n;if(Object(f.a)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,vc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Object(h.a)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Oc=function(){function e(t,n,r){Object(f.a)(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wc({}),this._settingsFrozen=!1,t instanceof me?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new me(e.options.projectId)}(t))}return Object(h.a)(e,[{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"gapi":var t=e.client;return A(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new q(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=dc.get(e);t&&(E("ComponentProvider","Removing Datastore"),dc.delete(e),t.terminate())}(this),Promise.resolve()}},{key:"app",get:function(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}}]),e}();function xc(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=bc(e,Oc))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&T("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=O.MOCK_USER;else{o=Object(y.g)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new O(s)}e._authCredentials=new V(new F(o,u))}}var _c=function(){function e(t,n,r){Object(f.a)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object(h.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}},{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new jc(this.firestore,this.converter,this._key.path.popLast())}}]),e}(),Ic=function(){function e(t,n,r){Object(f.a)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Object(h.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),jc=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this,e,n,Nt(r))))._path=r,i.type="collection",i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}},{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new _c(this.firestore,null,new we(e))}}]),t}(Ic);function Ec(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(y.l)(e),pc("collection","path",t),e instanceof Oc){var a=ie.fromString.apply(ie,[t].concat(r));return mc(a),new jc(e,null,a)}if(!(e instanceof _c||e instanceof jc))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ie.fromString.apply(ie,[t].concat(r)));return mc(o),new jc(e.firestore,null,o)}function Sc(e,t){if(e=bc(e,Oc),pc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ic(e,null,function(e){return new St(ie.emptyPath(),e)}(t))}function Tc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(y.l)(e),1===arguments.length&&(t=Q.R()),pc("doc","path",t),e instanceof Oc){var a=ie.fromString.apply(ie,[t].concat(r));return yc(a),new _c(e,null,new we(a))}if(!(e instanceof _c||e instanceof jc))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ie.fromString.apply(ie,[t].concat(r)));return yc(o),new _c(e.firestore,e instanceof jc?e.converter:null,new we(o))}function Nc(e,t){return e=Object(y.l)(e),t=Object(y.l)(t),(e instanceof _c||e instanceof jc)&&(t instanceof _c||t instanceof jc)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Cc(e,t){return e=Object(y.l)(e),t=Object(y.l)(t),e instanceof Ic&&t instanceof Ic&&e.firestore===t.firestore&&Mt(e._query,t._query)&&e.converter===t.converter}var Ac=function(){function e(){var t=this;Object(f.a)(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Ao(this,"async_queue_retry"),this.Qa=function(){var e=No();e&&E("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=No();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return Object(h.a)(e,[{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=No();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise(function(){});var n=new M;return this.Wa(function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.$a.push(e),t.za()})}},{key:"za",value:function(){var e=Object(o.a)(k().mark(function e(){var t=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ii(e.t0)){e.next=12;break}throw e.t0;case 12:E("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro(function(){return t.za()});case 14:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then(function(){return t.qa=!0,e().catch(function(e){throw t.Ua=e,t.qa=!1,S("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.qa=!1,e})});return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=ju.createAndSchedule(this,e,t,n,function(e){return r.Ha(e)});return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&C()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=Object(o.a)(k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=g(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then(function(){t.La.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=g(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()})}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}},{key:"isShuttingDown",get:function(){return this.Ba}}]),e}();function Dc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Lc=function(){function e(){Object(f.a)(this,e),this._progressObserver={},this._taskCompletionResolver=new M,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Object(h.a)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Rc=-1,Pc=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this,e,n,r))).type="firestore",i._queue=new Ac,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_terminate",value:function(){return this._firestoreClient||Uc(this),this._firestoreClient.terminate()}}]),t}(Oc);function Mc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d.getApp)();return Object(d._getProvider)(e,"firestore").getImmediate()}function Fc(e){return e._firestoreClient||Uc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Uc(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ye(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new $s(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Vc(e,t){Yc(e=bc(e,Pc));var n=Fc(e),r=e._freezeSettings(),i=new Gs;return zc(n,i,new zs(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Bc(e){Yc(e=bc(e,Pc));var t=Fc(e),n=e._freezeSettings(),r=new Gs;return zc(t,r,new qs(r,n.cacheSizeBytes))}function zc(e,t,n){var r=new M;return e.asyncQueue.enqueue(Object(o.a)(k().mark(function i(){return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Xs(e,n);case 3:return i.next=5,Zs(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===R.FAILED_PRECONDITION||e.code===R.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function qc(e){if(e._initialized&&!e._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new M;return e._queue.enqueueAndForgetEvenWhileRestricted(Object(o.a)(k().mark(function n(){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ti.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ti.delete(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(Aa(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}function Gc(e){return function(e){var t=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function n(){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=cs,n.next=3,sc(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(Fc(e=bc(e,Pc)))}function Kc(e){return function(e){return e.asyncQueue.enqueue(Object(o.a)(k().mark(function t(){var n,r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ac(e);case 2:return n=t.sent,t.next=5,uc(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=L(r);return t.wu.delete(0),Uo(t)}()));case 7:case"end":return t.stop()}},t)})))}(Fc(e=bc(e,Pc)))}function Wc(e){return function(e){return e.asyncQueue.enqueue(Object(o.a)(k().mark(function t(){var n,r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ac(e);case 2:return n=t.sent,t.next=5,uc(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=L(t)).wu.add(0),e.next=4,Bo(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}},t)})))}(Fc(e=bc(e,Pc)))}function Hc(e,t){var n=Fc(e=bc(e,Pc)),r=new Lc;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Hs(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ks(e,t);if(e instanceof ArrayBuffer)return Ks(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Co(t));e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Vs,t.next=3,sc(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}function Qc(e,t){return function(e,t){return e.asyncQueue.enqueue(Object(o.a)(k().mark(function n(){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=L(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n._s.getNamedQuery(e,t)})},n.next=3,oc(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(Fc(e=bc(e,Pc)),t).then(function(t){return t?new Ic(e,null,t.query):null})}function Yc(e){if(e._initialized||e._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $c=function(){function e(){Object(f.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(n)}return Object(h.a)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Xc=function(){function e(t){Object(f.a)(this,e),this._byteString=t}return Object(h.a)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ce.fromBase64String(t))}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ce.fromUint8Array(t))}}]),e}(),Jc=function e(t){Object(f.a)(this,e),this._methodName=t},Zc=function(){function e(t,n){if(Object(f.a)(this,e),!isFinite(t)||t<-90||t>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object(h.a)(e,[{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}},{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}}]),e}(),el=/^__.*__$/,tl=function(){function e(t,n,r){Object(f.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(h.a)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new yn(e,this.data,t,this.fieldTransforms)}}]),e}(),nl=function(){function e(t,n,r){Object(f.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(h.a)(e,[{key:"toMutation",value:function(e,t){return new mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function rl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}var il=function(){function e(t,n,r,i,a,o){Object(f.a)(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Object(h.a)(e,[{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return _l(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(rl(this.ec)&&el.test(e))throw this.ac('Document fields cannot begin and end with "__"')}},{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}}]),e}(),al=function(){function e(t,n,r){Object(f.a)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Co(t)}return Object(h.a)(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new il({ec:e,methodName:t,hc:n,path:oe.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function ol(e){var t=e._freezeSettings(),n=Co(e._databaseId);return new al(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ul(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);kl("Data must be an object, but it was:",o,r);var u,s,c=gl(r,o);if(a.merge)u=new ue(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=g(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=wl(t,l.value,n);if(!o.contains(d))throw new P(R.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Il(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new ue(f),s=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,s=o.fieldTransforms;return new tl(new ze(c),u,s)}var sl=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Jc);function cl(e,t,n){return new il({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var ll=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_toFieldTransform",value:function(e){return new on(e.path,new Xt)}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Jc),fl=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e))).fc=n,r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_toFieldTransform",value:function(e){var t=cl(this,e,!0),n=this.fc.map(function(e){return ml(e,t)}),r=new Jt(n);return new on(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Jc),hl=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e))).fc=n,r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_toFieldTransform",value:function(e){var t=cl(this,e,!0),n=this.fc.map(function(e){return ml(e,t)}),r=new en(n);return new on(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Jc),dl=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e))).dc=n,r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_toFieldTransform",value:function(e){var t=new nn(e.M,Wt(e.M,this.dc));return new on(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Jc);function pl(e,t,n,r){var i=e.lc(1,t,n);kl("Data must be an object, but it was:",i,r);var a=[],o=ze.empty();te(r,function(e,r){var u=xl(t,e,n);r=Object(y.l)(r);var s=i.oc(u);if(r instanceof sl)a.push(u);else{var c=ml(r,s);null!=c&&(a.push(u),o.set(u,c))}});var u=new ue(a);return new nl(o,u,i.fieldTransforms)}function vl(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[wl(t,r,n)],s=[i];if(a.length%2!=0)throw new P(R.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(wl(t,a[c])),s.push(a[c+1]);for(var l=[],f=ze.empty(),h=u.length-1;h>=0;--h)if(!Il(l,u[h])){var d=u[h],p=s[h];p=Object(y.l)(p);var v=o.oc(d);if(p instanceof sl)l.push(d);else{var m=ml(p,v);null!=m&&(l.push(d),f.set(d,m))}}var g=new ue(l);return new nl(f,g,o.fieldTransforms)}function yl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ml(n,e.lc(r?4:3,t))}function ml(e,t){if(bl(e=Object(y.l)(e)))return kl("Unsupported field value:",t,e),gl(e,t);if(e instanceof Jc)return function(e,t){if(!rl(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=ml(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Object(y.l)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wt(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=J.fromDate(e);return{timestampValue:Xn(t.M,n)}}if(e instanceof J){var r=new J(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xn(t.M,r)}}if(e instanceof Zc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Xc)return{bytesValue:Jn(t.M,e._byteString)};if(e instanceof _c){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tr(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(gc(e)))}(e,t)}function gl(e,t){var n={};return ne(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):te(e,function(e,r){var i=ml(r,t.sc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function bl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof J||e instanceof Zc||e instanceof Xc||e instanceof _c||e instanceof Jc)}function kl(e,t,n){if(!bl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=gc(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function wl(e,t,n){if((t=Object(y.l)(t))instanceof $c)return t._internalPath;if("string"==typeof t)return xl(e,t);throw _l("Field path arguments must be of type string or ",e,!1,void 0,n)}var Ol=new RegExp("[~\\*/\\[\\]]");function xl(e,t,n){if(t.search(Ol)>=0)throw _l("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Object(r.a)($c,Object(l.a)(t.split(".")))._internalPath}catch(i){throw _l("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function _l(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new P(R.INVALID_ARGUMENT,u+e+s)}function Il(e,t){return e.some(function(e){return e.isEqual(t)})}var jl=function(){function e(t,n,r,i,a){Object(f.a)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Object(h.a)(e,[{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new El(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Sl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new _c(this._firestore,this._converter,this._key)}}]),e}(),El=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"data",value:function(){return Object(i.a)(Object(s.a)(t.prototype),"data",this).call(this)}}]),t}(jl);function Sl(e,t){return"string"==typeof t?xl(e,t):t instanceof $c?t._internalPath:t._delegate._internalPath}var Tl=function(){function e(t,n){Object(f.a)(this,e),this.hasPendingWrites=t,this.fromCache=n}return Object(h.a)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Nl=function(e){function t(e,n,r,i,a,o){var c;return Object(f.a)(this,t),(c=Object(u.a)(this,Object(s.a)(t).call(this,e,n,r,i,o)))._firestore=e,c._firestoreImpl=e,c.metadata=a,c}return Object(c.a)(t,e),Object(h.a)(t,[{key:"exists",value:function(){return Object(i.a)(Object(s.a)(t.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Sl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),t}(jl),Cl=function(e){function t(){return Object(f.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(h.a)(t,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(Object(s.a)(t.prototype),"data",this).call(this,e)}}]),t}(Nl),Al=function(){function e(t,n,r,i){Object(f.a)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Tl(i.hasPendingWrites,i.fromCache),this.query=r}return Object(h.a)(e,[{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new Cl(n._firestore,n._userDataWriter,r.key,r,new Tl(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new Cl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new Cl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Dl(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}},{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}}]),e}();function Dl(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}function Ll(e,t){return e instanceof Nl&&t instanceof Nl?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Al&&t instanceof Al&&e._firestore===t._firestore&&Cc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Rl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pl=function e(){Object(f.a)(this,e)};function Ml(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){e=a[i]._apply(e)}return e}var Fl=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this)))._c=e,i.wc=n,i.mc=r,i.type="where",i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_apply",value:function(e){var t=ol(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new P(R.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Zl(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Jl(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Jl(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Zl(o,a),u=yl(n,"where",o,"in"===a||"not-in"===a);var h=pt.create(i,a,u);return function(e,t){if(t.S()){var n=At(e);if(null!==n&&!n.isEqual(t.field))throw new P(R.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ct(e);null!==r&&ef(e,t.field,r)}var i=function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(t.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===t.op?new P(R.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new P(R.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Ic(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new St(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),t}(Pl);function Ul(e,t,n){var r=t,i=Sl("where",e);return new Fl(i,r,n)}var Vl=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this)))._c=e,r.gc=n,r.type="orderBy",r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _t(t,n);return function(e,t){if(null===Ct(e)){var n=At(e);null!==n&&ef(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new Ic(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new St(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),t}(Pl);function Bl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Sl("orderBy",e);return new Vl(n,t)}var zl=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).type=e,i.yc=n,i.Ic=r,i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_apply",value:function(e){return new Ic(e.firestore,e.converter,Pt(e._query,this.yc,this.Ic))}}]),t}(Pl);function ql(e){return kc("limit",e),new zl("limit",e,"F")}function Gl(e){return kc("limitToLast",e),new zl("limitToLast",e,"L")}var Kl=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).type=e,i.Tc=n,i.Ec=r,i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_apply",value:function(e){var t=Xl(e,this.type,this.Tc,this.Ec);return new Ic(e.firestore,e.converter,function(e,t){return new St(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),t}(Pl);function Wl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kl("startAt",t,!0)}function Hl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kl("startAfter",t,!1)}var Ql=function(e){function t(e,n,r){var i;return Object(f.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).type=e,i.Tc=n,i.Ec=r,i}return Object(c.a)(t,e),Object(h.a)(t,[{key:"_apply",value:function(e){var t=Xl(e,this.type,this.Tc,this.Ec);return new Ic(e.firestore,e.converter,function(e,t){return new St(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),t}(Pl);function Yl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ql("endBefore",t,!1)}function $l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ql("endAt",t,!0)}function Xl(e,t,n,r){if(n[0]=Object(y.l)(n[0]),n[0]instanceof jl)return function(e,t,n,r,i){if(!r)throw new P(R.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=g(Lt(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ne(t,r.key));else{var c=r.data.field(s.field);if(pe(c))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new P(R.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new xt(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ol(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new P(R.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new P(R.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Dt(e)&&-1!==c.indexOf("/"))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ie.fromString(c));if(!we.isDocumentKey(l))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new we(l);u.push(Ne(t,f))}else{var h=yl(n,r,c);u.push(h)}}return new xt(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Jl(e,t,n){if("string"==typeof(n=Object(y.l)(n))){if(""===n)throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dt(t)&&-1!==n.indexOf("/"))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ie.fromString(n));if(!we.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ne(e,new we(r))}if(n instanceof _c)return Ne(e,n._key);throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gc(n),"."))}function Zl(e,t){if(!Array.isArray(e)||0===e.length)throw new P(R.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new P(R.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function ef(e,t,n){if(!n.isEqual(t))throw new P(R.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var tf={maxAttempts:5},nf=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(_e(e)){case 0:return null;case 1:return e.booleanValue;case 2:return he(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(de(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw C()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return te(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Zc(he(e.latitude),he(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return pe(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ve(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=fe(e);return new J(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ie.fromString(e);A(_r(n));var r=new me(n.get(1),n.get(3)),i=new we(n.popFirst(5));return r.isEqual(t)||S("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function rf(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var af=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).firestore=e,n}return Object(c.a)(t,e),Object(h.a)(t,[{key:"convertBytes",value:function(e){return new Xc(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new _c(this.firestore,null,t)}}]),t}(nf),of=function(){function e(t,n){Object(f.a)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ol(t)}return Object(h.a)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=uf(e,this._firestore),i=rf(r.converter,t,n),a=ul(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,sn.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=uf(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(y.l)(t))||t instanceof $c?vl(this._dataReader,"WriteBatch.update",i._key,t,n,o):pl(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,sn.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=uf(e,this._firestore);return this._mutations=this._mutations.concat(new xn(t._key,sn.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function uf(e,t){if((e=Object(y.l)(e)).firestore!==t)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function sf(e){e=bc(e,_c);var t=bc(e.firestore,Pc);return fc(Fc(t),e._key).then(function(n){return Of(t,e,n)})}var cf=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).firestore=e,n}return Object(c.a)(t,e),Object(h.a)(t,[{key:"convertBytes",value:function(e){return new Xc(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new _c(this.firestore,null,t)}}]),t}(nf);function lf(e){e=bc(e,_c);var t=bc(e.firestore,Pc),n=Fc(t),r=new cf(t);return function(e,t){var n=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function r(){return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(o.a)(k().mark(function e(t,n,r){var i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=L(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.fi.Ls(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Eu(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,oc(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new Nl(t,r,e._key,n,new Tl(null!==n&&n.hasLocalMutations,!0),e.converter)})}function ff(e){e=bc(e,_c);var t=bc(e.firestore,Pc);return fc(Fc(t),e._key,{source:"server"}).then(function(n){return Of(t,e,n)})}function hf(e){e=bc(e,Ic);var t=bc(e.firestore,Pc),n=Fc(t),r=new cf(t);return Rl(e._query),hc(n,e._query).then(function(n){return new Al(t,r,e,n)})}function df(e){e=bc(e,Ic);var t=bc(e.firestore,Pc),n=Fc(t),r=new cf(t);return function(e,t){var n=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function r(){return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(o.a)(k().mark(function e(t,n,r){var i,a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qa(t,n,!0);case 3:i=e.sent,a=new Ku(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Eu(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,oc(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new Al(t,r,e,n)})}function pf(e){e=bc(e,Ic);var t=bc(e.firestore,Pc),n=Fc(t),r=new cf(t);return hc(n,e._query,{source:"server"}).then(function(n){return new Al(t,r,e,n)})}function vf(e,t,n){e=bc(e,_c);var r=bc(e.firestore,Pc),i=rf(e.converter,t,n);return wf(r,[ul(ol(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sn.none())])}function yf(e,t,n){e=bc(e,_c);for(var r=bc(e.firestore,Pc),i=ol(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return wf(r,[("string"==typeof(t=Object(y.l)(t))||t instanceof $c?vl(i,"updateDoc",e._key,t,n,o):pl(i,"updateDoc",e._key,t)).toMutation(e._key,sn.exists(!0))])}function mf(e){return wf(bc(e.firestore,Pc),[new xn(e._key,sn.none())])}function gf(e,t){var n=bc(e.firestore,Pc),r=Tc(e),i=rf(e.converter,t);return wf(n,[ul(ol(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sn.exists(!1))]).then(function(){return r})}function bf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=Object(y.l)(e);var s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Dc(n[c])||(s=n[c],c++);var l,f,h,d={includeMetadataChanges:s.includeMetadataChanges};if(Dc(n[c])){var p=n[c];n[c]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[c+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[c+2]=null===(u=p.complete)||void 0===u?void 0:u.bind(p)}if(e instanceof _c)f=bc(e.firestore,Pc),h=Nt(e._key.path),l={next:function(t){n[c]&&n[c](Of(f,e,t))},error:n[c+1],complete:n[c+2]};else{var v=bc(e,Ic);f=bc(v.firestore,Pc),h=v._query;var m=new cf(f);l={next:function(e){n[c]&&n[c](new Al(f,m,v,e))},error:n[c+1],complete:n[c+2]},Rl(e._query)}return function(e,t,n,r){var i=new Ws(l),a=new Fu(t,i,n);return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Du,t.next=3,cc(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ru,t.next=3,cc(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Fc(f),h,d)}function kf(e,t){return function(e,t){var n=new Ws(t);return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){L(e).bu.add(t),t.next()},t.next=3,cc(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){L(e).bu.delete(t)},t.next=3,cc(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Fc(e=bc(e,Pc)),Dc(t)?t:{next:t})}function wf(e,t){return function(e,t){var n=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function r(){return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ts,r.next=3,sc(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(Fc(e),t)}function Of(e,t,n){var r=n.docs.get(t._key),i=new cf(e);return new Nl(e,i,t._key,r,new Tl(n.hasPendingWrites,n.fromCache),t.converter)}var xf=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,n)))._firestore=e,r}return Object(c.a)(t,e),Object(h.a)(t,[{key:"get",value:function(e){var n=this,r=uf(e,this._firestore),a=new cf(this._firestore);return Object(i.a)(Object(s.a)(t.prototype),"get",this).call(this,e).then(function(e){return new Nl(n._firestore,a,r._key,e._document,new Tl(!1,!1),r.converter)})}}]),t}(function(){function e(t,n){Object(f.a)(this,e),this._firestore=t,this._transaction=n,this._dataReader=ol(t)}return Object(h.a)(e,[{key:"get",value:function(e){var t=this,n=uf(e,this._firestore),r=new af(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return C();var i=e[0];if(i.isFoundDocument())return new jl(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new jl(t._firestore,r,n._key,null,n.converter);throw C()})}},{key:"set",value:function(e,t,n){var r=uf(e,this._firestore),i=rf(r.converter,t,n),a=ul(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=uf(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(y.l)(t))||t instanceof $c?vl(this._dataReader,"Transaction.update",i._key,t,n,o):pl(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=uf(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function _f(e,t,n){e=bc(e,Pc);var r=Object.assign(Object.assign({},tf),n);return function(e){if(r.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(),function(e,t,n){var r=new M;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function i(){var a;return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return rc(e).then(function(e){return e.datastore})}(e);case 2:a=i.sent,new Ys(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}},i)}))),r.promise}(Fc(e),function(n){return t(new xf(e,n))},r)}function If(){return new sl("deleteField")}function jf(){return new ll("serverTimestamp")}function Ef(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fl("arrayUnion",t)}function Sf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hl("arrayRemove",t)}function Tf(e){return new dl("increment",e)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){x=e}(d.SDK_VERSION),Object(d._registerComponent)(new p.a("firestore",function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Pc(i,new B(e.getProvider("auth-internal")),new K(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),Object(d.registerVersion)(w,"3.4.9",void 0),Object(d.registerVersion)(w,"3.4.9","esm2017")}()}).call(this,n(26))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(20);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var a=n(18);function o(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(a.a)(e):t}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.r(t);var r=n(13),i=n(0),a=n(3),o=n(1),u=n(2),s=n(15),c=n(16),l=n(4);var f,h,d=function(e,t){return t.some(function(t){return e instanceof t})};var p=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,g=new WeakMap;var b={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return v.get(e);if("objectStoreNames"===t)return e.objectStoreNames||y.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return O(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function k(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(h||(h=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(x(this),n),O(p.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return O(e.apply(x(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[x(this),t].concat(r));return y.set(a,t.sort?t.sort():[t]),O(a)}}function w(e){return"function"===typeof e?k(e):(e instanceof IDBTransaction&&function(e){if(!v.has(e)){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});v.set(e,t)}}(e),d(e,f||(f=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,b):e)}function O(e){if(e instanceof IDBRequest)return function(e){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(O(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(function(t){t instanceof IDBCursor&&p.set(t,e)}).catch(function(){}),g.set(t,e),t}(e);if(m.has(e))return m.get(e);var t=w(e);return t!==e&&(m.set(e,t),g.set(t,e)),t}var x=function(e){return g.get(e)};function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=k(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){l.value=e,o(l)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(m),u(m,o,"Generator"),u(m,i,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}var I,j,E=["get","getKey","getAll","getAllKeys","count"],S=["put","add","delete","clear"],T=new Map;function N(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(T.get(t))return T.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=S.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||E.includes(n))){var o=function(){var e=Object(i.a)(_().mark(function e(t){var i,o,u,s,c,l,f=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(i=u)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return T.set(t,o),o}}}function C(){C=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=k(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(_([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){l.value=e,o(l)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),u(b.prototype,a,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(m),u(m,o,"Generator"),u(m,i,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function A(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Object(a.a)(e,t,n[t])})}return e}({},e,{get:function(t,n,r){return N(t,n)||e.get(t,n,r)},has:function(t,n){return!!N(t,n)||e.has(t,n)}})}(b),n.d(t,"SDK_VERSION",function(){return X}),n.d(t,"_DEFAULT_ENTRY_NAME",function(){return F}),n.d(t,"_addComponent",function(){return z}),n.d(t,"_addOrOverwriteComponent",function(){return q}),n.d(t,"_apps",function(){return V}),n.d(t,"_clearComponents",function(){return H}),n.d(t,"_components",function(){return B}),n.d(t,"_getProvider",function(){return K}),n.d(t,"_registerComponent",function(){return G}),n.d(t,"_removeServiceInstance",function(){return W}),n.d(t,"deleteApp",function(){return te}),n.d(t,"getApp",function(){return Z}),n.d(t,"getApps",function(){return ee}),n.d(t,"initializeApp",function(){return J}),n.d(t,"onLog",function(){return ie}),n.d(t,"registerVersion",function(){return re}),n.d(t,"setLogLevel",function(){return ae}),n.d(t,"FirebaseError",function(){return l.c});var L=function(){function e(t){Object(o.a)(this,e),this.container=t}return Object(u.a)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}();var R="@firebase/app",P="0.7.25",M=new c.b("@firebase/app"),F="[DEFAULT]",U=(I={},Object(a.a)(I,R,"fire-core"),Object(a.a)(I,"@firebase/app-compat","fire-core-compat"),Object(a.a)(I,"@firebase/analytics","fire-analytics"),Object(a.a)(I,"@firebase/analytics-compat","fire-analytics-compat"),Object(a.a)(I,"@firebase/app-check","fire-app-check"),Object(a.a)(I,"@firebase/app-check-compat","fire-app-check-compat"),Object(a.a)(I,"@firebase/auth","fire-auth"),Object(a.a)(I,"@firebase/auth-compat","fire-auth-compat"),Object(a.a)(I,"@firebase/database","fire-rtdb"),Object(a.a)(I,"@firebase/database-compat","fire-rtdb-compat"),Object(a.a)(I,"@firebase/functions","fire-fn"),Object(a.a)(I,"@firebase/functions-compat","fire-fn-compat"),Object(a.a)(I,"@firebase/installations","fire-iid"),Object(a.a)(I,"@firebase/installations-compat","fire-iid-compat"),Object(a.a)(I,"@firebase/messaging","fire-fcm"),Object(a.a)(I,"@firebase/messaging-compat","fire-fcm-compat"),Object(a.a)(I,"@firebase/performance","fire-perf"),Object(a.a)(I,"@firebase/performance-compat","fire-perf-compat"),Object(a.a)(I,"@firebase/remote-config","fire-rc"),Object(a.a)(I,"@firebase/remote-config-compat","fire-rc-compat"),Object(a.a)(I,"@firebase/storage","fire-gcs"),Object(a.a)(I,"@firebase/storage-compat","fire-gcs-compat"),Object(a.a)(I,"@firebase/firestore","fire-fst"),Object(a.a)(I,"@firebase/firestore-compat","fire-fst-compat"),Object(a.a)(I,"fire-js","fire-js"),Object(a.a)(I,"firebase","fire-js-all"),I),V=new Map,B=new Map;function z(e,t){try{e.container.addComponent(t)}catch(n){M.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function q(e,t){e.container.addOrOverwriteComponent(t)}function G(e){var t=e.name;if(B.has(t))return M.debug("There were multiple attempts to register component ".concat(t,".")),!1;B.set(t,e);var n,r=A(V.values());try{for(r.s();!(n=r.n()).done;){z(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function K(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;K(e,t).clearInstance(n)}function H(){B.clear()}var Q=(j={},Object(a.a)(j,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(a.a)(j,"bad-app-name","Illegal App name: '{$appName}"),Object(a.a)(j,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Object(a.a)(j,"app-deleted","Firebase App named '{$appName}' already deleted"),Object(a.a)(j,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Object(a.a)(j,"invalid-log-argument","First argument to `onLog` must be null or a function."),Object(a.a)(j,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Object(a.a)(j,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Object(a.a)(j,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Object(a.a)(j,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),j),Y=new l.b("app","Firebase",Q),$=function(){function e(t,n,r){var i=this;Object(o.a)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new s.a("app",function(){return i},"PUBLIC"))}return Object(u.a)(e,[{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Y.create("app-deleted",{appName:this._name})}},{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}}]),e}(),X="9.8.2";function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!==typeof t&&(t={name:t});var n=Object.assign({name:F,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!==typeof r||!r)throw Y.create("bad-app-name",{appName:String(r)});var i=V.get(r);if(i){if(Object(l.i)(e,i.options)&&Object(l.i)(n,i.config))return i;throw Y.create("duplicate-app",{appName:r})}var a,o=new s.b(r),u=A(B.values());try{for(u.s();!(a=u.n()).done;){var c=a.value;o.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var f=new $(e,n,o);return V.set(r,f),f}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=V.get(e);if(!t)throw Y.create("no-app",{appName:e});return t}function ee(){return Array.from(V.values())}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(i.a)(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!V.has(n)){e.next=6;break}return V.delete(n),e.next=5,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t,n){var r,i=null!==(r=U[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void M.warn(u.join(" "))}G(new s.a("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function ie(e,t){if(null!==e&&"function"!==typeof e)throw Y.create("invalid-log-argument");Object(c.d)(e,t)}function ae(e){Object(c.c)(e)}var oe="firebase-heartbeat-database",ue=1,se="firebase-heartbeat-store",ce=null;function le(){return ce||(ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=O(u);return i&&u.addEventListener("upgradeneeded",function(e){i(O(u.result),e.oldVersion,e.newVersion,O(u.transaction))}),r&&u.addEventListener("blocked",function(){return r()}),s.then(function(e){o&&e.addEventListener("close",function(){return o()}),a&&e.addEventListener("versionchange",function(){return a()})}).catch(function(){}),s}(oe,ue,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(se)}}}).catch(function(e){throw Y.create("storage-open",{originalErrorMessage:e.message})})),ce}function fe(e){return he.apply(this,arguments)}function he(){return(he=Object(i.a)(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le();case 3:return n=e.sent,e.abrupt("return",n.transaction(se).objectStore(se).get(ve(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Y.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function de(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(i.a)(C().mark(function e(t,n){var r,i,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le();case 3:return r=e.sent,i=r.transaction(se,"readwrite"),a=i.objectStore(se),e.next=8,a.put(n,ve(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),Y.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function ve(e){return"".concat(e.name,"!").concat(e.options.appId)}var ye=1024,me=function(){function e(t){var n=this;Object(o.a)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new we(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return n._heartbeatsCache=e,e})}return Object(u.a)(e,[{key:"triggerHeartbeat",value:function(){var e=Object(i.a)(C().mark(function e(){var t,n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ge(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some(function(e){return e.date===r})){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Object(i.a)(C().mark(function e(){var t,n,r,i,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ge(),n=be(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Object(l.e)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();function ge(){return(new Date).toISOString().substring(0,10)}function be(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye,r=[],i=e.slice(),a=A(e);try{var o=function(){var e=t.value,a=r.find(function(t){return t.agent===e.agent});if(a){if(a.dates.push(e.date),Oe(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Oe(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ke,we=function(){function e(t){Object(o.a)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Object(u.a)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Object(i.a)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(l.s)()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Object(l.A)().then(function(){return!0}).catch(function(){return!1}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(i.a)(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,fe(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Object(i.a)(C().mark(function e(t){var n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",de(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(i.a)(C().mark(function e(t){var n,i;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",de(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[].concat(Object(r.a)(i.heartbeats),Object(r.a)(t.heartbeats))}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function Oe(e){return Object(l.e)(JSON.stringify({version:2,heartbeats:e})).length}ke="",G(new s.a("platform-logger",function(e){return new L(e)},"PRIVATE")),G(new s.a("heartbeat",function(e){return new me(e)},"PRIVATE")),re(R,P,ke),re(R,P,"esm2017"),re("fire-js","")},function(e,t,n){"use strict";var r=n(23);var i=n(24);function a(e,t){return Object(r.a)(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||Object(i.a)()}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var r=n(25);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=n(7);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return v});var r=n(13),i=n(0),a=n(12),o=n(1),u=n(2),s=n(4);function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var f={};function h(){}function d(){}function p(){}var v={};u(v,i,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(k.prototype),u(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),u(g,o,"Generator"),u(g,i,function(){return this}),u(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(){function e(t,n,r){Object(o.a)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Object(u.a)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),d="[DEFAULT]",p=function(){function e(t,n){Object(o.a)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Object(u.a)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new s.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:d})}catch(c){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(a.a)(t.value,2),i=r[0],o=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});o.resolve(s)}catch(c){}}}catch(f){n.e(f)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Object(i.a)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Object(r.a)(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),Object(r.a)(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=l(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=Object(a.a)(i.value,2),c=s[0],f=s[1];r===this.normalizeInstanceIdentifier(c)&&f.resolve(o)}}catch(h){u.e(h)}finally{u.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===d?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.component?this.component.multipleInstances?e:d:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var v=function(){function e(t){Object(o.a)(this,e),this.name=t,this.providers=new Map}return Object(u.a)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new p(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return m});var r,i=n(1),a=n(2),o=n(3);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,l=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(c||(c={}));var f={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},h=c.INFO,d=(r={},Object(o.a)(r,c.DEBUG,"log"),Object(o.a)(r,c.VERBOSE,"log"),Object(o.a)(r,c.INFO,"info"),Object(o.a)(r,c.WARN,"warn"),Object(o.a)(r,c.ERROR,"error"),r),p=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=d[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},v=function(){function e(t){Object(i.a)(this,e),this.name=t,this._logLevel=h,this._logHandler=p,this._userLogHandler=null,l.push(this)}return Object(a.a)(e,[{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?f[e]:e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.DEBUG].concat(t)),this._logHandler.apply(this,[this,c.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.VERBOSE].concat(t)),this._logHandler.apply(this,[this,c.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.INFO].concat(t)),this._logHandler.apply(this,[this,c.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.WARN].concat(t)),this._logHandler.apply(this,[this,c.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.ERROR].concat(t)),this._logHandler.apply(this,[this,c.ERROR].concat(t))}},{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in c))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}}]),e}();function y(e){l.forEach(function(t){t.setLogLevel(e)})}function m(e,t){var n,r=u(l);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=f[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map(function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:c[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return vr}),n.d(t,"b",function(){return mr}),n.d(t,"c",function(){return yr}),n.d(t,"d",function(){return br}),n.d(t,"e",function(){return gr}),n.d(t,"f",function(){return kr}),n.d(t,"g",function(){return wr}),n.d(t,"h",function(){return dr}),n.d(t,"i",function(){return pr});var r=n(10),i=n(14),a=n(7),o=n(9),u=n(1),s=n(2);function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f,h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},d={},p=p||{},v=h||self;function y(){}function m(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var b="closure_uid_"+(1e9*Math.random()>>>0),k=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function O(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function x(e,t,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:O).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function I(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function j(){this.s=this.s,this.o=this.o}var E={};j.prototype.s=!1,j.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++k)}(this);delete E[e]}},j.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},T=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function N(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var D,L=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R(e,t){return-1!=e.indexOf(t)}function P(e,t){return e<t?-1:e>t?1:0}e:{var M=v.navigator;if(M){var F=M.userAgent;if(F){D=F;break e}}D=""}function U(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function V(e){var t={};for(var n in e)t[n]=e[n];return t}var B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<B.length;a++)n=B[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function q(e){return q[" "](e),e}q[" "]=y;var G,K=R(D,"Opera"),W=R(D,"Trident")||R(D,"MSIE"),H=R(D,"Edge"),Q=H||W,Y=R(D,"Gecko")&&!(R(D.toLowerCase(),"webkit")&&!R(D,"Edge"))&&!(R(D,"Trident")||R(D,"MSIE"))&&!R(D,"Edge"),$=R(D.toLowerCase(),"webkit")&&!R(D,"Edge");function X(){var e=v.document;return e?e.documentMode:void 0}e:{var J="",Z=function(){var e=D;return Y?/rv:([^\);]+)(\)|;)/.exec(e):H?/Edge\/([\d\.]+)/.exec(e):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):$?/WebKit\/(\S+)/.exec(e):K?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Z&&(J=Z?Z[1]:""),W){var ee=X();if(null!=ee&&ee>parseFloat(J)){G=String(ee);break e}}G=J}var te,ne={};function re(){return function(e){var t=ne;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}(function(){for(var e=0,t=L(String(G)).split("."),n=L("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=P(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||P(0==a[2].length,0==o[2].length)||P(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e})}if(v.document&&W){var ie=X();te=ie||(parseInt(G,10)||void 0)}else te=void 0;var ae=te,oe=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{v.addEventListener("test",y,t),v.removeEventListener("test",y,t)}catch(n){}return e}();function ue(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function se(e,t){if(ue.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Y){e:{try{q(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ce[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)}}ue.prototype.h=function(){this.defaultPrevented=!0},I(se,ue);var ce={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function he(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++fe,this.ca=this.fa=!1}function de(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function pe(e){this.src=e,this.g={},this.h=0}function ve(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=S(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(de(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ye(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}pe.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ye(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new he(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function be(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,a){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);return null}r=je(r);return t&&t[le]?t.O(n,r,g(i)?!!i.capture:!!i,a):ke(t,n,r,!0,i,a)}(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)be(e,t[a],n,r,i);return null}return n=je(n),e&&e[le]?e.N(t,n,g(r)?!!r.capture:!!r,i):ke(e,t,n,!1,r,i)}function ke(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=g(i)?!!i.capture:!!i,u=_e(e);if(u||(e[me]=u=new pe(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=xe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)oe||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function we(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[le])ve(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(ve(n,e),0==n.h&&(n.src=null,t[me]=null)):de(e)}}}function Oe(e){return e in ge?ge[e]:ge[e]="on"+e}function xe(e,t){if(e.ca)e=!0;else{t=new se(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function _e(e){return(e=e[me])instanceof pe?e:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(e){return"function"===typeof e?e:(e[Ie]||(e[Ie]=function(t){return e.handleEvent(t)}),e[Ie])}function Ee(){j.call(this),this.i=new pe(this),this.P=this,this.I=null}function Se(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ue(t,e);else if(t instanceof ue)t.target=t.target||e;else{var i=t;z(t=new ue(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Te(o,r,!0,t)&&i}if(i=Te(o=t.g=e,r,!0,t)&&i,i=Te(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Te(o=t.g=n[a],r,!1,t)&&i}function Te(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ve(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}I(Ee,j),Ee.prototype[le]=!0,Ee.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,a){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);else i=g(i)?!!i.capture:!!i,r=je(r),t&&t[le]?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=ye(o=t.g[n],r,i,a))&&(de(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--))):t&&(t=_e(t))&&(n=t.g[n.toString()],t=-1,n&&(t=ye(n,r,i,a)),(r=-1<t?n[t]:null)&&we(r))}(this,e,t,n,r)},Ee.prototype.M=function(){if(Ee.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)de(n[r]);delete t.g[e],t.h--}}this.I=null},Ee.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ee.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ne=v.JSON.stringify;function Ce(){var e=Ue,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ae,De=function(){function e(){Object(u.a)(this,e),this.h=this.g=null}return Object(s.a)(e,[{key:"add",value:function(e,t){var n=Le.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Le=new(function(){function e(t,n){Object(u.a)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Object(s.a)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new Re},function(e){return e.reset()}),Re=function(){function e(){Object(u.a)(this,e),this.next=this.g=this.h=null}return Object(s.a)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Pe(e){v.setTimeout(function(){throw e},0)}function Me(e,t){Ae||function(){var e=v.Promise.resolve(void 0);Ae=function(){e.then(Ve)}}(),Fe||(Ae(),Fe=!0),Ue.add(e,t)}var Fe=!1,Ue=new De;function Ve(){for(var e;e=Ce();){try{e.h.call(e.g)}catch(n){Pe(n)}var t=Le;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Fe=!1}function Be(e,t){Ee.call(this),this.h=e||1,this.g=t||v,this.j=x(this.kb,this),this.l=Date.now()}function ze(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function qe(e,t,n){if("function"===typeof e)n&&(e=x(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=x(e.handleEvent,e)}return 2147483647<Number(t)?-1:v.setTimeout(e,t||0)}I(Be,Ee),(f=Be.prototype).da=!1,f.S=null,f.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Se(this,"tick"),this.da&&(ze(this),this.start()))}},f.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},f.M=function(){Be.Z.M.call(this),ze(this),delete this.g};var Ge=function(e){function t(e,n){var i;return Object(u.a)(this,t),(i=Object(r.a)(this,Object(a.a)(t).call(this))).m=e,i.j=n,i.h=null,i.i=!1,i.g=null,i}return Object(o.a)(t,e),Object(s.a)(t,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=qe(function(){t.g=null,t.i&&(t.i=!1,e(t))},t.j);var n=t.h;t.h=null,t.m.apply(null,n)}(this)}},{key:"M",value:function(){Object(i.a)(Object(a.a)(t.prototype),"M",this).call(this),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),t}(j);function Ke(e){j.call(this),this.h=e,this.g={}}I(Ke,j);var We=[];function He(e,t,n,r){Array.isArray(n)||(n&&(We[0]=n.toString()),n=We);for(var i=0;i<n.length;i++){var a=be(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Qe(e){U(e.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},e),e.g={}}function Ye(){this.g=!0}function $e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ne(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}Ke.prototype.M=function(){Ke.Z.M.call(this),Qe(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ye.prototype.Aa=function(){this.g=!1},Ye.prototype.info=function(){};var Xe={},Je=null;function Ze(){return Je=Je||new Ee}function et(e){ue.call(this,Xe.Ma,e)}function tt(e){var t=Ze();Se(t,new et(t,e))}function nt(e,t){ue.call(this,Xe.STAT_EVENT,e),this.stat=t}function rt(e){var t=Ze();Se(t,new nt(t,e))}function it(e,t){ue.call(this,Xe.Na,e),this.size=t}function at(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){e()},t)}Xe.Ma="serverreachability",I(et,ue),Xe.STAT_EVENT="statevent",I(nt,ue),Xe.Na="timingevent",I(it,ue);var ot={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ut={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function st(){}function ct(e){return e.h||(e.h=e.i())}function lt(){}st.prototype.h=null;var ft,ht={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dt(){ue.call(this,"d")}function pt(){ue.call(this,"c")}function vt(){}function yt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ke(this),this.P=gt,e=Q?125:void 0,this.W=new Be(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}I(dt,ue),I(pt,ue),I(vt,st),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},ft=new vt;var gt=45e3,bt={},kt={};function wt(e,t,n){e.K=1,e.v=Gt(Ft(t)),e.s=n,e.U=!0,Ot(e,null)}function Ot(e,t){e.F=Date.now(),jt(e),e.A=Ft(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),rn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new mt,e.g=or(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ge(x(e.Ia,e,e.g),e.O)),He(e.V,e.g,"readystatechange",e.gb),t=e.H?V(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tt(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function xt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function _t(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=It(e,n))==kt){4==t&&(e.o=4,rt(14),i=!1),$e(e.j,e.m,null,"[Incomplete Response]");break}if(r==bt){e.o=4,rt(15),$e(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}$e(e.j,e.m,r,null),Ct(e,r)}xt(e)&&r!=kt&&r!=bt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,rt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jn(t),t.L=!0,rt(11))):($e(e.j,e.m,n,"[Invalid Chunked Response]"),Nt(e),Tt(e))}function It(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?kt:(n=Number(t.substring(n,r)),isNaN(n)?bt:(r+=1)+n>t.length?kt:(t=t.substr(r,n),e.C=r+n,t))}function jt(e){e.Y=Date.now()+e.P,Et(e,e.P)}function Et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=at(x(e.eb,e),t)}function St(e){e.B&&(v.clearTimeout(e.B),e.B=null)}function Tt(e){0==e.l.G||e.I||tr(e.l,e)}function Nt(e){St(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ze(e.W),Qe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ct(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||hn(n.i,e)))if(n.I=e.N,!e.J&&hn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;er(n),qn(n)}Xn(n),rt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=at(x(n.ab,n),6e3));if(1>=fn(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else rr(n,11)}else if((e.J||n.g==e)&&er(n),!A(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(R(l,"spdy")||R(l,"quic")||R(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(dn(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,qt(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ar(r,r.H?r.la:null,r.W),d.J){pn(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(St(p),jt(p)),r.g=d}else $n(r);0<n.l.length&&Wn(n)}else"stop"!=a[0]&&"close"!=a[0]||rr(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?rr(n,7):zn(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}tt(4)}catch(a){}}function At(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||"string"===typeof e)T(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(m(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Dt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Dt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Lt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Rt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Rt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(f=yt.prototype).setTimeout=function(e){this.P=e},f.gb=function(e){e=e.target;var t=this.L;t&&3==Mn(e)?t.l():this.Ia(e)},f.Ia=function(e){try{if(e==this.g)e:{var t=Mn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Q||this.g&&(this.h.h||this.g.ga()||Fn(this.g)))){this.I||4!=t||7==n||tt(8==n||0>=r?3:2),St(this);var i=this.g.ba();this.N=i;t:if(xt(this)){var a=Fn(this.g);e="";var o=a.length,u=4==Mn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Nt(this),Tt(this);var s="";break t}this.h.i=new v.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,rt(12),Nt(this),Tt(this);break e}$e(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ct(this,i)}this.U?(_t(this,t,s),Q&&this.i&&3==t&&(He(this.V,this.W,"tick",this.fb),this.W.start())):($e(this.j,this.m,s,null),Ct(this,s)),4==t&&Nt(this),this.i&&!this.I&&(4==t?tr(this.l,this):(this.i=!1,jt(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),Nt(this),Tt(this)}}}catch(t){}},f.fb=function(){if(this.g){var e=Mn(this.g),t=this.g.ga();this.C<t.length&&(St(this),_t(this,e,t),this.i&&4!=e&&jt(this))}},f.cancel=function(){this.I=!0,Nt(this)},f.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(tt(3),rt(17)),Nt(this),this.o=2,Tt(this)):Et(this,this.Y-e)},(f=Dt.prototype).R=function(){Lt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},f.T=function(){return Lt(this),this.g.concat()},f.get=function(e,t){return Rt(this.h,e)?this.h[e]:t},f.set=function(e,t){Rt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},f.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Pt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Mt){this.g=void 0!==t?t:e.g,Ut(this,e.j),this.s=e.s,Vt(this,e.i),Bt(this,e.m),this.l=e.l,t=e.h;var n=new Zt;n.i=t.i,t.g&&(n.g=new Dt(t.g),n.h=t.h),zt(this,n),this.o=e.o}else e&&(n=String(e).match(Pt))?(this.g=!!t,Ut(this,n[1]||"",!0),this.s=Kt(n[2]||""),Vt(this,n[3]||"",!0),Bt(this,n[4]),this.l=Kt(n[5]||"",!0),zt(this,n[6]||"",!0),this.o=Kt(n[7]||"")):(this.g=!!t,this.h=new Zt(null,this.g))}function Ft(e){return new Mt(e)}function Ut(e,t,n){e.j=n?Kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vt(e,t,n){e.i=n?Kt(t,!0):t}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zt(e,t,n){t instanceof Zt?(e.h=t,function(e,t){t&&!e.j&&(en(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(tn(this,t),rn(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Wt(t,Xt)),e.h=new Zt(t,e.g))}function qt(e,t,n){e.h.set(t,n)}function Gt(e){return qt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Wt(t,Qt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Wt(t,Qt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wt(n,"/"==n.charAt(0)?$t:Yt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Wt(n,Jt)),e.join("")};var Qt=/[#\/\?@]/g,Yt=/[#\?:]/g,$t=/[#\?]/g,Xt=/[#\?@]/g,Jt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function en(e){e.g||(e.g=new Dt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function tn(e,t){en(e),t=an(e,t),Rt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Rt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Lt(e)))}function nn(e,t){return en(e),t=an(e,t),Rt(e.g.h,t)}function rn(e,t,n){tn(e,t),0<n.length&&(e.i=null,e.g.set(an(e,t),C(n)),e.h+=n.length)}function an(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(f=Zt.prototype).add=function(e,t){en(this),this.i=null,e=an(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},f.forEach=function(e,t){en(this),this.g.forEach(function(n,r){T(n,function(n){e.call(t,n,r,this)},this)},this)},f.T=function(){en(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},f.R=function(e){en(this);var t=[];if("string"===typeof e)nn(this,e)&&(t=N(t,this.g.get(an(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=N(t,e[n])}return t},f.set=function(e,t){return en(this),this.i=null,nn(this,e=an(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},f.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},f.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var on=function e(t,n){Object(u.a)(this,e),this.h=t,this.g=n};function un(e){this.l=e||cn,v.PerformanceNavigationTiming?e=0<(e=v.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(v.g&&v.g.Ea&&v.g.Ea()&&v.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sn,cn=10;function ln(e){return!!e.h||!!e.g&&e.g.size>=e.j}function fn(e){return e.h?1:e.g?e.g.size:0}function hn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dn(e,t){e.g?e.g.add(t):e.h=t}function pn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function vn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=c(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return C(e.i)}function yn(){}function mn(){this.g=new yn}function gn(e,t,n){var r=n||"";try{At(e,function(e,n){var i=e;g(e)&&(i=Ne(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function kn(e){this.l=e.$b||null,this.j=e.ib||!1}function wn(e,t){Ee.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=On,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=c(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},yn.prototype.stringify=function(e){return v.JSON.stringify(e,void 0)},yn.prototype.parse=function(e){return v.JSON.parse(e,void 0)},I(kn,st),kn.prototype.g=function(){return new wn(this.l,this.j)},kn.prototype.i=(sn={},function(){return sn}),I(wn,Ee);var On=0;function xn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function _n(e){e.readyState=4,e.l=null,e.j=null,e.A=null,In(e)}function In(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(f=wn.prototype).open=function(e,t){if(this.readyState!=On)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,In(this)},f.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||v).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},f.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_n(this)),this.readyState=On},f.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof v.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},f.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_n(this):In(this),3==this.readyState&&xn(this)}},f.Ua=function(e){this.g&&(this.response=this.responseText=e,_n(this))},f.Ta=function(e){this.g&&(this.response=e,_n(this))},f.ha=function(){this.g&&_n(this)},f.setRequestHeader=function(e,t){this.v.append(e,t)},f.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},f.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jn=v.JSON.parse;function En(e){Ee.call(this),this.headers=new Dt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sn,this.K=this.L=!1}I(En,Ee);var Sn="",Tn=/^https?$/i,Nn=["POST","PUT"];function Cn(e){return"content-type"==e.toLowerCase()}function An(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Dn(e),Rn(e)}function Dn(e){e.D||(e.D=!0,Se(e,"complete"),Se(e,"error"))}function Ln(e){if(e.h&&"undefined"!=typeof p&&(!e.C[1]||4!=Mn(e)||2!=e.ba()))if(e.v&&4==Mn(e))qe(e.Fa,0,e);else if(Se(e,"readystatechange"),4==Mn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Pt)[1]||null;if(!a&&v.self&&v.self.location){var o=v.self.location.protocol;a=o.substr(0,o.length-1)}i=!Tn.test(a?a.toLowerCase():"")}t=i}if(t)Se(e,"complete"),Se(e,"success");else{e.m=6;try{var u=2<Mn(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Dn(e)}}finally{Rn(e)}}}function Rn(e,t){if(e.g){Pn(e);var n=e.g,r=e.C[0]?y:null;e.g=null,e.C=null,t||Se(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Pn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(v.clearTimeout(e.A),e.A=null)}function Mn(e){return e.g?e.g.readyState:0}function Fn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Sn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Un(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return U(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qt(e,t,n))}function Vn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bn(e){this.za=0,this.l=[],this.h=new Ye,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vn("baseRetryDelayMs",5e3,e),this.$a=Vn("retryDelaySeedMs",1e4,e),this.Ya=Vn("forwardChannelMaxRetries",2,e),this.ra=Vn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new un(e&&e.concurrentRequestLimit),this.Ca=new mn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function zn(e){if(Gn(e),3==e.G){var t=e.V++,n=Ft(e.F);qt(n,"SID",e.J),qt(n,"RID",t),qt(n,"TYPE","terminate"),Qn(e,n),(t=new yt(e,e.h,t,void 0)).K=2,t.v=Gt(Ft(n)),n=!1,v.navigator&&v.navigator.sendBeacon&&(n=v.navigator.sendBeacon(t.v.toString(),"")),!n&&v.Image&&((new Image).src=t.v,n=!0),n||(t.g=or(t.l,null),t.g.ea(t.v)),t.F=Date.now(),jt(t)}ir(e)}function qn(e){e.g&&(Jn(e),e.g.cancel(),e.g=null)}function Gn(e){qn(e),e.u&&(v.clearTimeout(e.u),e.u=null),er(e),e.i.cancel(),e.m&&("number"===typeof e.m&&v.clearTimeout(e.m),e.m=null)}function Kn(e,t){e.l.push(new on(e.Za++,t)),3==e.G&&Wn(e)}function Wn(e){ln(e.i)||e.m||(e.m=!0,Me(e.Ha,e),e.C=0)}function Hn(e,t){var n;n=t?t.m:e.V++;var r=Ft(e.F);qt(r,"SID",e.J),qt(r,"RID",n),qt(r,"AID",e.U),Qn(e,r),e.o&&e.s&&Un(r,e.o,e.s),n=new yt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Yn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),dn(e.i,n),wt(n,r,t)}function Qn(e,t){e.j&&At({},function(e,n){qt(t,n,e)})}function Yn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?x(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{gn(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function $n(e){e.g||e.u||(e.Y=1,Me(e.Ga,e),e.A=0)}function Xn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=at(x(e.Ga,e),nr(e,e.A)),e.A++,!0)}function Jn(e){null!=e.B&&(v.clearTimeout(e.B),e.B=null)}function Zn(e){e.g=new yt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ft(e.oa);qt(t,"RID","rpc"),qt(t,"SID",e.J),qt(t,"CI",e.N?"0":"1"),qt(t,"AID",e.U),Qn(e,t),qt(t,"TYPE","xmlhttp"),e.o&&e.s&&Un(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Gt(Ft(t)),n.s=null,n.U=!0,Ot(n,e)}function er(e){null!=e.v&&(v.clearTimeout(e.v),e.v=null)}function tr(e,t){var n=null;if(e.g==t){er(e),Jn(e),e.g=null;var r=2}else{if(!hn(e.i,t))return;n=t.D,pn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Se(r=Ze(),new it(r,n,t,i)),Wn(e)}else $n(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(fn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=at(x(e.Ha,e,t),nr(e,e.C)),e.C++,!0))}(e,t)||2==r&&Xn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rr(e,5);break;case 4:rr(e,10);break;case 3:rr(e,6);break;default:rr(e,2)}}function nr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function rr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=x(e.jb,e);n||(n=new Mt("//www.google.com/images/cleardot.gif"),v.location&&"http"==v.location.protocol||Ut(n,"https"),Gt(n)),function(e,t){var n=new Ye;if(v.Image){var r=new Image;r.onload=_(bn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_(bn,n,r,"TestLoadImage: error",!1,t),r.onabort=_(bn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_(bn,n,r,"TestLoadImage: timeout",!1,t),v.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else rt(2);e.G=0,e.j&&e.j.va(t),ir(e),Gn(e)}function ir(e){e.G=0,e.I=-1,e.j&&(0==vn(e.i).length&&0==e.l.length||(e.i.i.length=0,C(e.l),e.l.length=0),e.j.ua())}function ar(e,t,n){var r=function(e){return e instanceof Mt?Ft(e):new Mt(e,void 0)}(n);if(""!=r.i)t&&Vt(r,t+"."+r.i),Bt(r,r.m);else{var i=v.location;r=function(e,t,n,r){var i=new Mt(null,void 0);return e&&Ut(i,e),t&&Vt(i,t),n&&Bt(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&U(e.aa,function(e,t){qt(r,t,e)}),t=e.D,n=e.sa,t&&n&&qt(r,t,n),qt(r,"VER",e.ma),Qn(e,r),r}function or(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new En(new kn({ib:!0})):new En(e.qa)).L=e.H,t}function ur(){}function sr(){if(W&&!(10<=Number(ae)))throw Error("Environmental error: no available transport.")}function cr(e,t){Ee.call(this),this.g=new Bn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hr(this)}function lr(e){dt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fr(){pt.call(this),this.status=1}function hr(e){this.g=e}(f=En.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ft.g(),this.C=this.u?ct(this.u):ct(ft),this.g.onreadystatechange=x(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void An(this,a)}e=n||"";var i=new Dt(this.headers);r&&At(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=Cn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=v.FormData&&e instanceof v.FormData,!(0<=S(Nn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pn(this),0<this.B&&((this.K=function(e){return W&&re()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=x(this.pa,this)):this.A=qe(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){An(this,a)}},f.pa=function(){"undefined"!=typeof p&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Se(this,"timeout"),this.abort(8))},f.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Se(this,"complete"),Se(this,"abort"),Rn(this))},f.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),En.Z.M.call(this)},f.Fa=function(){this.s||(this.F||this.v||this.l?Ln(this):this.cb())},f.cb=function(){Ln(this)},f.ba=function(){try{return 2<Mn(this)?this.g.status:-1}catch(sn){return-1}},f.ga=function(){try{return this.g?this.g.responseText:""}catch(sn){return""}},f.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jn(t)}},f.Da=function(){return this.m},f.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(f=Bn.prototype).ma=8,f.G=1,f.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},f.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new yt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?z(n=V(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Yn(this,t,r),qt(i=Ft(this.F),"RID",e),qt(i,"CVER",22),this.D&&qt(i,"X-HTTP-Session-Id",this.D),Qn(this,i),this.o&&n&&Un(i,this.o,n),dn(this.i,t),this.Ra&&qt(i,"TYPE","init"),this.ja?(qt(i,"$req",r),qt(i,"SID","null"),t.$=!0,wt(t,i,null)):wt(t,i,r),this.G=2}}else 3==this.G&&(e?Hn(this,e):0==this.l.length||ln(this.i)||Hn(this))},f.Ga=function(){if(this.u=null,Zn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=at(x(this.bb,this),e)}},f.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rt(10),qn(this),Zn(this))},f.ab=function(){null!=this.v&&(this.v=null,qn(this),Xn(this),rt(19))},f.jb=function(e){e?(this.h.info("Successfully pinged google.com"),rt(2)):(this.h.info("Failed to ping google.com"),rt(1))},(f=ur.prototype).xa=function(){},f.wa=function(){},f.va=function(){},f.ua=function(){},f.Oa=function(){},sr.prototype.g=function(e,t){return new cr(e,t)},I(cr,Ee),cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Me(x(e.hb,e,t))),rt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ar(e,null,e.W),Wn(e)},cr.prototype.close=function(){zn(this.g)},cr.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Kn(this.g,t)}else this.v?((t={}).__data__=Ne(e),Kn(this.g,t)):Kn(this.g,e)},cr.prototype.M=function(){this.g.j=null,delete this.j,zn(this.g),delete this.g,cr.Z.M.call(this)},I(lr,dt),I(fr,pt),I(hr,ur),hr.prototype.xa=function(){Se(this.g,"a")},hr.prototype.wa=function(e){Se(this.g,new lr(e))},hr.prototype.va=function(e){Se(this.g,new fr(e))},hr.prototype.ua=function(){Se(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,cr.prototype.send=cr.prototype.u,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,ut.COMPLETE="complete",lt.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Ee.prototype.listen=Ee.prototype.N,En.prototype.listenOnce=En.prototype.O,En.prototype.getLastError=En.prototype.La,En.prototype.getLastErrorCode=En.prototype.Da,En.prototype.getStatus=En.prototype.ba,En.prototype.getResponseJson=En.prototype.Qa,En.prototype.getResponseText=En.prototype.ga,En.prototype.send=En.prototype.ea;var dr=d.createWebChannelTransport=function(){return new sr},pr=d.getStatEventTarget=function(){return Ze()},vr=d.ErrorCode=ot,yr=d.EventType=ut,mr=d.Event=Xe,gr=d.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},br=d.FetchXmlHttpFactory=kn,kr=d.WebChannel=lt,wr=d.XhrIo=En}).call(this,n(22))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r,i=n(3),a=n(1),o=n(2),u=n(4),s=n(15),c=n(11),l=n(16),f=function(){function e(t,n){var r=this;Object(a.a)(this,e),this._delegate=t,this.firebase=n,Object(c._addComponent)(t,new s.a("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return Object(o.a)(e,[{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),Object(c.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Object(c._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Object(c._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}},{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}}]),e}(),h=(r={},Object(i.a)(r,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(i.a)(r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),r),d=new u.b("app-compat","Firebase",h);var p=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=c.initializeApp(r,i);if(Object(u.f)(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:r,registerVersion:c.registerVersion,setLogLevel:c.setLogLevel,onLog:c.onLog,apps:null,SDK_VERSION:c.SDK_VERSION,INTERNAL:{registerComponent:function(t){var i=t.name,a=i.replace("-compat","");if(c._registerComponent(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[a])throw d.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&Object(u.j)(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,i),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:c}};function r(e){if(e=e||c._DEFAULT_ENTRY_NAME,!Object(u.f)(t,e))throw d.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),r.App=e,n}(f);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(u.j)(t,e)},createSubscribe:u.h,ErrorFactory:u.b,deepExtend:u.j}),t}(),v=new l.b("@firebase/app-compat"),y="@firebase/app-compat",m="0.1.26";if(Object(u.n)()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b,k=p;Object(c.registerVersion)(y,m,b)},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(20);function i(e,t,n){return(i=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.d(t,"a",function(){return r})},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(h);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(33);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},function(e,t,n){"use strict";var r=n(19);n.d(t,"a",function(){return r.a});r.a.registerVersion("firebase","9.8.2","app-compat")},,function(e,t,n){"use strict";var r=n(7),i=n(20);var a=n(21);function o(e){var t="function"===typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Object(a.a)(e,arguments,Object(r.a)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(o,e)})(e)}n.d(t,"a",function(){return o})},,function(e,t,n){"use strict";var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function b(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var w=k.prototype=new b;w.constructor=k,y(w,g.prototype),w.isPureReactComponent=!0;var O=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:r,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,n,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case r:case i:s=!0}}if(s)return o=o(s=e),e=""===a?"."+T(s,0):a,O(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),N(o,t,n,"",function(e){return e})):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",O(e))for(var c=0;c<e.length;c++){var l=a+T(u=e[c],c);s+=N(u,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,n,l=a+T(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},L={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:L,ReactCurrentOwner:_};t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=u,t.PureComponent=k,t.StrictMode=o,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:r,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(34)},function(e,t,n){"use strict";var r=n(5),i=n(35);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){y[e]=new v(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){y[e]=new v(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){y[e]=new v(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){y[e]=new v(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){y[e]=new v(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),O=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),E=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var P,M=Object.assign;function F(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case x:return"Fragment";case O:return"Portal";case I:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case N:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case E:return(t.displayName||"Context")+".Consumer";case j:return(t._context.displayName||"Context")+".Provider";case S:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case C:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case A:n=t._payload,t=t._init;try{return e(t(n))}catch(r){}}return null}(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){$(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Z(e,t.type,n):t.hasOwnProperty("defaultValue")&&Z(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Z(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ee=Array.isArray;function te(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(ee(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ce,le=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach(function(e){de.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ge(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Oe=null,xe=null;function _e(e){if(e=hi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=pi(t),we(e.stateNode,e.type,t))}}function Ie(e){Oe?xe?xe.push(e):xe=[e]:Oe=e}function je(){if(Oe){var e=Oe,t=xe;if(xe=Oe=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ee(e,t){return e(t)}function Se(){}var Te=!1;function Ne(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ee(e,t,n)}finally{Te=!1,(null!==Oe||null!==xe)&&(Se(),je())}}function Ce(e,t){var n=e.stateNode;if(null===n)return null;var r=pi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ae=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Ae=!1}var Le=!1,Re=null,Pe=!1,Me=null,Fe={onError:function(e){Le=!0,Re=e}};function Ue(e,t,n,r,i,a,o,u,s){Le=!1,Re=null,function(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(Fe,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ve(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ze(i),e;if(o===r)return ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,We=i.unstable_shouldYield,He=i.unstable_requestPaint,Qe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,Xe=i.unstable_UserBlockingPriority,Je=i.unstable_NormalPriority,Ze=i.unstable_LowPriority,et=i.unstable_IdlePriority,tt=null,nt=null;var rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(it(e)/at|0)|0},it=Math.log,at=Math.LN2;var ot=64,ut=4194304;function st(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=st(u):0!==(a&=o)&&(r=st(a))}else 0!==(o=n&~i)?r=st(o):0!==a&&(r=st(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-rt(t)),r|=e[n],t&=~i;return r}function lt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ot;return 0===(4194240&(ot<<=1))&&(ot=64),e}function dt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function mt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var gt,bt,kt,wt,Ot,xt=!1,_t=[],It=null,jt=null,Et=null,St=new Map,Tt=new Map,Nt=[],Ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=hi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=fi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Ot(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=hi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Pt(e,t,n){Rt(e)&&n.delete(t)}function Mt(){xt=!1,null!==It&&Rt(It)&&(It=null),null!==jt&&Rt(jt)&&(jt=null),null!==Et&&Rt(Et)&&(Et=null),St.forEach(Pt),Tt.forEach(Pt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mt)))}function Ut(e){function t(t){return Ft(t,e)}if(0<_t.length){Ft(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ft(It,e),null!==jt&&Ft(jt,e),null!==Et&&Ft(Et,e),St.forEach(t),Tt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var Vt=k.ReactCurrentBatchConfig,Bt=!0;function zt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Gt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function qt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Gt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Gt(e,t,n,r){if(Bt){var i=Wt(e,t,n,r);if(null===i)Mr(e,t,r,Kt,n),At(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Dt(It,e,t,n,r,i),!0;case"dragenter":return jt=Dt(jt,e,t,n,r,i),!0;case"mouseover":return Et=Dt(Et,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return St.set(a,Dt(St.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Tt.set(a,Dt(Tt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(At(e,r),4&t&&-1<Ct.indexOf(e)){for(;null!==i;){var a=hi(i);if(null!==a&&gt(a),null===(a=Wt(e,t,n,r))&&Mr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Mr(e,t,r,null,n)}}var Kt=null;function Wt(e,t,n,r){if(Kt=null,null!==(e=fi(e=ke(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Ht(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case $e:return 1;case Xe:return 4;case Je:case Ze:return 16;case et:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,$t=null;function Xt(){if($t)return $t;var e,t,n=Yt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function en(){return!1}function tn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Zt:en,this.isPropagationStopped=en,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var nn,rn,an,on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=tn(on),sn=M({},on,{view:0,detail:0}),cn=tn(sn),ln=M({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&"mousemove"===e.type?(nn=e.screenX-an.screenX,rn=e.screenY-an.screenY):rn=nn=0,an=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),fn=tn(ln),hn=tn(M({},ln,{dataTransfer:0})),dn=tn(M({},sn,{relatedTarget:0})),pn=tn(M({},on,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=tn(M({},on,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=tn(M({},on,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function wn(){return kn}var On=tn(M({},sn,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xn=tn(M({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=tn(M({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),In=tn(M({},on,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=tn(M({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=[9,13,27,32],Sn=l&&"CompositionEvent"in window,Tn=null;l&&"documentMode"in document&&(Tn=document.documentMode);var Nn=l&&"TextEvent"in window&&!Tn,Cn=l&&(!Sn||Tn&&8<Tn&&11>=Tn),An=String.fromCharCode(32),Dn=!1;function Ln(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Un(e,t,n,r){Ie(r),0<(t=Ur(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Bn=null;function zn(e){Cr(e,0)}function qn(e){if(W(di(e)))return e}function Gn(e,t){if("change"===e)return t}var Kn=!1;if(l){var Wn;if(l){var Hn="oninput"in document;if(!Hn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Hn="function"===typeof Qn.oninput}Wn=Hn}else Wn=!1;Kn=Wn&&(!document.documentMode||9<document.documentMode)}function Yn(){Vn&&(Vn.detachEvent("onpropertychange",$n),Bn=Vn=null)}function $n(e){if("value"===e.propertyName&&qn(Bn)){var t=[];Un(t,Bn,e,ke(e)),Ne(zn,t)}}function Xn(e,t,n){"focusin"===e?(Yn(),Bn=n,(Vn=t).attachEvent("onpropertychange",$n)):"focusout"===e&&Yn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Bn)}function Zn(e,t){if("click"===e)return qn(t)}function er(e,t){if("input"===e||"change"===e)return qn(t)}var tr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function nr(e,t){if(tr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!tr(e[i],t[i]))return!1}return!0}function rr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ir(e,t){var n,r=rr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rr(r)}}function ar(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ur(e){var t=ar(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&or(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ir(n,a);var o=ir(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sr=l&&"documentMode"in document&&11>=document.documentMode,cr=null,lr=null,fr=null,hr=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;hr||null==cr||cr!==H(r)||("selectionStart"in(r=cr)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},fr&&nr(fr,r)||(fr=r,0<(r=Ur(lr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cr)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionend:pr("Transition","TransitionEnd")},yr={},mr={};function gr(e){if(yr[e])return yr[e];if(!vr[e])return e;var t,n=vr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return yr[e]=n[t];return e}l&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);var br=gr("animationend"),kr=gr("animationiteration"),wr=gr("animationstart"),Or=gr("transitionend"),xr=new Map,_r="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){xr.set(e,t),s(t,[e])}for(var jr=0;jr<_r.length;jr++){var Er=_r[jr];Ir(Er.toLowerCase(),"on"+(Er[0].toUpperCase()+Er.slice(1)))}Ir(br,"onAnimationEnd"),Ir(kr,"onAnimationIteration"),Ir(wr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Or,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Re;Le=!1,Re=null,Pe||(Pe=!0,Me=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Nr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Nr(i,u,c),a=s}}}if(Pe)throw e=Me,Pe=!1,Me=null,e}function Ar(e,t){var n=t[si];void 0===n&&(n=t[si]=new Set);var r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}function Dr(e,t,n){var r=0;t&&(r|=4),Pr(n,e,r,t)}var Lr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){if(!e[Lr]){e[Lr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Tr.has(t)||Dr(t,!1,e),Dr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Lr]||(t[Lr]=!0,Dr("selectionchange",!1,t))}}function Pr(e,t,n,r){switch(Ht(t)){case 1:var i=zt;break;case 4:i=qt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=fi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne(function(){var r=a,i=ke(n),o=[];e:{var u=xr.get(e);if(void 0!==u){var s=un,c=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":s=On;break;case"focusin":c="focus",s=dn;break;case"focusout":c="blur",s=dn;break;case"beforeblur":case"afterblur":s=dn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=_n;break;case br:case kr:case wr:s=pn;break;case Or:s=In;break;case"scroll":s=cn;break;case"wheel":s=jn;break;case"copy":case"cut":case"paste":s=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=xn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ce(p,h))&&l.push(Fr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!fi(c)&&!c[ui])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?fi(c):null)&&(c!==(f=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=fn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=xn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:di(s),d=null==c?u:di(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,fi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Vr(d))p++;for(d=0,v=h;v;v=Vr(v))d++;for(;0<p-d;)l=Vr(l),p--;for(;0<d-p;)h=Vr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Vr(l),h=Vr(h)}l=null}else l=null;null!==s&&Br(o,u,s,l,!1),null!==c&&null!==f&&Br(o,f,c,l,!0)}if("select"===(s=(u=r?di(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Gn;else if(Fn(u))if(Kn)y=er;else{y=Jn;var m=Xn}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=Zn);switch(y&&(y=y(e,r))?Un(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&Z(u,"number",u.value)),m=r?di(r):window,e){case"focusin":(Fn(m)||"true"===m.contentEditable)&&(cr=m,lr=r,fr=null);break;case"focusout":fr=lr=cr=null;break;case"mousedown":hr=!0;break;case"contextmenu":case"mouseup":case"dragend":hr=!1,dr(o,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":dr(o,n,i)}var g;if(Sn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?Ln(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Cn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(g=Xt()):(Yt="value"in(Qt=i)?Qt.value:Qt.textContent,Pn=!0)),0<(m=Ur(r,b)).length&&(b=new yn(b,e,null,n,i),o.push({event:b,listeners:m}),g?b.data=g:null!==(g=Rn(n))&&(b.data=g))),(g=Nn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(Dn=!0,An);case"textInput":return(e=t.data)===An&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Sn&&Ln(e,t)?(e=Xt(),$t=Yt=Qt=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)})}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ce(e,n))&&r.unshift(Fr(e,a,i)),null!=(a=Ce(e,t))&&r.push(Fr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ce(n,a))&&o.unshift(Fr(n,s,u)):i||null!=(s=Ce(n,a))&&o.push(Fr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var zr=/\r\n?/g,qr=/\u0000|\uFFFD/g;function Gr(e){return("string"===typeof e?e:""+e).replace(zr,"\n").replace(qr,"")}function Kr(e,t,n){if(t=Gr(t),Gr(e)!==t&&n)throw Error(a(425))}function Wr(){}var Hr=null,Qr=null;function Yr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"===typeof setTimeout?setTimeout:void 0,Xr="function"===typeof clearTimeout?clearTimeout:void 0,Jr="function"===typeof Promise?Promise:void 0,Zr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Jr?function(e){return Jr.resolve(null).then(e).catch(ei)}:$r;function ei(e){setTimeout(function(){throw e})}function ti(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ni(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ri(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ii=Math.random().toString(36).slice(2),ai="__reactFiber$"+ii,oi="__reactProps$"+ii,ui="__reactContainer$"+ii,si="__reactEvents$"+ii,ci="__reactListeners$"+ii,li="__reactHandles$"+ii;function fi(e){var t=e[ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ui]||n[ai]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ri(e);null!==e;){if(n=e[ai])return n;e=ri(e)}return t}n=(e=n).parentNode}return null}function hi(e){return!(e=e[ai]||e[ui])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function di(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function pi(e){return e[oi]||null}var vi=[],yi=-1;function mi(e){return{current:e}}function gi(e){0>yi||(e.current=vi[yi],vi[yi]=null,yi--)}function bi(e,t){vi[++yi]=e.current,e.current=t}var ki={},wi=mi(ki),Oi=mi(!1),xi=ki;function _i(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ii(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){gi(Oi),gi(wi)}function Ei(e,t,n){if(wi.current!==ki)throw Error(a(168));bi(wi,t),bi(Oi,n)}function Si(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return M({},n,r)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,xi=wi.current,bi(wi,e),bi(Oi,Oi.current),!0}function Ni(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Si(e,t,xi),r.__reactInternalMemoizedMergedChildContext=e,gi(Oi),gi(wi),bi(wi,e)):gi(Oi),bi(Oi,n)}var Ci=null,Ai=!1,Di=!1;function Li(e){null===Ci?Ci=[e]:Ci.push(e)}function Ri(){if(!Di&&null!==Ci){Di=!0;var e=0,t=yt;try{var n=Ci;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ci=null,Ai=!1}catch(i){throw null!==Ci&&(Ci=Ci.slice(e+1)),Ge($e,Ri),i}finally{yt=t,Di=!1}}return null}var Pi=k.ReactCurrentBatchConfig;function Mi(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Fi=mi(null),Ui=null,Vi=null,Bi=null;function zi(){Bi=Vi=Ui=null}function qi(e){var t=Fi.current;gi(Fi),e._currentValue=t}function Gi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ki(e,t){Ui=e,Bi=Vi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(hu=!0),e.firstContext=null)}function Wi(e){var t=e._currentValue;if(Bi!==e)if(e={context:e,memoizedValue:t,next:null},null===Vi){if(null===Ui)throw Error(a(308));Vi=e,Ui.dependencies={lanes:0,firstContext:e}}else Vi=Vi.next=e;return t}var Hi=null,Qi=!1;function Yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $i(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ji(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,qs(e)?(null===(e=n.interleaved)?(t.next=t,null===Hi?Hi=[n]:Hi.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function Zi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function ea(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ta(e,t,n,r){var i=e.updateQueue;Qi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Qi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ws|=o,e.lanes=o,e.memoizedState=f}}function na(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ra=(new r.Component).refs;function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var aa={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Us(),i=Vs(e),a=Xi(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),Ji(e,a),null!==(t=Bs(e,i,r))&&Zi(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Us(),i=Vs(e),a=Xi(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),Ji(e,a),null!==(t=Bs(e,i,r))&&Zi(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Us(),r=Vs(e),i=Xi(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),Ji(e,i),null!==(t=Bs(e,r,n))&&Zi(t,e,r)}};function oa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!nr(n,r)||!nr(i,a))}function ua(e,t,n){var r=!1,i=ki,a=t.contextType;return"object"===typeof a&&null!==a?a=Wi(a):(i=Ii(t)?xi:wi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?_i(e,i):ki),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=aa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function sa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ra,Yi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Wi(a):(a=Ii(t)?xi:wi.current,i.context=_i(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ia(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&aa.enqueueReplaceState(i,i.state,null),ta(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var la=[],fa=0,ha=null,da=0,pa=[],va=0,ya=null,ma=1,ga="";function ba(e,t){la[fa++]=da,la[fa++]=ha,ha=e,da=t}function ka(e,t,n){pa[va++]=ma,pa[va++]=ga,pa[va++]=ya,ya=e;var r=ma;e=ga;var i=32-rt(r)-1;r&=~(1<<i),n+=1;var a=32-rt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ma=1<<32-rt(t)+i|n<<i|r,ga=a+e}else ma=1<<a|n<<i|r,ga=e}function wa(e){null!==e.return&&(ba(e,1),ka(e,1,0))}function Oa(e){for(;e===ha;)ha=la[--fa],la[fa]=null,da=la[--fa],la[fa]=null;for(;e===ya;)ya=pa[--va],pa[va]=null,ga=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null}var xa=null,_a=null,Ia=!1,ja=null;function Ea(e,t){var n=pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,xa=e,_a=ni(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,xa=e,_a=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ya?{id:ma,overflow:ga}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,xa=e,_a=null,!0);default:return!1}}function Ta(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Na(e){if(Ia){var t=_a;if(t){var n=t;if(!Sa(e,t)){if(Ta(e))throw Error(a(418));t=ni(n.nextSibling);var r=xa;t&&Sa(e,t)?Ea(r,n):(e.flags=-4097&e.flags|2,Ia=!1,xa=e)}}else{if(Ta(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ia=!1,xa=e}}}function Ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xa=e}function Aa(e){if(e!==xa)return!1;if(!Ia)return Ca(e),Ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Yr(e.type,e.memoizedProps)),t&&(t=_a)){if(Ta(e)){for(e=_a;e;)e=ni(e.nextSibling);throw Error(a(418))}for(;t;)Ea(e,t),t=ni(t.nextSibling)}if(Ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){_a=ni(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}_a=null}}else _a=xa?ni(e.stateNode.nextSibling):null;return!0}function Da(){_a=xa=null,Ia=!1}function La(e){null===ja?ja=[e]:ja.push(e)}function Ra(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===ra&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Pa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ma(e){return(0,e._init)(e._payload)}function Fa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=yc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=kc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Ma(a)===t.type)?((r=i(t,n.props)).ref=Ra(e,t,n),r.return=e,r):((r=mc(n.type,n.key,n.props,null,e.mode,r)).ref=Ra(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=wc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=gc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=kc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=mc(t.type,t.key,t.props,null,e.mode,n)).ref=Ra(e,null,t),n.return=e,n;case O:return(t=wc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(ee(t)||R(t))return(t=gc(t,e.mode,n,null)).return=e,t;Pa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case O:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(ee(n)||R(n))return null!==i?null:f(e,t,n,r,null);Pa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(ee(r)||R(r))return f(t,e=e.get(n)||null,r,i,null);Pa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Ia&&ba(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Ia&&ba(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach(function(e){return t(i,e)}),Ia&&ba(i,v),c}function y(i,u,s,c){var l=R(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,y),null===f?l=b:f.sibling=b,f=b,v=m}if(g.done)return n(i,v),Ia&&ba(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Ia&&ba(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach(function(e){return t(i,e)}),Ia&&ba(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Ma(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ra(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=gc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=mc(o.type,o.key,o.props,null,r.mode,s)).ref=Ra(r,a,o),s.return=r,r=s)}return u(r);case O:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=wc(o,r.mode,s)).return=r,r=a}return u(r);case A:return e(r,a,(l=o._init)(o._payload),s)}if(ee(o))return v(r,a,o,s);if(R(o))return y(r,a,o,s);Pa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=kc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ua=Fa(!0),Va=Fa(!1),Ba={},za=mi(Ba),qa=mi(Ba),Ga=mi(Ba);function Ka(e){if(e===Ba)throw Error(a(174));return e}function Wa(e,t){switch(bi(Ga,t),bi(qa,e),bi(za,Ba),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}gi(za),bi(za,t)}function Ha(){gi(za),gi(qa),gi(Ga)}function Qa(e){Ka(Ga.current);var t=Ka(za.current),n=ue(t,e.type);t!==n&&(bi(qa,e),bi(za,n))}function Ya(e){qa.current===e&&(gi(za),gi(qa))}var $a=mi(0);function Xa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ja=[];function Za(){for(var e=0;e<Ja.length;e++)Ja[e]._workInProgressVersionPrimary=null;Ja.length=0}var eo=k.ReactCurrentDispatcher,to=k.ReactCurrentBatchConfig,no=0,ro=null,io=null,ao=null,oo=!1,uo=!1,so=0,co=0;function lo(){throw Error(a(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tr(e[n],t[n]))return!1;return!0}function ho(e,t,n,r,i,o){if(no=o,ro=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,eo.current=null===e||null===e.memoizedState?Ho:Qo,e=n(r,i),uo){o=0;do{if(uo=!1,so=0,25<=o)throw Error(a(301));o+=1,ao=io=null,t.updateQueue=null,eo.current=Yo,e=n(r,i)}while(uo)}if(eo.current=Wo,t=null!==io&&null!==io.next,no=0,ao=io=ro=null,oo=!1,t)throw Error(a(300));return e}function po(){var e=0!==so;return so=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ao?ro.memoizedState=ao=e:ao=ao.next=e,ao}function yo(){if(null===io){var e=ro.alternate;e=null!==e?e.memoizedState:null}else e=io.next;var t=null===ao?ro.memoizedState:ao.next;if(null!==t)ao=t,io=e;else{if(null===e)throw Error(a(310));e={memoizedState:(io=e).memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},null===ao?ro.memoizedState=ao=e:ao=ao.next=e}return ao}function mo(e,t){return"function"===typeof t?t(e):t}function go(e){var t=yo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=io,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((no&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,ro.lanes|=f,ws|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,tr(r,t.memoizedState)||(hu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ro.lanes|=o,ws|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bo(e){var t=yo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);tr(o,t.memoizedState)||(hu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function wo(e,t){var n=ro,r=yo(),i=t(),o=!tr(r.memoizedState,i);if(o&&(r.memoizedState=i,hu=!0),r=r.queue,Ao(_o.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ao&&1&ao.memoizedState.tag){if(n.flags|=2048,Eo(9,xo.bind(null,n,r,i,t),void 0,null),null===ps)throw Error(a(349));0!==(30&no)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ro.updateQueue)?(t={lastEffect:null,stores:null},ro.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xo(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Bs(e,1,-1)}function _o(e,t,n){return n(function(){Io(t)&&Bs(e,1,-1)})}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tr(e,n)}catch(r){return!0}}function jo(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:e},t.queue=e,e=e.dispatch=function(e,t,n){var r=Vs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zo(e))qo(t,i);else{Go(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,tr(u,o))return}catch(s){}n=Us(),null!==(e=Bs(e,r,n))&&Ko(e,t,r)}}.bind(null,ro,e),[t.memoizedState,e]}function Eo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ro.updateQueue)?(t={lastEffect:null,stores:null},ro.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function So(){return yo().memoizedState}function To(e,t,n,r){var i=vo();ro.flags|=e,i.memoizedState=Eo(1|t,n,void 0,void 0===r?null:r)}function No(e,t,n,r){var i=yo();r=void 0===r?null:r;var a=void 0;if(null!==io){var o=io.memoizedState;if(a=o.destroy,null!==r&&fo(r,o.deps))return void(i.memoizedState=Eo(t,n,a,r))}ro.flags|=e,i.memoizedState=Eo(1|t,n,a,r)}function Co(e,t){return To(8390656,8,e,t)}function Ao(e,t){return No(2048,8,e,t)}function Do(e,t){return No(4,2,e,t)}function Lo(e,t){return No(4,4,e,t)}function Ro(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Po(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4,4,Ro.bind(null,t,e),n)}function Mo(){}function Fo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Uo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vo(e,t,n){return 0===(21&no)?(e.baseState&&(e.baseState=!1,hu=!0),e.memoizedState=n):(tr(n,t)||(n=ht(),ro.lanes|=n,ws|=n,e.baseState=!0),t)}function Bo(){return yo().memoizedState}function zo(e){var t=e.alternate;return e===ro||null!==t&&t===ro}function qo(e,t){uo=oo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Go(e,t,n){qs(e)?(null===(e=t.interleaved)?(n.next=n,null===Hi?Hi=[t]:Hi.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Ko(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Wo={readContext:Wi,useCallback:lo,useContext:lo,useEffect:lo,useImperativeHandle:lo,useInsertionEffect:lo,useLayoutEffect:lo,useMemo:lo,useReducer:lo,useRef:lo,useState:lo,useDebugValue:lo,useDeferredValue:lo,useTransition:lo,useMutableSource:lo,useSyncExternalStore:lo,useId:lo,unstable_isNewReconciler:!1},Ho={readContext:Wi,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Wi,useEffect:Co,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,To(4194308,4,Ro.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=function(e,t,n){var r=Vs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zo(e)?qo(t,n):(Go(e,t,n),null!==(e=Bs(e,r,n=Us()))&&Ko(e,t,r))}.bind(null,ro,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:jo,useDebugValue:Mo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=function(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=to.transition;to.transition={};try{e(!1),t()}finally{yt=n,to.transition=r}}.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ro,i=vo();if(Ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ps)throw Error(a(349));0!==(30&no)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Co(_o.bind(null,r,o,e),[e]),r.flags|=2048,Eo(9,xo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=ps.identifierPrefix;if(Ia){var n=ga;t=":"+t+"R"+(n=(ma&~(1<<32-rt(ma)-1)).toString(32)+n),0<(n=so++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=co++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qo={readContext:Wi,useCallback:Fo,useContext:Wi,useEffect:Ao,useImperativeHandle:Po,useInsertionEffect:Do,useLayoutEffect:Lo,useMemo:Uo,useReducer:go,useRef:So,useState:function(){return go(mo)},useDebugValue:Mo,useDeferredValue:function(e){return Vo(yo(),io.memoizedState,e)},useTransition:function(){return[go(mo)[0],yo().memoizedState]},useMutableSource:ko,useSyncExternalStore:wo,useId:Bo,unstable_isNewReconciler:!1},Yo={readContext:Wi,useCallback:Fo,useContext:Wi,useEffect:Ao,useImperativeHandle:Po,useInsertionEffect:Do,useLayoutEffect:Lo,useMemo:Uo,useReducer:bo,useRef:So,useState:function(){return bo(mo)},useDebugValue:Mo,useDeferredValue:function(e){var t=yo();return null===io?t.memoizedState=e:Vo(t,io.memoizedState,e)},useTransition:function(){return[bo(mo)[0],yo().memoizedState]},useMutableSource:ko,useSyncExternalStore:wo,useId:Bo,unstable_isNewReconciler:!1};function $o(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function Xo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Jo,Zo,eu,tu,nu="function"===typeof WeakMap?WeakMap:Map;function ru(e,t,n){(n=Xi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ts||(Ts=!0,Ns=r),Xo(0,t)},n}function iu(e,t,n){(n=Xi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Xo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){Xo(0,t),"function"!==typeof r&&(null===Cs?Cs=new Set([this]):Cs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function au(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=function(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Us(),e.pingedLanes|=e.suspendedLanes&n,ps===e&&(ys&n)===n&&(4===bs||3===bs&&(130023424&ys)===ys&&500>Qe()-js?Js(e,0):xs|=n),Gs(e,t)}.bind(null,e,t,n),t.then(e,e))}function ou(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function uu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Xi(-1,1)).tag=2,Ji(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function su(e,t){if(!Ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lu(e,t,n){var r=t.pendingProps;switch(Oa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cu(t),null;case 1:return Ii(t.type)&&ji(),cu(t),null;case 3:return r=t.stateNode,Ha(),gi(Oi),gi(wi),Za(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Aa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ja&&(Ws(ja),ja=null))),Zo(e,t),cu(t),null;case 5:Ya(t);var i=Ka(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)eu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return cu(t),null}if(e=Ka(za.current),Aa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ai]=t,r[oi]=o,e=0!==(1&t.mode),n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(i=0;i<Sr.length;i++)Ar(Sr[i],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":Y(r,o),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ar("invalid",r);break;case"textarea":re(r,o),Ar("invalid",r)}for(var s in me(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ar("scroll",r)}switch(n){case"input":K(r),J(r,o,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Wr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ai]=t,e[oi]=r,Jo(e,t,!1,!1),t.stateNode=e;e:{switch(s=ge(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),i=r;break;case"iframe":case"object":case"embed":Ar("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sr.length;i++)Ar(Sr[i],e);i=r;break;case"source":Ar("error",e),i=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),i=r;break;case"details":Ar("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ar("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":re(e,r),i=ne(e,r),Ar("invalid",e);break;default:i=r}for(o in me(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ve(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&le(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ar("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":K(e),J(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?te(e,!!r.multiple,o,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Wr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return cu(t),null;case 6:if(e&&null!=t.stateNode)tu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(Ga.current),Ka(za.current),Aa(t)){if(r=t.stateNode,n=t.memoizedProps,r[ai]=t,(o=r.nodeValue!==n)&&null!==(e=xa))switch(e.tag){case 3:Kr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ai]=t,t.stateNode=r}return cu(t),null;case 13:if(gi($a),r=t.memoizedState,Ia&&null!==_a&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=_a;r;)r=ni(r.nextSibling);return Da(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Aa(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ai]=t}else Da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return cu(t),null}return null!==ja&&(Ws(ja),ja=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Aa(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$a.current)?0===bs&&(bs=3):tc())),null!==t.updateQueue&&(t.flags|=4),cu(t),null);case 4:return Ha(),Zo(e,t),null===e&&Rr(t.stateNode.containerInfo),cu(t),null;case 10:return qi(t.type._context),cu(t),null;case 17:return Ii(t.type)&&ji(),cu(t),null;case 19:if(gi($a),null===(o=t.memoizedState))return cu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)su(o,!1);else{if(0!==bs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Xa(e))){for(t.flags|=128,su(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bi($a,1&$a.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Es&&(t.flags|=128,r=!0,su(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Xa(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),su(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Ia)return cu(t),null}else 2*Qe()-o.renderingStartTime>Es&&1073741824!==n&&(t.flags|=128,r=!0,su(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=$a.current,bi($a,r?1&n|2:1&n),t):(cu(t),null);case 22:case 23:return Xs(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ms)&&(cu(t),6&t.subtreeFlags&&(t.flags|=8192)):cu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}Jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Zo=function(){},eu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka(za.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=ne(e,i),r=ne(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Wr)}for(l in me(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ar("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},tu=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu=k.ReactCurrentOwner,hu=!1;function du(e,t,n,r){t.child=null===e?Va(t,null,n,r):Ua(t,e.child,n,r)}function pu(e,t,n,r,i){n=n.render;var a=t.ref;return Ki(t,i),r=ho(e,t,n,r,a,i),n=po(),null===e||hu?(Ia&&n&&wa(t),t.flags|=1,du(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ru(e,t,i))}function vu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||vc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,yu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:nr)(o,r)&&e.ref===t.ref)return Ru(e,t,i)}return t.flags|=1,(e=yc(a,r)).ref=t.ref,e.return=t,t.child=e}function yu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(nr(a,r)&&e.ref===t.ref){if(hu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ru(e,t,i);0!==(131072&e.flags)&&(hu=!0)}}return bu(e,t,n,r,i)}function mu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(gs,ms),ms|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bi(gs,ms),ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,bi(gs,ms),ms|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bi(gs,ms),ms|=r;return du(e,t,i,n),t.child}function gu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bu(e,t,n,r,i){var a=Ii(n)?xi:wi.current;return a=_i(t,a),Ki(t,i),n=ho(e,t,n,r,a,i),r=po(),null===e||hu?(Ia&&r&&wa(t),t.flags|=1,du(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ru(e,t,i))}function ku(e,t,n,r,i){if(Ii(n)){var a=!0;Ti(t)}else a=!1;if(Ki(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ua(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Wi(c):c=_i(t,c=Ii(n)?xi:wi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&sa(t,o,r,c),Qi=!1;var h=t.memoizedState;o.state=h,ta(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Oi.current||Qi?("function"===typeof l&&(ia(t,n,l,r),s=t.memoizedState),(u=Qi||oa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,$i(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Mi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Wi(s):s=_i(t,s=Ii(n)?xi:wi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&sa(t,o,r,s),Qi=!1,h=t.memoizedState,o.state=h,ta(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Oi.current||Qi?("function"===typeof d&&(ia(t,n,d,r),p=t.memoizedState),(c=Qi||oa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return wu(e,t,n,r,a,i)}function wu(e,t,n,r,i,a){gu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ni(t,n,!1),Ru(e,t,a);r=t.stateNode,fu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ua(t,e.child,null,a),t.child=Ua(t,null,u,a)):du(e,t,u,a),t.memoizedState=r.state,i&&Ni(t,n,!0),t.child}function Ou(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),Wa(e,t.containerInfo)}function xu(e,t,n,r,i){return Da(),La(i),t.flags|=256,du(e,t,n,r),t.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function Iu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Eu(e,t,n){var r,i=t.pendingProps,o=$a.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),bi($a,1&o),null===e)return Na(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=bc(o,i,0,null),e=gc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Iu(n),t.memoizedState=_u,e):Su(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Cu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=bc({mode:"visible",children:i.children},o,0,null),(u=gc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ua(t,e.child,null,n),t.child.memoizedState=Iu(n),t.memoizedState=_u,u);if(0===(1&t.mode))t=Cu(e,t,n,null);else if("$!"===r.data)t=Cu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),hu||i){if(null!==(i=ps)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Bs(e,i,-1))}tc(),t=Cu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=function(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fc(e,n)}.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,_a=ni(r.nextSibling),xa=t,Ia=!0,ja=null,null!==n&&(pa[va++]=ma,pa[va++]=ga,pa[va++]=ya,ma=n.id,ga=n.overflow,ya=t),(t=Su(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Nu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Iu(n):ju(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=_u,i):(n=Tu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Nu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Iu(n):ju(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=_u,i):(n=Tu(e,t,i.children,n),t.memoizedState=null,n)}function Su(e,t){return(t=bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Tu(e,t,n,r){var i=e.child;return e=i.sibling,n=yc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Nu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=yc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=yc(o,r):(r=gc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Cu(e,t,n,r){return null!==r&&La(r),Ua(t,e.child,null,n),(e=Su(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Au(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Gi(e.return,t,n)}function Du(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Lu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(du(e,t,r.children,n),0!==(2&(r=$a.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Au(e,n,t);else if(19===e.tag)Au(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bi($a,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Xa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Du(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Xa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Du(t,!0,n,null,a);break;case"together":Du(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ru(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ws|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=yc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=yc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Pu(e,t){switch(Oa(t),t.tag){case 1:return Ii(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ha(),gi(Oi),gi(wi),Za(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ya(t),null;case 13:if(gi($a),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return gi($a),null;case 4:return Ha(),null;case 10:return qi(t.type._context),null;case 22:case 23:return Xs(),null;case 24:default:return null}}var Mu=!1,Fu=!1,Uu="function"===typeof WeakSet?WeakSet:Set,Vu=null;function Bu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){lc(e,t,r)}else n.current=null}function zu(e,t,n){try{n()}catch(r){lc(e,t,r)}}var qu=!1;function Gu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&zu(t,n,a)}i=i.next}while(i!==r)}}function Ku(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Wu(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}"function"===typeof t?t(e):t.current=e}}function Hu(e){var t=e.alternate;null!==t&&(e.alternate=null,Hu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ai],delete t[oi],delete t[si],delete t[ci],delete t[li])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qu(e){return 5===e.tag||3===e.tag||4===e.tag}function Yu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Qu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var $u=null,Xu=!1;function Ju(e,t,n){for(n=n.child;null!==n;)Zu(e,t,n),n=n.sibling}function Zu(e,t,n){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(tt,n)}catch(u){}switch(n.tag){case 5:Fu||Bu(n,t);case 6:var r=$u,i=Xu;$u=null,Ju(e,t,n),Xu=i,null!==($u=r)&&(Xu?(e=$u,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):$u.removeChild(n.stateNode));break;case 18:null!==$u&&(Xu?(e=$u,n=n.stateNode,8===e.nodeType?ti(e.parentNode,n):1===e.nodeType&&ti(e,n),Ut(e)):ti($u,n.stateNode));break;case 4:r=$u,i=Xu,$u=n.stateNode.containerInfo,Xu=!0,Ju(e,t,n),$u=r,Xu=i;break;case 0:case 11:case 14:case 15:if(!Fu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)?zu(n,t,o):0!==(4&a)&&zu(n,t,o)),i=i.next}while(i!==r)}Ju(e,t,n);break;case 1:if(!Fu&&(Bu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){lc(n,t,u)}Ju(e,t,n);break;case 21:Ju(e,t,n);break;case 22:1&n.mode?(Fu=(r=Fu)||null!==n.memoizedState,Ju(e,t,n),Fu=r):Ju(e,t,n);break;default:Ju(e,t,n)}}function es(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Uu),t.forEach(function(t){var r=function(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),fc(e,n)}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ts(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:$u=s.stateNode,Xu=!1;break e;case 3:case 4:$u=s.stateNode.containerInfo,Xu=!0;break e}s=s.return}if(null===$u)throw Error(a(160));Zu(o,u,i),$u=null,Xu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){lc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ns(t,e),t=t.sibling}function ns(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ts(t,e),rs(e),4&r){try{Gu(3,e,e.return),Ku(3,e)}catch(v){lc(e,e.return,v)}try{Gu(5,e,e.return)}catch(v){lc(e,e.return,v)}}break;case 1:ts(t,e),rs(e),512&r&&null!==n&&Bu(n,n.return);break;case 5:if(ts(t,e),rs(e),512&r&&null!==n&&Bu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(v){lc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ge(s,u);var l=ge(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ve(i,h):"dangerouslySetInnerHTML"===f?le(i,h):"children"===f?fe(i,h):b(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ie(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?te(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?te(i,!!o.multiple,o.defaultValue,!0):te(i,!!o.multiple,o.multiple?[]:"",!1))}i[oi]=o}catch(v){lc(e,e.return,v)}}break;case 6:if(ts(t,e),rs(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){lc(e,e.return,v)}}break;case 3:if(ts(t,e),rs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){lc(e,e.return,v)}break;case 4:ts(t,e),rs(e);break;case 13:ts(t,e),rs(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(js=Qe()),4&r&&es(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Fu=(f=Fu)||l,ts(t,e),Fu=f):ts(t,e),rs(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(v){lc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){lc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Vu=e,e=e.child;null!==e;){for(l=Vu=e;null!==Vu;){switch(h=(f=Vu).child,f.tag){case 0:case 11:case 14:case 15:Gu(4,f,f.return);break;case 1:if(Bu(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){lc(d,p,v)}}break;case 5:Bu(f,f.return);break;case 22:if(null!==f.memoizedState){os(l);continue}}null!==h?(h.return=f,Vu=h):os(l)}e=e.sibling}}break;case 19:ts(t,e),rs(e),4&r&&es(e);break;case 21:break;default:ts(t,e),rs(e)}}function rs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Qu(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,Yu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Wr));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,Yu(e),o);break;default:throw Error(a(161))}}catch(u){lc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function is(e,t,n){Vu=e,function e(t,n,r){for(var i=0!==(1&t.mode);null!==Vu;){var a=Vu,o=a.child;if(22===a.tag&&i){var u=null!==a.memoizedState||Mu;if(!u){var s=a.alternate,c=null!==s&&null!==s.memoizedState||Fu;s=Mu;var l=Fu;if(Mu=u,(Fu=c)&&!l)for(Vu=a;null!==Vu;)c=(u=Vu).child,22===u.tag&&null!==u.memoizedState?us(a):null!==c?(c.return=u,Vu=c):us(a);for(;null!==o;)Vu=o,e(o,n,r),o=o.sibling;Vu=a,Mu=s,Fu=l}as(t)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Vu=o):as(t)}}(e,t,n)}function as(e){for(;null!==Vu;){var t=Vu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Fu||Ku(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Fu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Mi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&na(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}na(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Ut(h)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Fu||512&t.flags&&Wu(t)}catch(d){lc(t,t.return,d)}}if(t===e){Vu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Vu=n;break}Vu=t.return}}function os(e){for(;null!==Vu;){var t=Vu;if(t===e){Vu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Vu=n;break}Vu=t.return}}function us(e){for(;null!==Vu;){var t=Vu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ku(4,t)}catch(s){lc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){lc(t,i,s)}}var a=t.return;try{Wu(t)}catch(s){lc(t,a,s)}break;case 5:var o=t.return;try{Wu(t)}catch(s){lc(t,o,s)}}}catch(s){lc(t,t.return,s)}if(t===e){Vu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Vu=u;break}Vu=t.return}}var ss,cs=Math.ceil,ls=k.ReactCurrentDispatcher,fs=k.ReactCurrentOwner,hs=k.ReactCurrentBatchConfig,ds=0,ps=null,vs=null,ys=0,ms=0,gs=mi(0),bs=0,ks=null,ws=0,Os=0,xs=0,_s=null,Is=null,js=0,Es=1/0,Ss=null,Ts=!1,Ns=null,Cs=null,As=!1,Ds=null,Ls=0,Rs=0,Ps=null,Ms=-1,Fs=0;function Us(){return 0!==(6&ds)?Qe():-1!==Ms?Ms:Ms=Qe()}function Vs(e){return 0===(1&e.mode)?1:0!==(2&ds)&&0!==ys?ys&-ys:null!==Pi.transition?(0===Fs&&(Fs=ht()),Fs):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Ht(e.type)}function Bs(e,t,n){if(50<Rs)throw Rs=0,Ps=null,Error(a(185));var r=zs(e,t);return null===r?null:(pt(r,t,n),0!==(2&ds)&&r===ps||(r===ps&&(0===(2&ds)&&(Os|=t),4===bs&&Hs(r,ys)),Gs(r,n),1===t&&0===ds&&0===(1&e.mode)&&(Es=Qe()+500,Ai&&Ri())),r)}function zs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function qs(e){return(null!==ps||null!==Hi)&&0!==(1&e.mode)&&0===(2&ds)}function Gs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-rt(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=lt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ct(e,e===ps?ys:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ai=!0,Li(e)}(Qs.bind(null,e)):Li(Qs.bind(null,e)),Zr(function(){0===ds&&Ri()}),n=null;else{switch(mt(r)){case 1:n=$e;break;case 4:n=Xe;break;case 16:n=Je;break;case 536870912:n=et;break;default:n=Je}n=hc(n,function e(t,n){Ms=-1;Fs=0;if(0!==(6&ds))throw Error(a(327));var r=t.callbackNode;if(sc()&&t.callbackNode!==r)return null;var i=ct(t,t===ps?ys:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||n)n=nc(t,i);else{n=i;var o=ds;ds|=2;var u=ec();for(ps===t&&ys===n||(Ss=null,Es=Qe()+500,Js(t,n));;)try{ic();break}catch(c){Zs(t,c)}zi(),ls.current=u,ds=o,null!==vs?n=0:(ps=null,ys=0,n=bs)}if(0!==n){if(2===n&&(0!==(o=ft(t))&&(i=o,n=Ks(t,o))),1===n)throw r=ks,Js(t,0),Hs(t,i),Gs(t,Qe()),r;if(6===n)Hs(t,i);else{if(o=t.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!tr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(n=nc(t,i))&&(0!==(u=ft(t))&&(i=u,n=Ks(t,u))),1===n))throw r=ks,Js(t,0),Hs(t,i),Gs(t,Qe()),r;switch(t.finishedWork=o,t.finishedLanes=i,n){case 0:case 1:throw Error(a(345));case 2:uc(t,Is,Ss);break;case 3:if(Hs(t,i),(130023424&i)===i&&10<(n=js+500-Qe())){if(0!==ct(t,0))break;if(((o=t.suspendedLanes)&i)!==i){Us(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=$r(uc.bind(null,t,Is,Ss),n);break}uc(t,Is,Ss);break;case 4:if(Hs(t,i),(4194240&i)===i)break;for(n=t.eventTimes,o=-1;0<i;){var s=31-rt(i);u=1<<s,(s=n[s])>o&&(o=s),i&=~u}if(i=o,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*cs(i/1960))-i)){t.timeoutHandle=$r(uc.bind(null,t,Is,Ss),i);break}uc(t,Is,Ss);break;case 5:uc(t,Is,Ss);break;default:throw Error(a(329))}}}Gs(t,Qe());return t.callbackNode===r?e.bind(null,t):null}.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ks(e,t){var n=_s;return e.current.memoizedState.isDehydrated&&(Js(e,t).flags|=256),2!==(e=nc(e,t))&&(t=Is,Is=n,null!==t&&Ws(t)),e}function Ws(e){null===Is?Is=e:Is.push.apply(Is,e)}function Hs(e,t){for(t&=~xs,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function Qs(e){if(0!==(6&ds))throw Error(a(327));sc();var t=ct(e,0);if(0===(1&t))return Gs(e,Qe()),null;var n=nc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=Ks(e,r))}if(1===n)throw n=ks,Js(e,0),Hs(e,t),Gs(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uc(e,Is,Ss),Gs(e,Qe()),null}function Ys(e,t){var n=ds;ds|=1;try{return e(t)}finally{0===(ds=n)&&(Es=Qe()+500,Ai&&Ri())}}function $s(e){null!==Ds&&0===Ds.tag&&0===(6&ds)&&sc();var t=ds;ds|=1;var n=hs.transition,r=yt;try{if(hs.transition=null,yt=1,e)return e()}finally{yt=r,hs.transition=n,0===(6&(ds=t))&&Ri()}}function Xs(){ms=gs.current,gi(gs)}function Js(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Xr(n)),null!==vs)for(n=vs.return;null!==n;){var r=n;switch(Oa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:Ha(),gi(Oi),gi(wi),Za();break;case 5:Ya(r);break;case 4:Ha();break;case 13:case 19:gi($a);break;case 10:qi(r.type._context);break;case 22:case 23:Xs()}n=n.return}if(ps=e,vs=e=yc(e.current,null),ys=ms=t,bs=0,ks=null,xs=Os=ws=0,Is=_s=null,null!==Hi){for(t=0;t<Hi.length;t++)if(null!==(r=(n=Hi[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Hi=null}return e}function Zs(e,t){for(;;){var n=vs;try{if(zi(),eo.current=Wo,oo){for(var r=ro.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}oo=!1}if(no=0,ao=io=ro=null,uo=!1,so=0,fs.current=null,null===n||null===n.return){bs=1,ks=t,vs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=ys,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ou(u);if(null!==p){p.flags&=-257,uu(p,u,s,0,t),1&p.mode&&au(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){au(o,l,t),tc();break e}c=Error(a(426))}else if(Ia&&1&s.mode){var m=ou(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),uu(m,u,s,0,t),La(c);break e}}o=c,4!==bs&&(bs=2),null===_s?_s=[o]:_s.push(o),c=$o(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ea(s,ru(0,c,t));break e;case 1:o=c;var g=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Cs||!Cs.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,ea(s,iu(s,o,t));break e}}s=s.return}while(null!==s)}oc(n)}catch(k){t=k,vs===n&&null!==n&&(vs=n=n.return);continue}break}}function ec(){var e=ls.current;return ls.current=Wo,null===e?Wo:e}function tc(){0!==bs&&3!==bs&&2!==bs||(bs=4),null===ps||0===(268435455&ws)&&0===(268435455&Os)||Hs(ps,ys)}function nc(e,t){var n=ds;ds|=2;var r=ec();for(ps===e&&ys===t||(Ss=null,Js(e,t));;)try{rc();break}catch(i){Zs(e,i)}if(zi(),ds=n,ls.current=r,null!==vs)throw Error(a(261));return ps=null,ys=0,bs}function rc(){for(;null!==vs;)ac(vs)}function ic(){for(;null!==vs&&!We();)ac(vs)}function ac(e){var t=ss(e.alternate,e,ms);e.memoizedProps=e.pendingProps,null===t?oc(e):vs=t,fs.current=null}function oc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=lu(n,t,ms)))return void(vs=n)}else{if(null!==(n=Pu(n,t)))return n.flags&=32767,void(vs=n);if(null===e)return bs=6,void(vs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(vs=t);vs=t=e}while(null!==t);0===bs&&(bs=5)}function uc(e,t,n){var r=yt,i=hs.transition;try{hs.transition=null,yt=1,function(e,t,n,r){do{sc()}while(null!==Ds);if(0!==(6&ds))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===ps&&(vs=ps=null,ys=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||As||(As=!0,hc(Je,function(){return sc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=hs.transition,hs.transition=null;var u=yt;yt=1;var s=ds;ds|=4,fs.current=null,function(e,t){if(Hr=Bt,or(e=ar())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(O){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qr={focusedElem:e,selectionRange:n},Bt=!1,Vu=t;null!==Vu;)if(e=(t=Vu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Vu=e;else for(;null!==Vu;){t=Vu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Mi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;if(1===k.nodeType)k.textContent="";else if(9===k.nodeType){var w=k.body;null!=w&&(w.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(O){lc(t,t.return,O)}if(null!==(e=t.sibling)){e.return=t.return,Vu=e;break}Vu=t.return}v=qu,qu=!1}(e,n),ns(n,e),ur(Qr),Bt=!!Hr,Qr=Hr=null,e.current=n,is(n,e,i),He(),ds=s,yt=u,hs.transition=o}else e.current=n;if(As&&(As=!1,Ds=e,Ls=i),0===(o=e.pendingLanes)&&(Cs=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(tt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),Gs(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Ts)throw Ts=!1,e=Ns,Ns=null,e;0!==(1&Ls)&&0!==e.tag&&sc(),0!==(1&(o=e.pendingLanes))?e===Ps?Rs++:(Rs=0,Ps=e):Rs=0,Ri()}(e,t,n,r)}finally{hs.transition=i,yt=r}return null}function sc(){if(null!==Ds){var e=mt(Ls),t=hs.transition,n=yt;try{if(hs.transition=null,yt=16>e?16:e,null===Ds)var r=!1;else{if(e=Ds,Ds=null,Ls=0,0!==(6&ds))throw Error(a(331));var i=ds;for(ds|=4,Vu=e.current;null!==Vu;){var o=Vu,u=o.child;if(0!==(16&Vu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Vu=l;null!==Vu;){var f=Vu;switch(f.tag){case 0:case 11:case 15:Gu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Vu=h;else for(;null!==Vu;){var d=(f=Vu).sibling,p=f.return;if(Hu(f),f===l){Vu=null;break}if(null!==d){d.return=p,Vu=d;break}Vu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Vu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Vu=u;else e:for(;null!==Vu;){if(0!==(2048&(o=Vu).flags))switch(o.tag){case 0:case 11:case 15:Gu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Vu=g;break e}Vu=o.return}}var b=e.current;for(Vu=b;null!==Vu;){var k=(u=Vu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Vu=k;else e:for(u=b;null!==Vu;){if(0!==(2048&(s=Vu).flags))try{switch(s.tag){case 0:case 11:case 15:Ku(9,s)}}catch(O){lc(s,s.return,O)}if(s===u){Vu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Vu=w;break e}Vu=s.return}}if(ds=i,Ri(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(tt,e)}catch(O){}r=!0}return r}finally{yt=n,hs.transition=t}}return!1}function cc(e,t,n){Ji(e,t=ru(0,t=$o(n,t),1)),t=Us(),null!==(e=zs(e,1))&&(pt(e,1,t),Gs(e,t))}function lc(e,t,n){if(3===e.tag)cc(e,e,n);else for(;null!==t;){if(3===t.tag){cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Cs||!Cs.has(r))){Ji(t,e=iu(t,e=$o(n,e),1)),e=Us(),null!==(t=zs(t,1))&&(pt(t,1,e),Gs(t,e));break}}t=t.return}}function fc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Us();null!==(e=zs(e,t))&&(pt(e,t,n),Gs(e,n))}function hc(e,t){return Ge(e,t)}function dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pc(e,t,n,r){return new dc(e,t,n,r)}function vc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function yc(e,t){var n=e.alternate;return null===n?((n=pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function mc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)vc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return gc(n.children,i,o,t);case _:u=8,i|=8;break;case I:return(e=pc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case T:return(e=pc(13,n,t,i)).elementType=T,e.lanes=o,e;case N:return(e=pc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return bc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:u=10;break e;case E:u=9;break e;case S:u=11;break e;case C:u=14;break e;case A:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function gc(e,t,n,r){return(e=pc(7,e,r,t)).lanes=n,e}function bc(e,t,n,r){return(e=pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function kc(e,t,n){return(e=pc(6,e,null,t)).lanes=n,e}function wc(e,t,n){return(t=pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dt(0),this.expirationTimes=dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xc(e,t,n,r,i,a,o,u,s){return e=new Oc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yi(a),e}function _c(e){if(!e)return ki;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Si(e,n,t)}return t}function Ic(e,t,n,r,i,a,o,u,s){return(e=xc(n,r,!0,e,0,a,0,u,s)).context=_c(null),n=e.current,(a=Xi(r=Us(),i=Vs(n))).callback=void 0!==t&&null!==t?t:null,Ji(n,a),e.current.lanes=i,pt(e,i,r),Gs(e,r),e}function jc(e,t,n,r){var i=t.current,a=Us(),o=Vs(i);return n=_c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Xi(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),Ji(i,t),null!==(e=Bs(i,o,a))&&Zi(e,i,o),o}function Ec(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Sc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Tc(e,t){Sc(e,t),(e=e.alternate)&&Sc(e,t)}ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)hu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return hu=!1,function(e,t,n){switch(t.tag){case 3:Ou(t),Da();break;case 5:Qa(t);break;case 1:Ii(t.type)&&Ti(t);break;case 4:Wa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;bi(Fi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(bi($a,1&$a.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Eu(e,t,n):(bi($a,1&$a.current),null!==(e=Ru(e,t,n))?e.sibling:null);bi($a,1&$a.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Lu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),bi($a,$a.current),r)break;return null;case 22:case 23:return t.lanes=0,mu(e,t,n)}return Ru(e,t,n)}(e,t,n);hu=0!==(131072&e.flags)}else hu=!1,Ia&&0!==(1048576&t.flags)&&ka(t,da,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=_i(t,wi.current);Ki(t,n),i=ho(null,t,r,e,i,n);var o=po();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(o=!0,Ti(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Yi(t),i.updater=aa,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=wu(null,t,r,!0,o,n)):(t.tag=0,Ia&&o&&wa(t),du(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return vc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===C)return 14}return 2}(r),e=Mi(r,e),i){case 0:t=bu(null,t,r,e,n);break e;case 1:t=ku(null,t,r,e,n);break e;case 11:t=pu(null,t,r,e,n);break e;case 14:t=vu(null,t,r,Mi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:Mi(r,i),n);case 1:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:Mi(r,i),n);case 3:e:{if(Ou(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,$i(e,t),ta(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=xu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=xu(e,t,r,n,i=Error(a(424)));break e}for(_a=ni(t.stateNode.containerInfo.firstChild),xa=t,Ia=!0,ja=null,n=Va(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Da(),r===i){t=Ru(e,t,n);break e}du(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&Na(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Yr(r,i)?u=null:null!==o&&Yr(r,o)&&(t.flags|=32),gu(e,t),du(e,t,u,n),t.child;case 6:return null===e&&Na(t),null;case 13:return Eu(e,t,n);case 4:return Wa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ua(t,null,r,n):du(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,pu(e,t,r,i=t.elementType===r?i:Mi(r,i),n);case 7:return du(e,t,t.pendingProps,n),t.child;case 8:case 12:return du(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,bi(Fi,r._currentValue),r._currentValue=u,null!==o)if(tr(o.value,u)){if(o.children===i.children&&!Oi.current){t=Ru(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Xi(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Gi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Gi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}du(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ki(t,n),r=r(i=Wi(i)),t.flags|=1,du(e,t,r,n),t.child;case 14:return i=Mi(r=t.type,t.pendingProps),vu(e,t,r,i=Mi(r.type,i),n);case 15:return yu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ii(r)?(e=!0,Ti(t)):e=!1,Ki(t,n),ua(t,r,i),ca(t,r,i,n),wu(null,t,r,!0,e,n);case 19:return Lu(e,t,n);case 22:return mu(e,t,n)}throw Error(a(156,t.tag))};var Nc="function"===typeof reportError?reportError:function(e){console.error(e)};function Cc(e){this._internalRoot=e}function Ac(e){this._internalRoot=e}function Dc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Lc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Rc(){}function Pc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Ec(o);u.call(e)}}jc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Ec(o);a.call(e)}}var o=Ic(t,r,e,0,null,!1,0,"",Rc);return e._reactRootContainer=o,e[ui]=o.current,Rr(8===e.nodeType?e.parentNode:e),$s(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Ec(s);u.call(e)}}var s=xc(e,0,!1,null,0,!1,0,"",Rc);return e._reactRootContainer=s,e[ui]=s.current,Rr(8===e.nodeType?e.parentNode:e),$s(function(){jc(t,s,n,r)}),s}(n,t,e,i,r);return Ec(o)}Ac.prototype.render=Cc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));jc(e,t,null,null)},Ac.prototype.unmount=Cc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$s(function(){jc(null,e,null,null)}),t[ui]=null}},Ac.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},gt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=st(t.pendingLanes);0!==n&&(vt(t,1|n),Gs(t,Qe()),0===(6&ds)&&(Es=Qe()+500,Ri()))}break;case 13:var r=Us();$s(function(){return Bs(e,1,r)}),Tc(e,1)}},bt=function(e){13===e.tag&&(Bs(e,134217728,Us()),Tc(e,134217728))},kt=function(e){if(13===e.tag){var t=Us(),n=Vs(e);Bs(e,n,t),Tc(e,n)}},wt=function(){return yt},Ot=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&te(e,!!n.multiple,t,!1)}},Ee=Ys,Se=$s;var Mc={usingClientEntryPoint:!1,Events:[hi,di,pi,Ie,je,Ys]},Fc={findFiberByHostInstance:fi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},Uc={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{tt=Vc.inject(Uc),nt=Vc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Dc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:O,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Dc(e))throw Error(a(299));var n=!1,r="",i=Nc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=xc(e,1,!1,null,0,n,0,r,i),e[ui]=t.current,Rr(8===e.nodeType?e.parentNode:e),new Cc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return $s(e)},t.hydrate=function(e,t,n){if(!Lc(t))throw Error(a(200));return Pc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Dc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Nc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Ic(t,null,e,1,null!=n?n:null,i,0,o,u),e[ui]=t.current,Rr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ac(t)},t.render=function(e,t,n){if(!Lc(t))throw Error(a(200));return Pc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Lc(e))throw Error(a(40));return!!e._reactRootContainer&&($s(function(){Pc(null,null,e,!1,function(){e._reactRootContainer=null,e[ui]=null})}),!0)},t.unstable_batchedUpdates=Ys,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Pc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},function(e,t,n){"use strict";e.exports=n(36)},function(e,t,n){"use strict";(function(e){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof e?e:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,k(e),!v)if(null!==r(c))v=!0,D(O);else{var t=r(l);null!==t&&L(w,t.startTime-e)}}function O(e,n){v=!1,y&&(y=!1,g(j),j=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&L(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,_=!1,I=null,j=-1,E=5,S=-1;function T(){return!(t.unstable_now()-S<E)}function N(){if(null!==I){var e=t.unstable_now();S=e;var n=!0;try{n=I(!0,e)}finally{n?x():(_=!1,I=null)}}else _=!1}if("function"===typeof b)x=function(){b(N)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,A=C.port2;C.port1.onmessage=N,x=function(){A.postMessage(null)}}else x=function(){m(N,0)};function D(e){I=e,_||(_=!0,x())}function L(e,n){j=m(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(O))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(j),j=-1):y=!0,L(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(O))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}).call(this,n(37).setImmediate)},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(38),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(22))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},o=!1,u=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var n=u.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[i]=o,r(i),i++},s.clearImmediate=c}function c(e){delete a[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(22),n(26))},,,,,,,function(e,t,n){"use strict";n(46)},function(e,t,n){"use strict";(function(e){var t=n(1),r=n(2),i=n(0),a=n(19),o=n(6),u=n(15),s=n(4);function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var f={};function h(){}function d(){}function p(){}var v={};u(v,i,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var r;this._invoke=function(i,a){function o(){return new t(function(r,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(f).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(i,a,r,o)})}return r=r?r.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(k.prototype),u(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),u(g,o,"Generator"),u(g,i,function(){return this}),u(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var l="@firebase/auth-compat",f="0.2.15",h=1e3;function d(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(s.m)();return!("file:"!==d()&&"ionic:"!==d()&&"capacitor:"!==d()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(s.m)();return Object(s.r)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(s.m)();return/Edge\/\d+/.test(e)}(e)}function y(){try{var e=self.localStorage,t=o.s();if(e)return e.setItem(t,"1"),e.removeItem(t),!v()||Object(s.s)()}catch(n){return m()&&Object(s.s)()}return!1}function m(){return"undefined"!==typeof e&&"WorkerGlobalScope"in e&&"importScripts"in e}function g(){return("http:"===d()||"https:"===d()||Object(s.o)()||p())&&!(Object(s.v)()||Object(s.u)())&&y()&&!m()}function b(){return p()&&"undefined"!==typeof document}function k(){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise(function(e){var t=setTimeout(function(){e(!1)},h);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var O={LOCAL:"local",NONE:"none",SESSION:"session"},x=o.p,_="persistence";function I(e,t){x(Object.values(O).includes(t),e,"invalid-persistence-type"),Object(s.v)()?x(t!==O.SESSION,e,"unsupported-persistence-type"):Object(s.u)()?x(t===O.NONE,e,"unsupported-persistence-type"):m()?x(t===O.NONE||t===O.LOCAL&&Object(s.s)(),e,"unsupported-persistence-type"):x(t===O.NONE||y(),e,"unsupported-persistence-type")}function j(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(c().mark(function e(t){var n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=S(),r=o.w(_,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var T=o.p,N=function(){function e(){Object(t.a)(this,e),this.browserResolver=o.t(o.A),this.cordovaResolver=o.t(o.F),this.underlyingResolver=null,this._redirectPersistence=o.B,this._completeRedirectFn=o.u,this._overrideRedirectResult=o.v}return Object(r.a)(e,[{key:"_initialize",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Object(i.a)(c().mark(function e(t,n,r,i){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Object(i.a)(c().mark(function e(t,n,r,i){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"selectUnderlyingResolver",value:function(){var e=Object(i.a)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_shouldInitProactively",get:function(){return b()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return T(this.underlyingResolver,"internal-error"),this.underlyingResolver}}]),e}();function C(e){return e.unwrap()}function A(e){var t=(e instanceof s.c?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof s.c)&&"temporaryProof"in t&&"phoneNumber"in t)return o.i.credentialFromResult(e);var n,r=t.providerId;if(!r||r===o.k.PASSWORD)return null;switch(r){case o.k.GOOGLE:n=o.f;break;case o.k.FACEBOOK:n=o.d;break;case o.k.GITHUB:n=o.e;break;case o.k.TWITTER:n=o.o;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,u=t.oauthTokenSecret,c=t.pendingToken,l=t.nonce;return a||u||i||c?c?r.startsWith("saml.")?o.m._create(r,c):o.g._fromParams({providerId:r,signInMethod:r,pendingToken:c,idToken:i,accessToken:a}):new o.h(r).credential({idToken:i,accessToken:a,rawNonce:l}):null}return e instanceof s.c?n.credentialFromError(e):n.credentialFromResult(e)}function D(e,t){return t.catch(function(t){throw t instanceof s.c&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new P(e,o.K(e,t));else if(r){var i=A(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,A(t)),additionalUserInfo:o.J(e),user:M.getOrCreate(r)}})}function L(e,t){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(c().mark(function e(t,n){var r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return D(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var P=function(){function e(n,r){Object(t.a)(this,e),this.resolver=r,this.auth=n.wrapped()}return Object(r.a)(e,[{key:"resolveSignIn",value:function(e){return D(C(this.auth),this.resolver.resolveSignIn(e))}},{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}}]),e}(),M=function(){function e(n){Object(t.a)(this,e),this._delegate=n,this.multiFactor=o.T(n)}return Object(r.a)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(this.auth,o.P(this._delegate,t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Object(i.a)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L(this.auth,o.Q(this._delegate,t,n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(this.auth,o.R(this._delegate,t,N)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(o.q(this.auth));case 2:return e.abrupt("return",o.S(this._delegate,t,N));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(this.auth,o.U(this._delegate,t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return L(this.auth,o.V(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return D(this.auth,o.W(this._delegate,e,N))}},{key:"reauthenticateWithRedirect",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(o.q(this.auth));case 2:return e.abrupt("return",o.X(this._delegate,t,N));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return o.Y(this._delegate,e)}},{key:"unlink",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.jb(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return o.kb(this._delegate,e)}},{key:"updatePassword",value:function(e){return o.lb(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return o.mb(this._delegate,e)}},{key:"updateProfile",value:function(e){return o.nb(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return o.ob(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();M.USER_MAP=new WeakMap;var F=o.p,U=function(){function e(n,r){if(Object(t.a)(this,e),this.app=n,r.isInitialized())return this._delegate=r.getImmediate(),void this.linkUnderlyingAuth();var i=n.options.apiKey;F(i,"invalid-api-key",{appName:n.name}),F(i,"invalid-api-key",{appName:n.name});var a="undefined"!==typeof window?N:void 0;this._delegate=r.initialize({options:{persistence:B(i,n.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(o.H),this.linkUnderlyingAuth()}return Object(r.a)(e,[{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){o.E(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return o.y(this._delegate,e)}},{key:"checkActionCode",value:function(e){return o.C(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return o.D(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Object(i.a)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(this._delegate,o.G(this._delegate,t,n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return o.I(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return o.O(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Object(i.a)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(g(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,o.L(this._delegate,N);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",D(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){o.x(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=V(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=V(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return o.ab(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return o.Z(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Object(i.a)(c().mark(function e(t){var n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I(this._delegate,t),e.t0=t,e.next=e.t0===O.SESSION?4:e.t0===O.LOCAL?6:e.t0===O.NONE?11:13;break;case 4:return n=o.B,e.abrupt("break",14);case 6:return e.next=8,o.t(o.N)._isAvailable();case 8:return r=e.sent,n=r?o.N:o.z,e.abrupt("break",14);case 11:return n=o.M,e.abrupt("break",14);case 13:return e.abrupt("return",o.r("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return D(this._delegate,o.bb(this._delegate))}},{key:"signInWithCredential",value:function(e){return D(this._delegate,o.cb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return D(this._delegate,o.db(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return D(this._delegate,o.eb(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return D(this._delegate,o.fb(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return L(this._delegate,o.gb(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(g(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",D(this._delegate,o.hb(this._delegate,t,N)));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Object(i.a)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(g(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,j(this._delegate);case 3:return e.abrupt("return",o.ib(this._delegate,t,N));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return o.pb(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}},{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?M.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}}]),e}();function V(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&M.getOrCreate(e))},error:t,complete:n}}function B(e,t){var n=function(e,t){var n=S();if(!n)return[];var r=o.w(_,e,t);switch(n.getItem(r)){case O.NONE:return[o.M];case O.LOCAL:return[o.N,o.B];case O.SESSION:return[o.B];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(o.N)||n.push(o.N),"undefined"!==typeof window)for(var r=0,i=[o.z,o.B];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(o.M)||n.push(o.M),n}U.Persistence=O;var z=function(){function e(){Object(t.a)(this,e),this.providerId="phone",this._delegate=new o.i(C(a.a.auth()))}return Object(r.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return o.i.credential(e,t)}}]),e}();z.PHONE_SIGN_IN_METHOD=o.i.PHONE_SIGN_IN_METHOD,z.PROVIDER_ID=o.i.PROVIDER_ID;var q,G=o.p,K=function(){function e(n,r){var i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.app();Object(t.a)(this,e),G(null===(i=u.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:u.name}),this._delegate=new o.l(n,r,u.auth()),this.type=this._delegate.type}return Object(r.a)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),W="auth-compat";(q=a.a).INTERNAL.registerComponent(new u.a(W,function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new U(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:o.a.EMAIL_SIGNIN,PASSWORD_RESET:o.a.PASSWORD_RESET,RECOVER_EMAIL:o.a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:o.a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:o.a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:o.a.VERIFY_EMAIL}},EmailAuthProvider:o.c,FacebookAuthProvider:o.d,GithubAuthProvider:o.e,GoogleAuthProvider:o.f,OAuthProvider:o.h,SAMLAuthProvider:o.n,PhoneAuthProvider:z,PhoneMultiFactorGenerator:o.j,RecaptchaVerifier:K,TwitterAuthProvider:o.o,Auth:U,AuthCredential:o.b,Error:s.c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion(l,f)}).call(this,n(22))},function(e,t,n){"use strict";var r=n(11);Object(r.registerVersion)("firebase","9.8.2","app")},,,,,,,,,function(e,t,n){"use strict";var r=n(21),i=n(10),a=n(7),o=n(9),u=n(1),s=n(2),c=n(19),l=n(8),f=n(4),h=n(15);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v="@firebase/firestore-compat",y="0.1.18";function m(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new l.g("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function g(){if("undefined"===typeof Uint8Array)throw new l.g("unimplemented","Uint8Arrays are not available in this environment.")}function b(){if(!Object(l.r)())throw new l.g("unimplemented","Blobs are unavailable in Firestore in this environment.")}var k=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"toBase64",value:function(){return b(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return g(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return b(),new e(l.b.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return g(),new e(l.b.fromUint8Array(t))}}]),e}();function w(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var O=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return Object(l.F)(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return Object(l.G)(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return Object(l.x)(e._delegate)}}]),e}(),x=function(){function e(t,n,r){var i=this;Object(u.a)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof l.m||(this._appCompat=t)}return Object(s.a)(e,[{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Object(l.s)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(l.A)(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Object(l.H)(this._delegate)}},{key:"disableNetwork",value:function(){return Object(l.D)(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(l.t)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Object(l.mb)(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Object(l.Z)(this._delegate,e)}},{key:"collection",value:function(e){try{return new M(this,Object(l.y)(this._delegate,e))}catch(t){throw T(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new S(this,Object(l.E)(this._delegate,e))}catch(t){throw T(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new L(this,Object(l.z)(this._delegate,e))}catch(t){throw T(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Object(l.eb)(this._delegate,function(n){return e(new I(t,n))})}},{key:"batch",value:function(){var e=this;return Object(l.K)(this._delegate),new j(new l.l(this._delegate,function(t){return Object(l.L)(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return Object(l.W)(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Object(l.X)(this._delegate,e).then(function(e){return e?new L(t,e):null})}},{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"app",get:function(){if(!this._appCompat)throw new l.g("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}}]),e}(),_=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(i.a)(this,Object(a.a)(t).call(this))).firestore=e,n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"convertBytes",value:function(e){return new k(new l.b(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return S.forKey(t,this.firestore,null)}}]),t}(l.a);var I=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new _(t)}return Object(s.a)(e,[{key:"get",value:function(e){var t=this,n=F(e);return this._delegate.get(n).then(function(e){return new A(t._firestore,new l.e(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=F(e);return n?(m("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=F(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=F(e);return this._delegate.delete(t),this}}]),e}(),j=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"set",value:function(e,t,n){var r=F(e);return n?(m("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=F(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=F(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),E=function(){function e(t,n,r){Object(u.a)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Object(s.a)(e,[{key:"fromFirestore",value:function(e,t){var n=new l.i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new D(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new _(t),n),i.set(n,a)),a}}]),e}();E.INSTANCES=new WeakMap;var S=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new _(t)}return Object(s.a)(e,[{key:"collection",value:function(e){try{return new M(this.firestore,Object(l.y)(this._delegate,e))}catch(t){throw T(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Object(f.l)(e))instanceof l.d&&Object(l.db)(this._delegate,e)}},{key:"set",value:function(e,t){t=m("DocumentReference.set",t);try{return t?Object(l.gb)(this._delegate,e,t):Object(l.gb)(this._delegate,e)}catch(n){throw T(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Object(l.lb)(this._delegate,e):l.lb.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw T(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Object(l.B)(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=N(n),a=C(n,function(t){return new A(e.firestore,new l.e(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Object(l.Y)(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.N)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.O)(this._delegate):Object(l.M)(this._delegate)).then(function(e){return new A(t.firestore,new l.e(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(E.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new M(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new l.g("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new l.d(n._delegate,r,new l.n(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new l.d(n._delegate,r,t))}}]),e}();function T(e,t,n){return e.message=e.message.replace(t,n),e}function N(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!w(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function C(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=w(e[0])?e[0]:w(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var A=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Object(l.ib)(this._delegate,e._delegate)}},{key:"ref",get:function(){return new S(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}}]),e}(),D=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"data",value:function(e){var t=this._delegate.data(e);return Object(l.q)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}]),t}(A),L=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new _(t)}return Object(s.a)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Object(l.bb)(this._delegate,Object(l.nb)(t,n,r)))}catch(i){throw T(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Object(l.bb)(this._delegate,Object(l.ab)(t,n)))}catch(r){throw T(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Object(l.bb)(this._delegate,Object(l.U)(t)))}catch(n){throw T(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Object(l.bb)(this._delegate,Object(l.V)(t)))}catch(n){throw T(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Object(l.bb)(this._delegate,l.kb.apply(void 0,arguments)))}catch(t){throw T(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Object(l.bb)(this._delegate,l.jb.apply(void 0,arguments)))}catch(t){throw T(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Object(l.bb)(this._delegate,l.J.apply(void 0,arguments)))}catch(t){throw T(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Object(l.bb)(this._delegate,l.I.apply(void 0,arguments)))}catch(t){throw T(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Object(l.cb)(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.Q)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.R)(this._delegate):Object(l.P)(this._delegate)).then(function(e){return new P(t.firestore,new l.j(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=N(n),a=C(n,function(t){return new P(e.firestore,new l.j(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Object(l.Y)(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(E.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),R=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new D(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),P=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new R(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new D(n._firestore,r))})}},{key:"isEqual",value:function(e){return Object(l.ib)(this._delegate,e._delegate)}},{key:"query",get:function(){return new L(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new D(e._firestore,t)})}}]),e}(),M=function(e){function t(e,n){var r;return Object(u.a)(this,t),(r=Object(i.a)(this,Object(a.a)(t).call(this,e,n))).firestore=e,r._delegate=n,r}return Object(o.a)(t,e),Object(s.a)(t,[{key:"doc",value:function(e){try{return new S(this.firestore,void 0===e?Object(l.E)(this._delegate):Object(l.E)(this._delegate,e))}catch(t){throw T(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return Object(l.u)(this._delegate,e).then(function(e){return new S(t.firestore,e)})}},{key:"isEqual",value:function(e){return Object(l.db)(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new t(this.firestore,e?this._delegate.withConverter(E.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new S(this.firestore,e):null}}]),t}(L);function F(e){return Object(l.p)(e,l.d)}var U=function(){function e(){Object(u.a)(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._delegate=Object(r.a)(l.f,n)}return Object(s.a)(e,[{key:"isEqual",value:function(e){return(e=Object(f.l)(e))instanceof l.f&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(l.o.keyField().canonicalString())}}]),e}(),V=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=Object(l.fb)();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=Object(l.C)();return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=l.w.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=l.v.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=Object(l.T)(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),B={Firestore:x,GeoPoint:l.h,Timestamp:l.k,Blob:k,Transaction:I,WriteBatch:j,DocumentReference:S,DocumentSnapshot:A,Query:L,QueryDocumentSnapshot:D,QuerySnapshot:P,CollectionReference:M,FieldPath:U,FieldValue:V,setLogLevel:function(e){Object(l.hb)(e)},CACHE_SIZE_UNLIMITED:l.c};!function(e){var t;t=function(e,t){return new x(e,t,new O)},e.INTERNAL.registerComponent(new h.a("firestore-compat",function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(Object.assign({},B))),e.registerVersion(v,y)}(c.a)}]]);
//# sourceMappingURL=2.0a190612.chunk.js.map